/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var te=["require","exports","vs/base/common/strings","vs/base/common/platform","vs/base/common/path","vs/base/common/lifecycle","vs/base/common/buffer","vs/base/common/extpath","vs/base/common/network","vs/base/common/uri","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase","vs/editor/common/core/range","vs/base/common/mime","vs/base/common/stream","vs/base/common/errors","vs/base/common/map","vs/base/common/resources","vs/base/common/async","vs/base/common/event","vs/base/common/glob","vs/editor/common/core/eolCounter","vs/editor/common/core/stringBuilder","vs/editor/common/core/textChange","vs/editor/common/model/pieceTreeTextBuffer/rbTreeBase","vs/editor/common/model","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder","vs/platform/instantiation/common/instantiation","vs/platform/contextkey/common/contextkey","vs/workbench/contrib/notebook/common/notebookCommon","vs/base/common/arrays","vs/base/common/types","vs/base/common/cancellation","vs/editor/common/core/position","vs/editor/common/model/textModelSearch","vs/base/common/iterator","vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/base/common/diff/diff","vs/base/common/hash"],ne=function(X){for(var e=[],R=0,D=X.length;R<D;R++)e[R]=te[X[R]];return e};define(te[12],ne([0,1,4]),function(X,e,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeMimeType=e.getExtensionForMimeType=e.getMediaMime=e.getMediaOrTextMime=e.Mimes=void 0;var D;(function(T){T.text="text/plain",T.binary="application/octet-stream",T.unknown="application/unknown",T.markdown="text/markdown",T.latex="text/latex",T.uriList="text/uri-list"})(D=e.Mimes||(e.Mimes={}));const B={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},I={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function k(T){const _=(0,R.extname)(T),P=B[_.toLowerCase()];return P!==void 0?P:F(T)}e.getMediaOrTextMime=k;function F(T){const _=(0,R.extname)(T);return I[_.toLowerCase()]}e.getMediaMime=F;function A(T){for(const _ in I)if(I[_]===T)return _}e.getExtensionForMimeType=A;const L=/^(.+)\/(.+?)(;.+)?$/;function N(T,_){const P=L.exec(T);return P?`${P[1].toLowerCase()}/${P[2].toLowerCase()}${P[3]??""}`:_?void 0:T}e.normalizeMimeType=N}),define(te[13],ne([0,1,14,5]),function(X,e,R,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prefixedStream=e.prefixedReadable=e.transform=e.toReadable=e.emptyStream=e.toStream=e.peekStream=e.listenStream=e.consumeStream=e.peekReadable=e.consumeReadable=e.newWriteableStream=e.isReadableBufferedStream=e.isReadableStream=void 0;function B(i){const a=i;return a?[a.on,a.pause,a.resume,a.destroy].every(d=>typeof d=="function"):!1}e.isReadableStream=B;function I(i){const a=i;return a?B(a.stream)&&Array.isArray(a.buffer)&&typeof a.ended=="boolean":!1}e.isReadableBufferedStream=I;function k(i,a){return new F(i,a)}e.newWriteableStream=k;class F{constructor(a,d){this.reducer=a,this.options=d,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(a){if(!this.state.destroyed){if(this.state.flowing)this.emitData(a);else if(this.buffer.data.push(a),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(d=>this.pendingWritePromises.push(d))}}error(a){this.state.destroyed||(this.state.flowing?this.emitError(a):this.buffer.error.push(a))}end(a){this.state.destroyed||(typeof a!="undefined"&&this.write(a),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(a){this.listeners.data.slice(0).forEach(d=>d(a))}emitError(a){this.listeners.error.length===0?(0,R.onUnexpectedError)(a):this.listeners.error.slice(0).forEach(d=>d(a))}emitEnd(){this.listeners.end.slice(0).forEach(a=>a())}on(a,d){if(!this.state.destroyed)switch(a){case"data":this.listeners.data.push(d),this.resume();break;case"end":this.listeners.end.push(d),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(d),this.state.flowing&&this.flowErrors();break}}removeListener(a,d){if(this.state.destroyed)return;let p;switch(a){case"data":p=this.listeners.data;break;case"end":p=this.listeners.end;break;case"error":p=this.listeners.error;break}if(p){const y=p.indexOf(d);y>=0&&p.splice(y,1)}}flowData(){if(this.buffer.data.length>0){const a=this.reducer(this.buffer.data);this.emitData(a),this.buffer.data.length=0;const d=[...this.pendingWritePromises];this.pendingWritePromises.length=0,d.forEach(p=>p())}}flowErrors(){if(this.listeners.error.length>0){for(const a of this.buffer.error)this.emitError(a);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}}function A(i,a){const d=[];let p;for(;(p=i.read())!==null;)d.push(p);return a(d)}e.consumeReadable=A;function L(i,a,d){const p=[];let y;for(;(y=i.read())!==null&&p.length<d;)p.push(y);return y===null&&p.length>0?a(p):{read:()=>{if(p.length>0)return p.shift();if(typeof y!="undefined"){const w=y;return y=void 0,w}return i.read()}}}e.peekReadable=L;function N(i,a){return new Promise((d,p)=>{const y=[];T(i,{onData:w=>{a&&y.push(w)},onError:w=>{a?p(w):d(void 0)},onEnd:()=>{d(a?a(y):void 0)}})})}e.consumeStream=N;function T(i,a){let d=!1;return i.on("error",p=>{d||a.onError(p)}),i.on("end",()=>{d||a.onEnd()}),i.on("data",p=>{d||a.onData(p)}),(0,D.toDisposable)(()=>d=!0)}e.listenStream=T;function _(i,a){return new Promise((d,p)=>{const y=new D.DisposableStore,w=[],h=u=>{if(w.push(u),w.length>a)return y.dispose(),i.pause(),d({stream:i,buffer:w,ended:!1})},o=u=>p(u),r=()=>d({stream:i,buffer:w,ended:!0});y.add((0,D.toDisposable)(()=>i.removeListener("error",o))),i.on("error",o),y.add((0,D.toDisposable)(()=>i.removeListener("end",r))),i.on("end",r),y.add((0,D.toDisposable)(()=>i.removeListener("data",h))),i.on("data",h)})}e.peekStream=_;function P(i,a){const d=k(a);return d.end(i),d}e.toStream=P;function b(){const i=k(()=>{throw new Error("not supported")});return i.end(),i}e.emptyStream=b;function c(i){let a=!1;return{read:()=>a?null:(a=!0,i)}}e.toReadable=c;function l(i,a,d){const p=k(d);return T(i,{onData:y=>p.write(a.data(y)),onError:y=>p.error(a.error?a.error(y):y),onEnd:()=>p.end()}),p}e.transform=l;function t(i,a,d){let p=!1;return{read:()=>{const y=a.read();return p?y:(p=!0,y!==null?d([i,y]):i)}}}e.prefixedReadable=t;function s(i,a,d){let p=!1;const y=k(d);return T(a,{onData:w=>p?y.write(w):(p=!0,y.write(d([i,w]))),onError:w=>y.error(w),onEnd:()=>{p||(p=!0,y.write(i)),y.end()}}),y}e.prefixedStream=s}),define(te[6],ne([0,1,13]),function(X,e,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeBase64=e.decodeBase64=e.prefixedBufferStream=e.prefixedBufferReadable=e.newWriteableBufferStream=e.streamToBufferReadableStream=e.bufferToStream=e.bufferedStreamToBuffer=e.streamToBuffer=e.bufferToReadable=e.readableToBuffer=e.writeUInt8=e.readUInt8=e.writeUInt32LE=e.readUInt32LE=e.writeUInt32BE=e.readUInt32BE=e.writeUInt16LE=e.readUInt16LE=e.VSBuffer=void 0;const D=typeof Buffer!="undefined";let B,I;class k{constructor(f){this.buffer=f,this.byteLength=this.buffer.byteLength}static alloc(f){return D?new k(Buffer.allocUnsafe(f)):new k(new Uint8Array(f))}static wrap(f){return D&&!Buffer.isBuffer(f)&&(f=Buffer.from(f.buffer,f.byteOffset,f.byteLength)),new k(f)}static fromString(f,E){return!(E?.dontUseNodeBuffer||!1)&&D?new k(Buffer.from(f)):(B||(B=new TextEncoder),new k(B.encode(f)))}static fromByteArray(f){const E=k.alloc(f.length);for(let S=0,W=f.length;S<W;S++)E.buffer[S]=f[S];return E}static concat(f,E){if(typeof E=="undefined"){E=0;for(let j=0,M=f.length;j<M;j++)E+=f[j].byteLength}const S=k.alloc(E);let W=0;for(let j=0,M=f.length;j<M;j++){const n=f[j];S.set(n,W),W+=n.byteLength}return S}clone(){const f=k.alloc(this.byteLength);return f.set(this),f}toString(){return D?this.buffer.toString():(I||(I=new TextDecoder),I.decode(this.buffer))}slice(f,E){return new k(this.buffer.subarray(f,E))}set(f,E){if(f instanceof k)this.buffer.set(f.buffer,E);else if(f instanceof Uint8Array)this.buffer.set(f,E);else if(f instanceof ArrayBuffer)this.buffer.set(new Uint8Array(f),E);else if(ArrayBuffer.isView(f))this.buffer.set(new Uint8Array(f.buffer,f.byteOffset,f.byteLength),E);else throw new Error("Unknown argument 'array'")}readUInt32BE(f){return L(this.buffer,f)}writeUInt32BE(f,E){N(this.buffer,f,E)}readUInt32LE(f){return T(this.buffer,f)}writeUInt32LE(f,E){_(this.buffer,f,E)}readUInt8(f){return P(this.buffer,f)}writeUInt8(f,E){b(this.buffer,f,E)}}e.VSBuffer=k;function F(u,f){return u[f+0]<<0>>>0|u[f+1]<<8>>>0}e.readUInt16LE=F;function A(u,f,E){u[E+0]=f&255,f=f>>>8,u[E+1]=f&255}e.writeUInt16LE=A;function L(u,f){return u[f]*2**24+u[f+1]*2**16+u[f+2]*2**8+u[f+3]}e.readUInt32BE=L;function N(u,f,E){u[E+3]=f,f=f>>>8,u[E+2]=f,f=f>>>8,u[E+1]=f,f=f>>>8,u[E]=f}e.writeUInt32BE=N;function T(u,f){return u[f+0]<<0>>>0|u[f+1]<<8>>>0|u[f+2]<<16>>>0|u[f+3]<<24>>>0}e.readUInt32LE=T;function _(u,f,E){u[E+0]=f&255,f=f>>>8,u[E+1]=f&255,f=f>>>8,u[E+2]=f&255,f=f>>>8,u[E+3]=f&255}e.writeUInt32LE=_;function P(u,f){return u[f]}e.readUInt8=P;function b(u,f,E){u[E]=f}e.writeUInt8=b;function c(u){return R.consumeReadable(u,f=>k.concat(f))}e.readableToBuffer=c;function l(u){return R.toReadable(u)}e.bufferToReadable=l;function t(u){return R.consumeStream(u,f=>k.concat(f))}e.streamToBuffer=t;async function s(u){return u.ended?k.concat(u.buffer):k.concat([...u.buffer,await t(u.stream)])}e.bufferedStreamToBuffer=s;function i(u){return R.toStream(u,f=>k.concat(f))}e.bufferToStream=i;function a(u){return R.transform(u,{data:f=>typeof f=="string"?k.fromString(f):k.wrap(f)},f=>k.concat(f))}e.streamToBufferReadableStream=a;function d(u){return R.newWriteableStream(f=>k.concat(f),u)}e.newWriteableBufferStream=d;function p(u,f){return R.prefixedReadable(u,f,E=>k.concat(E))}e.prefixedBufferReadable=p;function y(u,f){return R.prefixedStream(u,f,E=>k.concat(E))}e.prefixedBufferStream=y;function w(u){let f=0,E=0,S=0;const W=new Uint8Array(Math.floor(u.length/4*3)),j=n=>{switch(E){case 3:W[S++]=f|n,E=0;break;case 2:W[S++]=f|n>>>2,f=n<<6,E=3;break;case 1:W[S++]=f|n>>>4,f=n<<4,E=2;break;default:f=n<<2,E=1}};for(let n=0;n<u.length;n++){const m=u.charCodeAt(n);if(m>=65&&m<=90)j(m-65);else if(m>=97&&m<=122)j(m-97+26);else if(m>=48&&m<=57)j(m-48+52);else if(m===43||m===45)j(62);else if(m===47||m===95)j(63);else{if(m===61)break;throw new SyntaxError(`Unexpected base64 character ${u[n]}`)}}const M=S;for(;E>0;)j(0);return k.wrap(W).slice(0,M)}e.decodeBase64=w;const h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function r({buffer:u},f=!0,E=!1){const S=E?o:h;let W="";const j=u.byteLength%3;let M=0;for(;M<u.byteLength-j;M+=3){const n=u[M+0],m=u[M+1],C=u[M+2];W+=S[n>>>2],W+=S[(n<<4|m>>>4)&63],W+=S[(m<<2|C>>>6)&63],W+=S[C&63]}if(j===1){const n=u[M+0];W+=S[n>>>2],W+=S[n<<4&63],f&&(W+="==")}else if(j===2){const n=u[M+0],m=u[M+1];W+=S[n>>>2],W+=S[(n<<4|m>>>4)&63],W+=S[m<<2&63],f&&(W+="=")}return W}e.encodeBase64=r});var ae=this&&this.__classPrivateFieldSet||function(X,e,R,D,B){if(D==="m")throw new TypeError("Private method is not writable");if(D==="a"&&!B)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?X!==e||!B:!e.has(X))throw new TypeError("Cannot write private member to an object whose class did not declare it");return D==="a"?B.call(X,R):B?B.value=R:e.set(X,R),R},se=this&&this.__classPrivateFieldGet||function(X,e,R,D){if(R==="a"&&!D)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?X!==e||!D:!e.has(X))throw new TypeError("Cannot read private member from an object whose class did not declare it");return R==="m"?D:R==="a"?D.call(X):D?D.value:e.get(X)};define(te[15],ne([0,1,30,2]),function(X,e,R,D){"use strict";var B,I,k;Object.defineProperty(e,"__esModule",{value:!0}),e.ReadonlyMapView=e.LRUCache=e.LinkedMap=e.Touch=e.ResourceMap=e.TernarySearchTree=e.UriIterator=e.PathIterator=e.ConfigKeysIterator=e.StringIterator=e.setToString=e.mapToString=e.getOrSet=void 0;function F(w,h,o){let r=w.get(h);return r===void 0&&(r=o,w.set(h,r)),r}e.getOrSet=F;function A(w){const h=[];return w.forEach((o,r)=>{h.push(`${r} => ${o}`)}),`Map(${w.size}) {${h.join(", ")}}`}e.mapToString=A;function L(w){const h=[];return w.forEach(o=>{h.push(o)}),`Set(${w.size}) {${h.join(", ")}}`}e.setToString=L;class N{constructor(){this._value="",this._pos=0}reset(h){return this._value=h,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(h){const o=h.charCodeAt(0),r=this._value.charCodeAt(this._pos);return o-r}value(){return this._value[this._pos]}}e.StringIterator=N;class T{constructor(h=!0){this._caseSensitive=h}reset(h){return this._value=h,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let h=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(h)this._from++;else break;else h=!1;return this}cmp(h){return this._caseSensitive?(0,D.compareSubstring)(h,this._value,0,h.length,this._from,this._to):(0,D.compareSubstringIgnoreCase)(h,this._value,0,h.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.ConfigKeysIterator=T;class _{constructor(h=!0,o=!0){this._splitOnBackslash=h,this._caseSensitive=o}reset(h){this._from=0,this._to=0,this._value=h,this._valueLen=h.length;for(let o=h.length-1;o>=0;o--,this._valueLen--){const r=this._value.charCodeAt(o);if(!(r===47||this._splitOnBackslash&&r===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let h=!0;for(;this._to<this._valueLen;this._to++){const o=this._value.charCodeAt(this._to);if(o===47||this._splitOnBackslash&&o===92)if(h)this._from++;else break;else h=!1}return this}cmp(h){return this._caseSensitive?(0,D.compareSubstring)(h,this._value,0,h.length,this._from,this._to):(0,D.compareSubstringIgnoreCase)(h,this._value,0,h.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.PathIterator=_;var P;(function(w){w[w.Scheme=1]="Scheme",w[w.Authority=2]="Authority",w[w.Path=3]="Path",w[w.Query=4]="Query",w[w.Fragment=5]="Fragment"})(P||(P={}));class b{constructor(h){this._ignorePathCasing=h,this._states=[],this._stateIdx=0}reset(h){return this._value=h,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new _(!1,!this._ignorePathCasing(h)),this._pathIterator.reset(h.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(h){if(this._states[this._stateIdx]===1)return(0,D.compareIgnoreCase)(h,this._value.scheme);if(this._states[this._stateIdx]===2)return(0,D.compareIgnoreCase)(h,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(h);if(this._states[this._stateIdx]===4)return(0,D.compare)(h,this._value.query);if(this._states[this._stateIdx]===5)return(0,D.compare)(h,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}e.UriIterator=b;class c{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const h=this.right;return this.right=h.left,h.left=this,this.updateHeight(),h.updateHeight(),h}rotateRight(){const h=this.left;return this.left=h.right,h.right=this,this.updateHeight(),h.updateHeight(),h}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}var l;(function(w){w[w.Left=-1]="Left",w[w.Mid=0]="Mid",w[w.Right=1]="Right"})(l||(l={}));class t{constructor(h){this._iter=h}static forUris(h=()=>!1){return new t(new b(h))}static forPaths(h=!1){return new t(new _(void 0,!h))}static forStrings(){return new t(new N)}static forConfigKeys(){return new t(new T)}clear(){this._root=void 0}fill(h,o){if(o){const r=o.slice(0);(0,R.shuffle)(r);for(let u of r)this.set(u,h)}else{const r=h.slice(0);(0,R.shuffle)(r);for(let u of r)this.set(u[0],u[1])}}set(h,o){const r=this._iter.reset(h);let u;this._root||(this._root=new c,this._root.segment=r.value());const f=[];for(u=this._root;;){const S=r.cmp(u.segment);if(S>0)u.left||(u.left=new c,u.left.segment=r.value()),f.push([-1,u]),u=u.left;else if(S<0)u.right||(u.right=new c,u.right.segment=r.value()),f.push([1,u]),u=u.right;else if(r.hasNext())r.next(),u.mid||(u.mid=new c,u.mid.segment=r.value()),f.push([0,u]),u=u.mid;else break}const E=u.value;u.value=o,u.key=h;for(let S=f.length-1;S>=0;S--){const W=f[S][1];W.updateHeight();const j=W.balanceFactor();if(j<-1||j>1){const M=f[S][0],n=f[S+1][0];if(M===1&&n===1)f[S][1]=W.rotateLeft();else if(M===-1&&n===-1)f[S][1]=W.rotateRight();else if(M===1&&n===-1)W.right=f[S+1][1]=f[S+1][1].rotateRight(),f[S][1]=W.rotateLeft();else if(M===-1&&n===1)W.left=f[S+1][1]=f[S+1][1].rotateLeft(),f[S][1]=W.rotateRight();else throw new Error;if(S>0)switch(f[S-1][0]){case-1:f[S-1][1].left=f[S][1];break;case 1:f[S-1][1].right=f[S][1];break;case 0:f[S-1][1].mid=f[S][1];break}else this._root=f[0][1]}}return E}get(h){return this._getNode(h)?.value}_getNode(h){const o=this._iter.reset(h);let r=this._root;for(;r;){const u=o.cmp(r.segment);if(u>0)r=r.left;else if(u<0)r=r.right;else if(o.hasNext())o.next(),r=r.mid;else break}return r}has(h){const o=this._getNode(h);return!(o?.value===void 0&&o?.mid===void 0)}delete(h){return this._delete(h,!1)}deleteSuperstr(h){return this._delete(h,!0)}_delete(h,o){const r=this._iter.reset(h),u=[];let f=this._root;for(;f;){const E=r.cmp(f.segment);if(E>0)u.push([-1,f]),f=f.left;else if(E<0)u.push([1,f]),f=f.right;else if(r.hasNext())r.next(),u.push([0,f]),f=f.mid;else break}if(!!f){if(o?(f.left=void 0,f.mid=void 0,f.right=void 0,f.height=1):(f.key=void 0,f.value=void 0),!f.mid&&!f.value)if(f.left&&f.right){const E=this._min(f.right),{key:S,value:W,segment:j}=E;this._delete(E.key,!1),f.key=S,f.value=W,f.segment=j}else{const E=f.left??f.right;if(u.length>0){const[S,W]=u[u.length-1];switch(S){case-1:W.left=E;break;case 0:W.mid=E;break;case 1:W.right=E;break}}else this._root=E}for(let E=u.length-1;E>=0;E--){const S=u[E][1];S.updateHeight();const W=S.balanceFactor();if(W>1?(S.right.balanceFactor()>=0||(S.right=S.right.rotateRight()),u[E][1]=S.rotateLeft()):W<-1&&(S.left.balanceFactor()<=0||(S.left=S.left.rotateLeft()),u[E][1]=S.rotateRight()),E>0)switch(u[E-1][0]){case-1:u[E-1][1].left=u[E][1];break;case 1:u[E-1][1].right=u[E][1];break;case 0:u[E-1][1].mid=u[E][1];break}else this._root=u[0][1]}}}_min(h){for(;h.left;)h=h.left;return h}findSubstr(h){const o=this._iter.reset(h);let r=this._root,u;for(;r;){const f=o.cmp(r.segment);if(f>0)r=r.left;else if(f<0)r=r.right;else if(o.hasNext())o.next(),u=r.value||u,r=r.mid;else break}return r&&r.value||u}findSuperstr(h){const o=this._iter.reset(h);let r=this._root;for(;r;){const u=o.cmp(r.segment);if(u>0)r=r.left;else if(u<0)r=r.right;else if(o.hasNext())o.next(),r=r.mid;else return r.mid?this._entries(r.mid):void 0}}forEach(h){for(const[o,r]of this)h(r,o)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(h){!h||(h.left&&(yield*this._entries(h.left)),h.value&&(yield[h.key,h.value]),h.mid&&(yield*this._entries(h.mid)),h.right&&(yield*this._entries(h.right)))}_isBalanced(){const h=o=>{if(!o)return!0;const r=o.balanceFactor();return r<-1||r>1?!1:h(o.left)&&h(o.right)};return h(this._root)}}e.TernarySearchTree=t;class s{constructor(h,o){this.uri=h,this.value=o}}class i{constructor(h,o){this[B]="ResourceMap",h instanceof i?(this.map=new Map(h.map),this.toKey=o??i.defaultToKey):(this.map=new Map,this.toKey=h??i.defaultToKey)}set(h,o){return this.map.set(this.toKey(h),new s(h,o)),this}get(h){return this.map.get(this.toKey(h))?.value}has(h){return this.map.has(this.toKey(h))}get size(){return this.map.size}clear(){this.map.clear()}delete(h){return this.map.delete(this.toKey(h))}forEach(h,o){typeof o!="undefined"&&(h=h.bind(o));for(let[r,u]of this.map)h(u.value,u.uri,this)}*values(){for(let h of this.map.values())yield h.value}*keys(){for(let h of this.map.values())yield h.uri}*entries(){for(let h of this.map.values())yield[h.uri,h.value]}*[(B=Symbol.toStringTag,Symbol.iterator)](){for(let[,h]of this.map)yield[h.uri,h.value]}}e.ResourceMap=i,i.defaultToKey=w=>w.toString();var a;(function(w){w[w.None=0]="None",w[w.AsOld=1]="AsOld",w[w.AsNew=2]="AsNew"})(a=e.Touch||(e.Touch={}));class d{constructor(){this[I]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(h){return this._map.has(h)}get(h,o=0){const r=this._map.get(h);if(!!r)return o!==0&&this.touch(r,o),r.value}set(h,o,r=0){let u=this._map.get(h);if(u)u.value=o,r!==0&&this.touch(u,r);else{switch(u={key:h,value:o,next:void 0,previous:void 0},r){case 0:this.addItemLast(u);break;case 1:this.addItemFirst(u);break;case 2:this.addItemLast(u);break;default:this.addItemLast(u);break}this._map.set(h,u),this._size++}return this}delete(h){return!!this.remove(h)}remove(h){const o=this._map.get(h);if(!!o)return this._map.delete(h),this.removeItem(o),this._size--,o.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const h=this._head;return this._map.delete(h.key),this.removeItem(h),this._size--,h.value}forEach(h,o){const r=this._state;let u=this._head;for(;u;){if(o?h.bind(o)(u.value,u.key,this):h(u.value,u.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");u=u.next}}keys(){const h=this,o=this._state;let r=this._head;const u={[Symbol.iterator](){return u},next(){if(h._state!==o)throw new Error("LinkedMap got modified during iteration.");if(r){const f={value:r.key,done:!1};return r=r.next,f}else return{value:void 0,done:!0}}};return u}values(){const h=this,o=this._state;let r=this._head;const u={[Symbol.iterator](){return u},next(){if(h._state!==o)throw new Error("LinkedMap got modified during iteration.");if(r){const f={value:r.value,done:!1};return r=r.next,f}else return{value:void 0,done:!0}}};return u}entries(){const h=this,o=this._state;let r=this._head;const u={[Symbol.iterator](){return u},next(){if(h._state!==o)throw new Error("LinkedMap got modified during iteration.");if(r){const f={value:[r.key,r.value],done:!1};return r=r.next,f}else return{value:void 0,done:!0}}};return u}[(I=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(h){if(h>=this.size)return;if(h===0){this.clear();return}let o=this._head,r=this.size;for(;o&&r>h;)this._map.delete(o.key),o=o.next,r--;this._head=o,this._size=r,o&&(o.previous=void 0),this._state++}addItemFirst(h){if(!this._head&&!this._tail)this._tail=h;else if(this._head)h.next=this._head,this._head.previous=h;else throw new Error("Invalid list");this._head=h,this._state++}addItemLast(h){if(!this._head&&!this._tail)this._head=h;else if(this._tail)h.previous=this._tail,this._tail.next=h;else throw new Error("Invalid list");this._tail=h,this._state++}removeItem(h){if(h===this._head&&h===this._tail)this._head=void 0,this._tail=void 0;else if(h===this._head){if(!h.next)throw new Error("Invalid list");h.next.previous=void 0,this._head=h.next}else if(h===this._tail){if(!h.previous)throw new Error("Invalid list");h.previous.next=void 0,this._tail=h.previous}else{const o=h.next,r=h.previous;if(!o||!r)throw new Error("Invalid list");o.previous=r,r.next=o}h.next=void 0,h.previous=void 0,this._state++}touch(h,o){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(o!==1&&o!==2)){if(o===1){if(h===this._head)return;const r=h.next,u=h.previous;h===this._tail?(u.next=void 0,this._tail=u):(r.previous=u,u.next=r),h.previous=void 0,h.next=this._head,this._head.previous=h,this._head=h,this._state++}else if(o===2){if(h===this._tail)return;const r=h.next,u=h.previous;h===this._head?(r.previous=void 0,this._head=r):(r.previous=u,u.next=r),h.next=void 0,h.previous=this._tail,this._tail.next=h,this._tail=h,this._state++}}}toJSON(){const h=[];return this.forEach((o,r)=>{h.push([r,o])}),h}fromJSON(h){this.clear();for(const[o,r]of h)this.set(o,r)}}e.LinkedMap=d;class p extends d{constructor(h,o=1){super();this._limit=h,this._ratio=Math.min(Math.max(0,o),1)}get limit(){return this._limit}set limit(h){this._limit=h,this.checkTrim()}get ratio(){return this._ratio}set ratio(h){this._ratio=Math.min(Math.max(0,h),1),this.checkTrim()}get(h,o=2){return super.get(h,o)}peek(h){return super.get(h,0)}set(h,o){return super.set(h,o,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}e.LRUCache=p;class y{constructor(h){k.set(this,void 0),ae(this,k,h,"f")}get size(){return se(this,k,"f").size}forEach(h,o){se(this,k,"f").forEach(h,o)}get(h){return se(this,k,"f").get(h)}has(h){return se(this,k,"f").has(h)}entries(){return se(this,k,"f").entries()}keys(){return se(this,k,"f").keys()}values(){return se(this,k,"f").values()}[(k=new WeakMap,Symbol.iterator)](){return se(this,k,"f").entries()}}e.ReadonlyMapView=y}),define(te[7],ne([0,1,4,3,2,31]),function(X,e,R,D,B,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function k(o){return o===47||o===92}e.isPathSeparator=k;function F(o){return o.replace(/[\\/]/g,R.posix.sep)}e.toSlashes=F;function A(o){return o.indexOf("/")===-1&&(o=F(o)),/^[a-zA-Z]:(\/|$)/.test(o)&&(o="/"+o),o}e.toPosixPath=A;function L(o,r=R.posix.sep){if(!o)return"";const u=o.length,f=o.charCodeAt(0);if(k(f)){if(k(o.charCodeAt(1))&&!k(o.charCodeAt(2))){let S=3;const W=S;for(;S<u&&!k(o.charCodeAt(S));S++);if(W!==S&&!k(o.charCodeAt(S+1))){for(S+=1;S<u;S++)if(k(o.charCodeAt(S)))return o.slice(0,S+1).replace(/[\\/]/g,r)}}return r}else if(t(f)&&o.charCodeAt(1)===58)return k(o.charCodeAt(2))?o.slice(0,2)+r:o.slice(0,2);let E=o.indexOf("://");if(E!==-1){for(E+=3;E<u;E++)if(k(o.charCodeAt(E)))return o.slice(0,E+1)}return""}e.getRoot=L;function N(o){if(!D.isWindows||!o||o.length<5)return!1;let r=o.charCodeAt(0);if(r!==92||(r=o.charCodeAt(1),r!==92))return!1;let u=2;const f=u;for(;u<o.length&&(r=o.charCodeAt(u),r!==92);u++);return!(f===u||(r=o.charCodeAt(u+1),isNaN(r)||r===92))}e.isUNC=N;const T=/[\\/:\*\?"<>\|]/g,_=/[\\/]/g,P=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function b(o,r=D.isWindows){const u=r?T:_;return!(!o||o.length===0||/^\s+$/.test(o)||(u.lastIndex=0,u.test(o))||r&&P.test(o)||o==="."||o===".."||r&&o[o.length-1]==="."||r&&o.length!==o.trim().length||o.length>255)}e.isValidBasename=b;function c(o,r,u){const f=o===r;return!u||f?f:!o||!r?!1:(0,B.equalsIgnoreCase)(o,r)}e.isEqual=c;function l(o,r,u,f=R.sep){if(o===r)return!0;if(!o||!r||r.length>o.length)return!1;if(u){if(!(0,B.startsWithIgnoreCase)(o,r))return!1;if(r.length===o.length)return!0;let S=r.length;return r.charAt(r.length-1)===f&&S--,o.charAt(S)===f}return r.charAt(r.length-1)!==f&&(r+=f),o.indexOf(r)===0}e.isEqualOrParent=l;function t(o){return o>=65&&o<=90||o>=97&&o<=122}e.isWindowsDriveLetter=t;function s(o,r){return D.isWindows&&o.endsWith(":")&&(o+=R.sep),(0,R.isAbsolute)(o)||(o=(0,R.join)(r,o)),o=(0,R.normalize)(o),D.isWindows?(o=(0,B.rtrim)(o,R.sep),o.endsWith(":")&&(o+=R.sep)):(o=(0,B.rtrim)(o,R.sep),o||(o=R.sep)),o}e.sanitizeFilePath=s;function i(o){const r=(0,R.normalize)(o);return D.isWindows?o.length>3?!1:a(r)&&(o.length===2||r.charCodeAt(2)===92):r===R.posix.sep}e.isRootOrDriveLetter=i;function a(o,r){return(r!==void 0?r:D.isWindows)?t(o.charCodeAt(0))&&o.charCodeAt(1)===58:!1}e.hasDriveLetter=a;function d(o){return a(o)?o[0]:void 0}e.getDriveLetter=d;function p(o,r,u){return r.length>o.length?-1:o===r?0:(u&&(o=o.toLowerCase(),r=r.toLowerCase()),o.indexOf(r))}e.indexOfPath=p;function y(o){const r=o.split(":");let u,f,E;for(const S of r){const W=Number(S);(0,I.isNumber)(W)?f===void 0?f=W:E===void 0&&(E=W):u=u?[u,S].join(":"):S}if(!u)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:u,line:f!==void 0?f:void 0,column:E!==void 0?E:f!==void 0?1:void 0}}e.parseLineAndColumnAware=y;const w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function h(o,r,u=8){let f="";for(let S=0;S<u;S++)f+=w.charAt(Math.floor(Math.random()*w.length));let E;return r?E=`${r}-${f}`:E=f,o?(0,R.join)(o,E):E}e.randomPath=h}),define(te[8],ne([0,1,3,9]),function(X,e,R,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileAccess=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var B;(function(F){F.inMemory="inmemory",F.vscode="vscode",F.internal="private",F.walkThrough="walkThrough",F.walkThroughSnippet="walkThroughSnippet",F.http="http",F.https="https",F.file="file",F.mailto="mailto",F.untitled="untitled",F.data="data",F.command="command",F.vscodeRemote="vscode-remote",F.vscodeRemoteResource="vscode-remote-resource",F.userData="vscode-userdata",F.vscodeCustomEditor="vscode-custom-editor",F.vscodeNotebook="vscode-notebook",F.vscodeNotebookCell="vscode-notebook-cell",F.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",F.vscodeNotebookCellOutput="vscode-notebook-cell-output",F.vscodeInteractive="vscode-interactive",F.vscodeInteractiveInput="vscode-interactive-input",F.vscodeSettings="vscode-settings",F.vscodeWorkspaceTrust="vscode-workspace-trust",F.vscodeTerminal="vscode-terminal",F.webviewPanel="webview-panel",F.vscodeWebview="vscode-webview",F.extension="extension",F.vscodeFileResource="vscode-file",F.tmp="tmp",F.vsls="vsls"})(B=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class I{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(A){this._preferredWebSchema=A}setDelegate(A){this._delegate=A}set(A,L,N){this._hosts[A]=L,this._ports[A]=N}setConnectionToken(A,L){this._connectionTokens[A]=L}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(A){if(this._delegate)return this._delegate(A);const L=A.authority;let N=this._hosts[L];N&&N.indexOf(":")!==-1&&(N=`[${N}]`);const T=this._ports[L],_=this._connectionTokens[L];let P=`path=${encodeURIComponent(A.path)}`;return typeof _=="string"&&(P+=`&${e.connectionTokenQueryName}=${encodeURIComponent(_)}`),D.URI.from({scheme:R.isWeb?this._preferredWebSchema:B.vscodeRemoteResource,authority:`${N}:${T}`,path:"/vscode-remote-resource",query:P})}}e.RemoteAuthorities=new I;class k{asBrowserUri(A,L){const N=this.toUri(A,L);return N.scheme===B.vscodeRemote?e.RemoteAuthorities.rewrite(N):N.scheme===B.file&&(R.isNative||R.isWebWorker&&R.globals.origin===`${B.vscodeFileResource}://${k.FALLBACK_AUTHORITY}`)?N.with({scheme:B.vscodeFileResource,authority:N.authority||k.FALLBACK_AUTHORITY,query:null,fragment:null}):N}asFileUri(A,L){const N=this.toUri(A,L);return N.scheme===B.vscodeFileResource?N.with({scheme:B.file,authority:N.authority!==k.FALLBACK_AUTHORITY?N.authority:null,query:null,fragment:null}):N}toUri(A,L){return D.URI.isUri(A)?A:D.URI.parse(L.toUrl(A))}}k.FALLBACK_AUTHORITY="vscode-app",e.FileAccess=new k}),define(te[16],ne([0,1,7,8,4,3,2,9]),function(X,e,R,D,B,I,k,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function A(P){return(0,F.uriToFsPath)(P,!0)}e.originalFSPath=A;class L{constructor(b){this._ignorePathCasing=b}compare(b,c,l=!1){return b===c?0:(0,k.compare)(this.getComparisonKey(b,l),this.getComparisonKey(c,l))}isEqual(b,c,l=!1){return b===c?!0:!b||!c?!1:this.getComparisonKey(b,l)===this.getComparisonKey(c,l)}getComparisonKey(b,c=!1){return b.with({path:this._ignorePathCasing(b)?b.path.toLowerCase():void 0,fragment:c?null:void 0}).toString()}ignorePathCasing(b){return this._ignorePathCasing(b)}isEqualOrParent(b,c,l=!1){if(b.scheme===c.scheme){if(b.scheme===D.Schemas.file)return R.isEqualOrParent(A(b),A(c),this._ignorePathCasing(b))&&b.query===c.query&&(l||b.fragment===c.fragment);if((0,e.isEqualAuthority)(b.authority,c.authority))return R.isEqualOrParent(b.path,c.path,this._ignorePathCasing(b),"/")&&b.query===c.query&&(l||b.fragment===c.fragment)}return!1}joinPath(b,...c){return F.URI.joinPath(b,...c)}basenameOrAuthority(b){return(0,e.basename)(b)||b.authority}basename(b){return B.posix.basename(b.path)}extname(b){return B.posix.extname(b.path)}dirname(b){if(b.path.length===0)return b;let c;return b.scheme===D.Schemas.file?c=F.URI.file(B.dirname(A(b))).path:(c=B.posix.dirname(b.path),b.authority&&c.length&&c.charCodeAt(0)!==47&&(console.error(`dirname("${b.toString})) resulted in a relative path`),c="/")),b.with({path:c})}normalizePath(b){if(!b.path.length)return b;let c;return b.scheme===D.Schemas.file?c=F.URI.file(B.normalize(A(b))).path:c=B.posix.normalize(b.path),b.with({path:c})}relativePath(b,c){if(b.scheme!==c.scheme||!(0,e.isEqualAuthority)(b.authority,c.authority))return;if(b.scheme===D.Schemas.file){const s=B.relative(A(b),A(c));return I.isWindows?R.toSlashes(s):s}let l=b.path||"/",t=c.path||"/";if(this._ignorePathCasing(b)){let s=0;for(const i=Math.min(l.length,t.length);s<i&&!(l.charCodeAt(s)!==t.charCodeAt(s)&&l.charAt(s).toLowerCase()!==t.charAt(s).toLowerCase());s++);l=t.substr(0,s)+l.substr(s)}return B.posix.relative(l,t)}resolvePath(b,c){if(b.scheme===D.Schemas.file){const l=F.URI.file(B.resolve(A(b),c));return b.with({authority:l.authority,path:l.path})}return c=R.toPosixPath(c),b.with({path:B.posix.resolve(b.path,c)})}isAbsolutePath(b){return!!b.path&&b.path[0]==="/"}isEqualAuthority(b,c){return b===c||b!==void 0&&c!==void 0&&(0,k.equalsIgnoreCase)(b,c)}hasTrailingPathSeparator(b,c=B.sep){if(b.scheme===D.Schemas.file){const l=A(b);return l.length>R.getRoot(l).length&&l[l.length-1]===c}else{const l=b.path;return l.length>1&&l.charCodeAt(l.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(b.fsPath)}}removeTrailingPathSeparator(b,c=B.sep){return(0,e.hasTrailingPathSeparator)(b,c)?b.with({path:b.path.substr(0,b.path.length-1)}):b}addTrailingPathSeparator(b,c=B.sep){let l=!1;if(b.scheme===D.Schemas.file){const t=A(b);l=t!==void 0&&t.length===R.getRoot(t).length&&t[t.length-1]===c}else{c="/";const t=b.path;l=t.length===1&&t.charCodeAt(t.length-1)===47}return!l&&!(0,e.hasTrailingPathSeparator)(b,c)?b.with({path:b.path+"/"}):b}}e.ExtUri=L,e.extUri=new L(()=>!1),e.extUriBiasedIgnorePathCase=new L(P=>P.scheme===D.Schemas.file?!I.isLinux:!0),e.extUriIgnorePathCase=new L(P=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function N(P,b){const c=[];for(let l=0;l<P.length;l++){const t=b(P[l]);P.some((s,i)=>i===l?!1:(0,e.isEqualOrParent)(t,b(s)))||c.push(P[l])}return c}e.distinctParents=N;var T;(function(P){P.META_DATA_LABEL="label",P.META_DATA_DESCRIPTION="description",P.META_DATA_SIZE="size",P.META_DATA_MIME="mime";function b(c){const l=new Map;c.path.substring(c.path.indexOf(";")+1,c.path.lastIndexOf(";")).split(";").forEach(i=>{const[a,d]=i.split(":");a&&d&&l.set(a,d)});const s=c.path.substring(0,c.path.indexOf(";"));return s&&l.set(P.META_DATA_MIME,s),l}P.parseMetaData=b})(T=e.DataUri||(e.DataUri={}));function _(P,b,c){if(b){let l=P.path;return l&&l[0]!==B.posix.sep&&(l=B.posix.sep+l),P.with({scheme:c,authority:b,path:l})}return P.with({scheme:c})}e.toLocalResource=_}),define(te[17],ne([0,1,32,14,18,5,16,3]),function(X,e,R,D,B,I,k,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.MicrotaskDelay=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function A(U){return!!U&&typeof U.then=="function"}e.isThenable=A;function L(U){const g=new R.CancellationTokenSource,v=U(g.token),O=new Promise((q,H)=>{const Z=g.token.onCancellationRequested(()=>{Z.dispose(),g.dispose(),H(new D.CancellationError)});Promise.resolve(v).then(ie=>{Z.dispose(),g.dispose(),q(ie)},ie=>{Z.dispose(),g.dispose(),H(ie)})});return new class{cancel(){g.cancel()}then(q,H){return O.then(q,H)}catch(q){return this.then(void 0,q)}finally(q){return O.finally(q)}}}e.createCancelablePromise=L;function N(U,g,v){return new Promise((O,q)=>{const H=g.onCancellationRequested(()=>{H.dispose(),O(v)});U.then(O,q).finally(()=>H.dispose())})}e.raceCancellation=N;function T(U,g){return new Promise((v,O)=>{const q=g.onCancellationRequested(()=>{q.dispose(),O(new D.CancellationError)});U.then(v,O).finally(()=>q.dispose())})}e.raceCancellationError=T;async function _(U){let g=-1;const v=U.map((q,H)=>q.then(Z=>(g=H,Z))),O=await Promise.race(v);return U.forEach((q,H)=>{H!==g&&q.cancel()}),O}e.raceCancellablePromises=_;function P(U,g,v){let O;const q=setTimeout(()=>{O?.(void 0),v?.()},g);return Promise.race([U.finally(()=>clearTimeout(q)),new Promise(H=>O=H)])}e.raceTimeout=P;function b(U){return new Promise((g,v)=>{const O=U();A(O)?O.then(g,v):g(O)})}e.asPromise=b;class c{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(g){if(this.activePromise){if(this.queuedPromiseFactory=g,!this.queuedPromise){const v=()=>{this.queuedPromise=null;const O=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,O};this.queuedPromise=new Promise(O=>{this.activePromise.then(v,v).then(O)})}return new Promise((v,O)=>{this.queuedPromise.then(v,O)})}return this.activePromise=g(),new Promise((v,O)=>{this.activePromise.then(q=>{this.activePromise=null,v(q)},q=>{this.activePromise=null,O(q)})})}}e.Throttler=c;class l{constructor(){this.current=Promise.resolve(null)}queue(g){return this.current=this.current.then(()=>g(),()=>g())}}e.Sequencer=l;class t{constructor(){this.promiseMap=new Map}queue(g,v){const q=(this.promiseMap.get(g)??Promise.resolve()).catch(()=>{}).then(v).finally(()=>{this.promiseMap.get(g)===q&&this.promiseMap.delete(g)});return this.promiseMap.set(g,q),q}}e.SequencerByKey=t;const s=(U,g)=>{let v=!0;const O=setTimeout(()=>{v=!1,g()},U);return{isTriggered:()=>v,dispose:()=>{clearTimeout(O),v=!1}}},i=U=>{let g=!0;return queueMicrotask(()=>{g&&(g=!1,U())}),{isTriggered:()=>g,dispose:()=>{g=!1}}};e.MicrotaskDelay=Symbol("MicrotaskDelay");class a{constructor(g){this.defaultDelay=g,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(g,v=this.defaultDelay){this.task=g,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((q,H)=>{this.doResolve=q,this.doReject=H}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const q=this.task;return this.task=null,q()}}));const O=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=v===e.MicrotaskDelay?i(O):s(v,O),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(new D.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}e.Delayer=a;class d{constructor(g){this.delayer=new a(g),this.throttler=new c}trigger(g,v){return this.delayer.trigger(()=>this.throttler.queue(g),v)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}e.ThrottledDelayer=d;class p{constructor(){this._isOpen=!1,this._promise=new Promise((g,v)=>{this._completePromise=g})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}e.Barrier=p;class y extends p{constructor(g){super();this._timeout=setTimeout(()=>this.open(),g)}open(){clearTimeout(this._timeout),super.open()}}e.AutoOpenBarrier=y;function w(U,g){return g?new Promise((v,O)=>{const q=setTimeout(()=>{H.dispose(),v()},U),H=g.onCancellationRequested(()=>{clearTimeout(q),H.dispose(),O(new D.CancellationError)})}):L(v=>w(U,v))}e.timeout=w;function h(U,g=0){const v=setTimeout(U,g);return(0,I.toDisposable)(()=>clearTimeout(v))}e.disposableTimeout=h;function o(U){const g=[];let v=0;const O=U.length;function q(){return v<O?U[v++]():null}function H(Z){Z!=null&&g.push(Z);const ie=q();return ie?ie.then(H):Promise.resolve(g)}return Promise.resolve(null).then(H)}e.sequence=o;function r(U,g=O=>!!O,v=null){let O=0;const q=U.length,H=()=>{if(O>=q)return Promise.resolve(v);const Z=U[O++];return Promise.resolve(Z()).then(re=>g(re)?Promise.resolve(re):H())};return H()}e.first=r;function u(U,g=O=>!!O,v=null){if(U.length===0)return Promise.resolve(v);let O=U.length;const q=()=>{O=-1;for(const H of U)H.cancel?.()};return new Promise((H,Z)=>{for(const ie of U)ie.then(re=>{--O>=0&&g(re)?(q(),H(re)):O===0&&H(v)}).catch(re=>{--O>=0&&(q(),Z(re))})})}e.firstParallel=u;class f{constructor(g){this._size=0,this.maxDegreeOfParalellism=g,this.outstandingPromises=[],this.runningPromises=0,this._onFinished=new B.Emitter}get onFinished(){return this._onFinished.event}get size(){return this._size}queue(g){return this._size++,new Promise((v,O)=>{this.outstandingPromises.push({factory:g,c:v,e:O}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const g=this.outstandingPromises.shift();this.runningPromises++;const v=g.factory();v.then(g.c,g.e),v.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onFinished.fire()}dispose(){this._onFinished.dispose()}}e.Limiter=f;class E extends f{constructor(){super(1)}}e.Queue=E;class S{constructor(){this.queues=new Map,this.drainers=new Set}async whenDrained(){if(this.isDrained())return;const g=new z;return this.drainers.add(g),g.p}isDrained(){for(const[,g]of this.queues)if(g.size>0)return!1;return!0}queueFor(g,v=k.extUri){const O=v.getComparisonKey(g);let q=this.queues.get(O);return q||(q=new E,B.Event.once(q.onFinished)(()=>{q?.dispose(),this.queues.delete(O),this.onDidQueueFinish()}),this.queues.set(O,q)),q}onDidQueueFinish(){!this.isDrained()||this.releaseDrainers()}releaseDrainers(){for(const g of this.drainers)g.complete();this.drainers.clear()}dispose(){for(const[,g]of this.queues)g.dispose();this.queues.clear(),this.releaseDrainers()}}e.ResourceQueue=S;class W{constructor(g,v){this._token=-1,typeof g=="function"&&typeof v=="number"&&this.setIfNotSet(g,v)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(g,v){this.cancel(),this._token=setTimeout(()=>{this._token=-1,g()},v)}setIfNotSet(g,v){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,g()},v))}}e.TimeoutTimer=W;class j{constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(g,v){this.cancel(),this._token=setInterval(()=>{g()},v)}}e.IntervalTimer=j;class M{constructor(g,v){this.timeoutToken=-1,this.runner=g,this.timeout=v,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(g=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,g)}get delay(){return this.timeout}set delay(g){this.timeout=g}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}e.RunOnceScheduler=M;class n{constructor(g,v){v%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${v}ms is not a multiple of 1000ms.`),this.runner=g,this.timeout=v,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(g=this.timeout){g%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${g}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(g/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner&&this.runner())}}e.ProcessTimeRunOnceScheduler=n;class m extends M{constructor(g,v){super(g,v);this.units=[]}work(g){this.units.push(g),this.isScheduled()||this.schedule()}doRun(){const g=this.units;this.units=[],this.runner&&this.runner(g)}dispose(){this.units=[],super.dispose()}}e.RunOnceWorker=m;class C extends I.Disposable{constructor(g,v){super();this.options=g,this.handler=v,this.pendingWork=[],this.throttler=this._register(new I.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(g){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+g.length>this.options.maxBufferedWork)return!1}else if(this.pending+g.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}return this.pendingWork.push(...g),this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new M(()=>{this.throttler.clear(),this.doWork()},this.options.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}e.ThrottledWorker=C,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=U=>{(0,F.setTimeout0)(()=>{if(g)return;const v=Date.now()+15;U(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,v-Date.now())}}))});let g=!1;return{dispose(){g||(g=!0)}}}:e.runWhenIdle=(U,g)=>{const v=requestIdleCallback(U,typeof g=="number"?{timeout:g}:void 0);let O=!1;return{dispose(){O||(O=!0,cancelIdleCallback(v))}}}}();class ${constructor(g){this._didRun=!1,this._executor=()=>{try{this._value=g()}catch(v){this._error=v}finally{this._didRun=!0}},this._handle=(0,e.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}e.IdleValue=$;async function Y(U,g,v){let O;for(let q=0;q<v;q++)try{return await U()}catch(H){O=H,await w(g)}throw O}e.retry=Y;class J{hasPending(g){return this._pending?typeof g=="number"?this._pending.taskId===g:!!this._pending:!1}get pending(){return this._pending?this._pending.promise:void 0}cancelPending(){this._pending?.cancel()}setPending(g,v,O){return this._pending={taskId:g,cancel:()=>O?.(),promise:v},v.then(()=>this.donePending(g),()=>this.donePending(g)),v}donePending(g){this._pending&&g===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const g=this._next;this._next=void 0,g.run().then(g.promiseResolve,g.promiseReject)}}setNext(g){if(this._next)this._next.run=g;else{let v,O;const q=new Promise((H,Z)=>{v=H,O=Z});this._next={run:g,promise:q,promiseResolve:v,promiseReject:O}}return this._next.promise}}e.TaskSequentializer=J;class ee{constructor(g,v=()=>Date.now()){this.interval=g,this.nowFn=v,this.lastIncrementTime=0,this.value=0}increment(){const g=this.nowFn();return g-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=g,this.value=0),this.value++,this.value}}e.IntervalCounter=ee;class z{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((g,v)=>{this.completeCallback=g,this.errorCallback=v})}get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}complete(g){return new Promise(v=>{this.completeCallback(g),this.resolved=!0,v()})}error(g){return new Promise(v=>{this.errorCallback(g),this.rejected=!0,v()})}cancel(){new Promise(g=>{this.errorCallback(new D.CancellationError),this.rejected=!0,g()})}}e.DeferredPromise=z;var K;(function(U){async function g(O){let q;const H=await Promise.all(O.map(Z=>Z.then(ie=>ie,ie=>{q||(q=ie)})));if(typeof q!="undefined")throw q;return H}U.settled=g;function v(O){return new Promise(async(q,H)=>{try{await O(q,H)}catch(Z){H(Z)}})}U.withAsyncBody=v})(K=e.Promises||(e.Promises={}));var V;(function(U){U[U.Initial=0]="Initial",U[U.DoneOK=1]="DoneOK",U[U.DoneError=2]="DoneError"})(V||(V={}));class x{constructor(g){this._state=0,this._results=[],this._error=null,this._onStateChanged=new B.Emitter,queueMicrotask(async()=>{const v={emitOne:O=>this.emitOne(O),emitMany:O=>this.emitMany(O),reject:O=>this.reject(O)};try{await Promise.resolve(g(v)),this.resolve()}catch(O){this.reject(O)}finally{v.emitOne=void 0,v.emitMany=void 0,v.reject=void 0}})}static fromArray(g){return new x(v=>{v.emitMany(g)})}static fromPromise(g){return new x(async v=>{v.emitMany(await g)})}static fromPromises(g){return new x(async v=>{await Promise.all(g.map(async O=>v.emitOne(await O)))})}static merge(g){return new x(async v=>{await Promise.all(g.map(async O=>{for await(const q of O)v.emitOne(q)}))})}[Symbol.asyncIterator](){let g=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(g<this._results.length)return{done:!1,value:this._results[g++]};if(this._state===1)return{done:!0,value:void 0};await B.Event.toPromise(this._onStateChanged.event)}while(!0)}}}static map(g,v){return new x(async O=>{for await(const q of g)O.emitOne(v(q))})}map(g){return x.map(this,g)}static filter(g,v){return new x(async O=>{for await(const q of g)v(q)&&O.emitOne(q)})}filter(g){return x.filter(this,g)}static coalesce(g){return x.filter(g,v=>!!v)}coalesce(){return x.coalesce(this)}static async toPromise(g){const v=[];for await(const O of g)v.push(O);return v}toPromise(){return x.toPromise(this)}emitOne(g){this._state===0&&(this._results.push(g),this._onStateChanged.fire())}emitMany(g){this._state===0&&(this._results=this._results.concat(g),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(g){this._state===0&&(this._state=2,this._error=g,this._onStateChanged.fire())}}e.AsyncIterableObject=x,x.EMPTY=x.fromArray([]);class G extends x{constructor(g,v){super(v);this._source=g}cancel(){this._source.cancel()}}e.CancelableAsyncIterableObject=G;function Q(U){const g=new R.CancellationTokenSource,v=U(g.token);return new G(g,async O=>{const q=g.token.onCancellationRequested(()=>{q.dispose(),g.dispose(),O.reject(new D.CancellationError)});try{for await(const H of v){if(g.token.isCancellationRequested)return;O.emitOne(H)}q.dispose(),g.dispose()}catch(H){q.dispose(),g.dispose(),O.reject(H)}})}e.createCancelableAsyncIterable=Q}),define(te[19],ne([0,1,17,7,15,4,3,2]),function(X,e,R,D,B,I,k,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.hasSiblingFn=e.hasSiblingPromiseFn=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function A(){return Object.create(null)}e.getEmptyExpression=A,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const L="[/\\\\]",N="[^/\\\\]",T=/\//g;function _(z){switch(z){case 0:return"";case 1:return`${N}*?`;default:return`(?:${L}|${N}+${L}|${L}${N}+)*?`}}function P(z,K){if(!z)return[];const V=[];let x=!1,G=!1,Q="";for(const U of z){switch(U){case K:if(!x&&!G){V.push(Q),Q="";continue}break;case"{":x=!0;break;case"}":x=!1;break;case"[":G=!0;break;case"]":G=!1;break}Q+=U}return Q&&V.push(Q),V}e.splitGlobAware=P;function b(z){if(!z)return"";let K="";const V=P(z,e.GLOB_SPLIT);if(V.every(x=>x===e.GLOBSTAR))K=".*";else{let x=!1;V.forEach((G,Q)=>{if(G===e.GLOBSTAR){x||(K+=_(2),x=!0);return}let U=!1,g="",v=!1,O="";for(const q of G){if(q!=="}"&&U){g+=q;continue}if(v&&(q!=="]"||!O)){let H;q==="-"?H=q:(q==="^"||q==="!")&&!O?H="^":q===e.GLOB_SPLIT?H="":H=(0,F.escapeRegExpCharacters)(q),O+=H;continue}switch(q){case"{":U=!0;continue;case"[":v=!0;continue;case"}":{K+=`(?:${P(g,",").map(ie=>b(ie)).join("|")})`,U=!1,g="";break}case"]":K+="["+O+"]",v=!1,O="";break;case"?":K+=N;continue;case"*":K+=_(1);continue;default:K+=(0,F.escapeRegExpCharacters)(q)}}Q<V.length-1&&(V[Q+1]!==e.GLOBSTAR||Q+2<V.length)&&(K+=L),x=!1})}return K}const c=/^\*\*\/\*\.[\w\.-]+$/,l=/^\*\*\/([\w\.-]+)\/?$/,t=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,s=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,i=/^\*\*((\/[\w\.-]+)+)\/?$/,a=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,d=new B.LRUCache(1e4),p=function(){return!1},y=function(){return null};function w(z,K){if(!z)return y;let V;typeof z!="string"?V=z.pattern:V=z,V=V.trim();const x=`${V}_${!!K.trimForExclusions}`;let G=d.get(x);if(G)return h(G,z);let Q;if(c.test(V)){const U=V.substr(4);G=function(g,v){return typeof g=="string"&&g.endsWith(U)?V:null}}else(Q=l.exec(o(V,K)))?G=r(Q[1],V):(K.trimForExclusions?s:t).test(V)?G=u(V,K):(Q=i.exec(o(V,K)))?G=f(Q[1].substr(1),V,!0):(Q=a.exec(o(V,K)))?G=f(Q[1],V,!1):G=E(V);return d.set(x,G),h(G,z)}function h(z,K){return typeof K=="string"?z:function(V,x){return(0,D.isEqualOrParent)(V,K.base,!k.isLinux)?z(V.substr(K.base.length+1),x):null}}function o(z,K){return K.trimForExclusions&&z.endsWith("/**")?z.substr(0,z.length-2):z}function r(z,K){const V=`/${z}`,x=`\\${z}`,G=function(U,g){return typeof U!="string"?null:g?g===z?K:null:U===z||U.endsWith(V)||U.endsWith(x)?K:null},Q=[z];return G.basenames=Q,G.patterns=[K],G.allBasenames=Q,G}function u(z,K){const V=ee(z.slice(1,-1).split(",").map(g=>w(g,K)).filter(g=>g!==y),z),x=V.length;if(!x)return y;if(x===1)return V[0];const G=function(g,v){for(let O=0,q=V.length;O<q;O++)if(V[O](g,v))return z;return null},Q=V.find(g=>!!g.allBasenames);Q&&(G.allBasenames=Q.allBasenames);const U=V.reduce((g,v)=>v.allPaths?g.concat(v.allPaths):g,[]);return U.length&&(G.allPaths=U),G}function f(z,K,V){const x=I.sep===I.posix.sep,G=x?z:z.replace(T,I.sep),Q=I.sep+G,U=I.posix.sep+z,g=V?function(v,O){return typeof v=="string"&&(v===G||v.endsWith(Q)||!x&&(v===z||v.endsWith(U)))?K:null}:function(v,O){return typeof v=="string"&&(v===G||!x&&v===z)?K:null};return g.allPaths=[(V?"*/":"./")+z],g}function E(z){try{const K=new RegExp(`^${b(z)}$`);return function(V){return K.lastIndex=0,typeof V=="string"&&K.test(V)?z:null}}catch{return y}}function S(z,K,V){return!z||typeof K!="string"?!1:W(z)(K,void 0,V)}e.match=S;function W(z,K={}){if(!z)return p;if(typeof z=="string"||m(z)){const V=w(z,K);if(V===y)return p;const x=function(G,Q){return!!V(G,Q)};return V.allBasenames&&(x.allBasenames=V.allBasenames),V.allPaths&&(x.allPaths=V.allPaths),x}return Y(z,K)}e.parse=W;function j(z){if(!z)return;let K;return V=>(K||(K=(z()||Promise.resolve([])).then(x=>x?n(x):{})),K.then(x=>!!x[V]))}e.hasSiblingPromiseFn=j;function M(z){if(!z)return;let K;return V=>{if(!K){const x=z();K=x?n(x):{}}return!!K[V]}}e.hasSiblingFn=M;function n(z){const K={};for(const V of z)K[V]=!0;return K}function m(z){const K=z;return K?typeof K.base=="string"&&typeof K.pattern=="string":!1}e.isRelativePattern=m;function C(z){return z.allBasenames||[]}e.getBasenameTerms=C;function $(z){return z.allPaths||[]}e.getPathTerms=$;function Y(z,K){const V=ee(Object.getOwnPropertyNames(z).map(g=>J(g,z[g],K)).filter(g=>g!==y)),x=V.length;if(!x)return y;if(!V.some(g=>!!g.requiresSiblings)){if(x===1)return V[0];const g=function(q,H){for(let Z=0,ie=V.length;Z<ie;Z++){const re=V[Z](q,H);if(re)return re}return null},v=V.find(q=>!!q.allBasenames);v&&(g.allBasenames=v.allBasenames);const O=V.reduce((q,H)=>H.allPaths?q.concat(H.allPaths):q,[]);return O.length&&(g.allPaths=O),g}const G=function(g,v,O){let q;for(let H=0,Z=V.length;H<Z;H++){const ie=V[H];ie.requiresSiblings&&O&&(v||(v=(0,I.basename)(g)),q||(q=v.substr(0,v.length-(0,I.extname)(g).length)));const re=ie(g,v,q,O);if(re)return re}return null},Q=V.find(g=>!!g.allBasenames);Q&&(G.allBasenames=Q.allBasenames);const U=V.reduce((g,v)=>v.allPaths?g.concat(v.allPaths):g,[]);return U.length&&(G.allPaths=U),G}function J(z,K,V){if(K===!1)return y;const x=w(z,V);if(x===y)return y;if(typeof K=="boolean")return x;if(K){const G=K.when;if(typeof G=="string"){const Q=(U,g,v,O)=>{if(!O||!x(U,g))return null;const q=G.replace("$(basename)",v),H=O(q);return(0,R.isThenable)(H)?H.then(Z=>Z?z:null):H?z:null};return Q.requiresSiblings=!0,Q}}return x}function ee(z,K){const V=z.filter(g=>!!g.basenames);if(V.length<2)return z;const x=V.reduce((g,v)=>{const O=v.basenames;return O?g.concat(O):g},[]);let G;if(K){G=[];for(let g=0,v=x.length;g<v;g++)G.push(K)}else G=V.reduce((g,v)=>{const O=v.patterns;return O?g.concat(O):g},[]);const Q=function(g,v){if(typeof g!="string")return null;if(!v){let q;for(q=g.length;q>0;q--){const H=g.charCodeAt(q-1);if(H===47||H===92)break}v=g.substr(q)}const O=x.indexOf(v);return O!==-1?G[O]:null};Q.basenames=x,Q.patterns=G,Q.allBasenames=x;const U=z.filter(g=>!g.basenames);return U.push(Q),U}}),define(te[20],ne([0,1]),function(X,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.countEOL=e.StringEOL=void 0;var R;(function(B){B[B.Unknown=0]="Unknown",B[B.Invalid=3]="Invalid",B[B.LF=1]="LF",B[B.CRLF=2]="CRLF"})(R=e.StringEOL||(e.StringEOL={}));function D(B){let I=0,k=0,F=0,A=0;for(let L=0,N=B.length;L<N;L++){const T=B.charCodeAt(L);T===13?(I===0&&(k=L),I++,L+1<N&&B.charCodeAt(L+1)===10?(A|=2,L++):A|=3,F=L+1):T===10&&(A|=1,I===0&&(k=L),I++,F=L+1)}return I===0&&(k=B.length),[I,k,B.length-F,A]}e.countEOL=D}),define(te[21],ne([0,1,2,3,6]),function(X,e,R,D,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUTF16LE=e.createStringBuilder=e.hasTextDecoder=e.getPlatformTextDecoder=void 0;let I;function k(){return I||(I=new TextDecoder("UTF-16LE")),I}let F;function A(){return F||(F=new TextDecoder("UTF-16BE")),F}let L;function N(){return L||(L=D.isLittleEndian()?k():A()),L}e.getPlatformTextDecoder=N,e.hasTextDecoder=typeof TextDecoder!="undefined",e.hasTextDecoder?(e.createStringBuilder=c=>new P(c),e.decodeUTF16LE=T):(e.createStringBuilder=c=>new b,e.decodeUTF16LE=_);function T(c,l,t){const s=new Uint16Array(c.buffer,l,t);return t>0&&(s[0]===65279||s[0]===65534)?_(c,l,t):k().decode(s)}function _(c,l,t){const s=[];let i=0;for(let a=0;a<t;a++){const d=B.readUInt16LE(c,l);l+=2,s[i++]=String.fromCharCode(d)}return s.join("")}class P{constructor(l){this._capacity=l|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const l=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return N().decode(l)}_flushBuffer(){const l=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[l]:this._completedStrings[this._completedStrings.length]=l}write1(l){const t=this._capacity-this._bufferLength;t<=1&&(t===0||R.isHighSurrogate(l))&&this._flushBuffer(),this._buffer[this._bufferLength++]=l}appendASCII(l){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=l}appendASCIIString(l){const t=l.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=l;return}for(let s=0;s<t;s++)this._buffer[this._bufferLength++]=l.charCodeAt(s)}}class b{constructor(){this._pieces=[],this._piecesLen=0}reset(){this._pieces=[],this._piecesLen=0}build(){return this._pieces.join("")}write1(l){this._pieces[this._piecesLen++]=String.fromCharCode(l)}appendASCII(l){this._pieces[this._piecesLen++]=String.fromCharCode(l)}appendASCIIString(l){this._pieces[this._piecesLen++]=l}}}),define(te[22],ne([0,1,6,21]),function(X,e,R,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compressConsecutiveTextChanges=e.TextChange=void 0;function B(A){return A.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class I{constructor(L,N,T,_){this.oldPosition=L,this.oldText=N,this.newPosition=T,this.newText=_}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${B(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${B(this.oldText)}")`:`(replace@${this.oldPosition} "${B(this.oldText)}" with "${B(this.newText)}")`}static _writeStringSize(L){return 4+2*L.length}static _writeString(L,N,T){const _=N.length;R.writeUInt32BE(L,_,T),T+=4;for(let P=0;P<_;P++)R.writeUInt16LE(L,N.charCodeAt(P),T),T+=2;return T}static _readString(L,N){const T=R.readUInt32BE(L,N);return N+=4,(0,D.decodeUTF16LE)(L,N,T)}writeSize(){return 4+4+I._writeStringSize(this.oldText)+I._writeStringSize(this.newText)}write(L,N){return R.writeUInt32BE(L,this.oldPosition,N),N+=4,R.writeUInt32BE(L,this.newPosition,N),N+=4,N=I._writeString(L,this.oldText,N),N=I._writeString(L,this.newText,N),N}static read(L,N,T){const _=R.readUInt32BE(L,N);N+=4;const P=R.readUInt32BE(L,N);N+=4;const b=I._readString(L,N);N+=I._writeStringSize(b);const c=I._readString(L,N);return N+=I._writeStringSize(c),T.push(new I(_,b,P,c)),N}}e.TextChange=I;function k(A,L){return A===null||A.length===0?L:new F(A,L).compress()}e.compressConsecutiveTextChanges=k;class F{constructor(L,N){this._prevEdits=L,this._currEdits=N,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let L=0,N=0,T=this._getPrev(L),_=this._getCurr(N);for(;L<this._prevLen||N<this._currLen;){if(T===null){this._acceptCurr(_),_=this._getCurr(++N);continue}if(_===null){this._acceptPrev(T),T=this._getPrev(++L);continue}if(_.oldEnd<=T.newPosition){this._acceptCurr(_),_=this._getCurr(++N);continue}if(T.newEnd<=_.oldPosition){this._acceptPrev(T),T=this._getPrev(++L);continue}if(_.oldPosition<T.newPosition){const[t,s]=F._splitCurr(_,T.newPosition-_.oldPosition);this._acceptCurr(t),_=s;continue}if(T.newPosition<_.oldPosition){const[t,s]=F._splitPrev(T,_.oldPosition-T.newPosition);this._acceptPrev(t),T=s;continue}let c,l;if(_.oldEnd===T.newEnd)c=T,l=_,T=this._getPrev(++L),_=this._getCurr(++N);else if(_.oldEnd<T.newEnd){const[t,s]=F._splitPrev(T,_.oldLength);c=t,l=_,T=s,_=this._getCurr(++N)}else{const[t,s]=F._splitCurr(_,T.newLength);c=T,l=t,T=this._getPrev(++L),_=s}this._result[this._resultLen++]=new I(c.oldPosition,c.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=c.newLength-c.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const P=F._merge(this._result);return F._removeNoOps(P)}_acceptCurr(L){this._result[this._resultLen++]=F._rebaseCurr(this._prevDeltaOffset,L),this._currDeltaOffset+=L.newLength-L.oldLength}_getCurr(L){return L<this._currLen?this._currEdits[L]:null}_acceptPrev(L){this._result[this._resultLen++]=F._rebasePrev(this._currDeltaOffset,L),this._prevDeltaOffset+=L.newLength-L.oldLength}_getPrev(L){return L<this._prevLen?this._prevEdits[L]:null}static _rebaseCurr(L,N){return new I(N.oldPosition-L,N.oldText,N.newPosition,N.newText)}static _rebasePrev(L,N){return new I(N.oldPosition,N.oldText,N.newPosition+L,N.newText)}static _splitPrev(L,N){const T=L.newText.substr(0,N),_=L.newText.substr(N);return[new I(L.oldPosition,L.oldText,L.newPosition,T),new I(L.oldEnd,"",L.newPosition+N,_)]}static _splitCurr(L,N){const T=L.oldText.substr(0,N),_=L.oldText.substr(N);return[new I(L.oldPosition,T,L.newPosition,L.newText),new I(L.oldPosition+N,_,L.newEnd,"")]}static _merge(L){if(L.length===0)return L;const N=[];let T=0,_=L[0];for(let P=1;P<L.length;P++){const b=L[P];_.oldEnd===b.oldPosition?_=new I(_.oldPosition,_.oldText+b.oldText,_.newPosition,_.newText+b.newText):(N[T++]=_,_=b)}return N[T++]=_,N}static _removeNoOps(L){if(L.length===0)return L;const N=[];let T=0;for(let _=0;_<L.length;_++){const P=L[_];P.oldText!==P.newText&&(N[T++]=P)}return N}}}),define(te[23],ne([0,1]),function(X,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.recomputeTreeMetadata=e.updateTreeMetadata=e.fixInsert=e.rbDelete=e.rightRotate=e.leftRotate=e.resetSentinel=e.calculateLF=e.calculateSize=e.righttest=e.leftest=e.SENTINEL=e.NodeColor=e.TreeNode=void 0;class R{constructor(l,t){this.piece=l,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==e.SENTINEL)return B(this.right);let l=this;for(;l.parent!==e.SENTINEL&&l.parent.left!==l;)l=l.parent;return l.parent===e.SENTINEL?e.SENTINEL:l.parent}prev(){if(this.left!==e.SENTINEL)return I(this.left);let l=this;for(;l.parent!==e.SENTINEL&&l.parent.right!==l;)l=l.parent;return l.parent===e.SENTINEL?e.SENTINEL:l.parent}detach(){this.parent=null,this.left=null,this.right=null}}e.TreeNode=R;var D;(function(c){c[c.Black=0]="Black",c[c.Red=1]="Red"})(D=e.NodeColor||(e.NodeColor={})),e.SENTINEL=new R(null,0),e.SENTINEL.parent=e.SENTINEL,e.SENTINEL.left=e.SENTINEL,e.SENTINEL.right=e.SENTINEL,e.SENTINEL.color=0;function B(c){for(;c.left!==e.SENTINEL;)c=c.left;return c}e.leftest=B;function I(c){for(;c.right!==e.SENTINEL;)c=c.right;return c}e.righttest=I;function k(c){return c===e.SENTINEL?0:c.size_left+c.piece.length+k(c.right)}e.calculateSize=k;function F(c){return c===e.SENTINEL?0:c.lf_left+c.piece.lineFeedCnt+F(c.right)}e.calculateLF=F;function A(){e.SENTINEL.parent=e.SENTINEL}e.resetSentinel=A;function L(c,l){const t=l.right;t.size_left+=l.size_left+(l.piece?l.piece.length:0),t.lf_left+=l.lf_left+(l.piece?l.piece.lineFeedCnt:0),l.right=t.left,t.left!==e.SENTINEL&&(t.left.parent=l),t.parent=l.parent,l.parent===e.SENTINEL?c.root=t:l.parent.left===l?l.parent.left=t:l.parent.right=t,t.left=l,l.parent=t}e.leftRotate=L;function N(c,l){const t=l.left;l.left=t.right,t.right!==e.SENTINEL&&(t.right.parent=l),t.parent=l.parent,l.size_left-=t.size_left+(t.piece?t.piece.length:0),l.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),l.parent===e.SENTINEL?c.root=t:l===l.parent.right?l.parent.right=t:l.parent.left=t,t.right=l,l.parent=t}e.rightRotate=N;function T(c,l){let t,s;if(l.left===e.SENTINEL?(s=l,t=s.right):l.right===e.SENTINEL?(s=l,t=s.left):(s=B(l.right),t=s.right),s===c.root){c.root=t,t.color=0,l.detach(),A(),c.root.parent=e.SENTINEL;return}const i=s.color===1;if(s===s.parent.left?s.parent.left=t:s.parent.right=t,s===l?(t.parent=s.parent,b(c,t)):(s.parent===l?t.parent=s:t.parent=s.parent,b(c,t),s.left=l.left,s.right=l.right,s.parent=l.parent,s.color=l.color,l===c.root?c.root=s:l===l.parent.left?l.parent.left=s:l.parent.right=s,s.left!==e.SENTINEL&&(s.left.parent=s),s.right!==e.SENTINEL&&(s.right.parent=s),s.size_left=l.size_left,s.lf_left=l.lf_left,b(c,s)),l.detach(),t.parent.left===t){const d=k(t),p=F(t);if(d!==t.parent.size_left||p!==t.parent.lf_left){const y=d-t.parent.size_left,w=p-t.parent.lf_left;t.parent.size_left=d,t.parent.lf_left=p,P(c,t.parent,y,w)}}if(b(c,t.parent),i){A();return}let a;for(;t!==c.root&&t.color===0;)t===t.parent.left?(a=t.parent.right,a.color===1&&(a.color=0,t.parent.color=1,L(c,t.parent),a=t.parent.right),a.left.color===0&&a.right.color===0?(a.color=1,t=t.parent):(a.right.color===0&&(a.left.color=0,a.color=1,N(c,a),a=t.parent.right),a.color=t.parent.color,t.parent.color=0,a.right.color=0,L(c,t.parent),t=c.root)):(a=t.parent.left,a.color===1&&(a.color=0,t.parent.color=1,N(c,t.parent),a=t.parent.left),a.left.color===0&&a.right.color===0?(a.color=1,t=t.parent):(a.left.color===0&&(a.right.color=0,a.color=1,L(c,a),a=t.parent.left),a.color=t.parent.color,t.parent.color=0,a.left.color=0,N(c,t.parent),t=c.root));t.color=0,A()}e.rbDelete=T;function _(c,l){for(b(c,l);l!==c.root&&l.parent.color===1;)if(l.parent===l.parent.parent.left){const t=l.parent.parent.right;t.color===1?(l.parent.color=0,t.color=0,l.parent.parent.color=1,l=l.parent.parent):(l===l.parent.right&&(l=l.parent,L(c,l)),l.parent.color=0,l.parent.parent.color=1,N(c,l.parent.parent))}else{const t=l.parent.parent.left;t.color===1?(l.parent.color=0,t.color=0,l.parent.parent.color=1,l=l.parent.parent):(l===l.parent.left&&(l=l.parent,N(c,l)),l.parent.color=0,l.parent.parent.color=1,L(c,l.parent.parent))}c.root.color=0}e.fixInsert=_;function P(c,l,t,s){for(;l!==c.root&&l!==e.SENTINEL;)l.parent.left===l&&(l.parent.size_left+=t,l.parent.lf_left+=s),l=l.parent}e.updateTreeMetadata=P;function b(c,l){let t=0,s=0;if(l!==c.root){for(;l!==c.root&&l===l.parent.right;)l=l.parent;if(l!==c.root)for(l=l.parent,t=k(l.left)-l.size_left,s=F(l.left)-l.lf_left,l.size_left+=t,l.lf_left+=s;l!==c.root&&(t!==0||s!==0);)l.parent.left===l&&(l.parent.size_left+=t,l.parent.lf_left+=s),l=l.parent}}e.recomputeTreeMetadata=b}),define(te[10],ne([0,1,33,11,24,23,34]),function(X,e,R,D,B,I,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeBase=e.StringBuffer=e.Piece=e.createLineStarts=e.createLineStartsFast=e.LineStarts=e.createUintArray=e.AverageBufferSize=void 0,e.AverageBufferSize=65535;function F(l){let t;return l[l.length-1]<65536?t=new Uint16Array(l.length):t=new Uint32Array(l.length),t.set(l,0),t}e.createUintArray=F;class A{constructor(t,s,i,a,d){this.lineStarts=t,this.cr=s,this.lf=i,this.crlf=a,this.isBasicASCII=d}}e.LineStarts=A;function L(l,t=!0){const s=[0];let i=1;for(let a=0,d=l.length;a<d;a++){const p=l.charCodeAt(a);p===13?a+1<d&&l.charCodeAt(a+1)===10?(s[i++]=a+2,a++):s[i++]=a+1:p===10&&(s[i++]=a+1)}return t?F(s):s}e.createLineStartsFast=L;function N(l,t){l.length=0,l[0]=0;let s=1,i=0,a=0,d=0,p=!0;for(let w=0,h=t.length;w<h;w++){const o=t.charCodeAt(w);o===13?w+1<h&&t.charCodeAt(w+1)===10?(d++,l[s++]=w+2,w++):(i++,l[s++]=w+1):o===10?(a++,l[s++]=w+1):p&&o!==9&&(o<32||o>126)&&(p=!1)}const y=new A(F(l),i,a,d,p);return l.length=0,y}e.createLineStarts=N;class T{constructor(t,s,i,a,d){this.bufferIndex=t,this.start=s,this.end=i,this.lineFeedCnt=a,this.length=d}}e.Piece=T;class _{constructor(t,s){this.buffer=t,this.lineStarts=s}}e.StringBuffer=_;class P{constructor(t,s){this._pieces=[],this._tree=t,this._BOM=s,this._index=0,t.root!==I.SENTINEL&&t.iterate(t.root,i=>(i!==I.SENTINEL&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class b{constructor(t){this._limit=t,this._cache=[]}get(t){for(let s=this._cache.length-1;s>=0;s--){const i=this._cache[s];if(i.nodeStartOffset<=t&&i.nodeStartOffset+i.node.piece.length>=t)return i}return null}get2(t){for(let s=this._cache.length-1;s>=0;s--){const i=this._cache[s];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<t&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=t)return i}return null}set(t){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(t)}validate(t){let s=!1;const i=this._cache;for(let a=0;a<i.length;a++){const d=i[a];if(d.node.parent===null||d.nodeStartOffset>=t){i[a]=null,s=!0;continue}}if(s){const a=[];for(const d of i)d!==null&&a.push(d);this._cache=a}}}class c{constructor(t,s,i){this.create(t,s,i)}create(t,s,i){this._buffers=[new _("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=I.SENTINEL,this._lineCnt=1,this._length=0,this._EOL=s,this._EOLLength=s.length,this._EOLNormalized=i;let a=null;for(let d=0,p=t.length;d<p;d++)if(t[d].buffer.length>0){t[d].lineStarts||(t[d].lineStarts=L(t[d].buffer));const y=new T(d+1,{line:0,column:0},{line:t[d].lineStarts.length-1,column:t[d].buffer.length-t[d].lineStarts[t[d].lineStarts.length-1]},t[d].lineStarts.length-1,t[d].buffer.length);this._buffers.push(t[d]),a=this.rbInsertRight(a,y)}this._searchCache=new b(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(t){const s=e.AverageBufferSize,i=s-Math.floor(s/3),a=i*2;let d="",p=0;const y=[];if(this.iterate(this.root,w=>{const h=this.getNodeContent(w),o=h.length;if(p<=i||p+o<a)return d+=h,p+=o,!0;const r=d.replace(/\r\n|\r|\n/g,t);return y.push(new _(r,L(r))),d=h,p=o,!0}),p>0){const w=d.replace(/\r\n|\r|\n/g,t);y.push(new _(w,L(w)))}this.create(y,t,!0)}getEOL(){return this._EOL}setEOL(t){this._EOL=t,this._EOLLength=this._EOL.length,this.normalizeEOL(t)}createSnapshot(t){return new P(this,t)}equal(t){if(this.getLength()!==t.getLength()||this.getLineCount()!==t.getLineCount())return!1;const s=0;return this.iterate(this.root,a=>{if(a===I.SENTINEL)return!0;const d=this.getNodeContent(a),p=d.length,y=t.nodeAt(s),w=t.nodeAt(s+p),h=t.getValueInRange2(y,w);return d===h})}getOffsetAt(t,s){let i=0,a=this.root;for(;a!==I.SENTINEL;)if(a.left!==I.SENTINEL&&a.lf_left+1>=t)a=a.left;else{if(a.lf_left+a.piece.lineFeedCnt+1>=t)return i+=a.size_left,i+=this.getAccumulatedValue(a,t-a.lf_left-2)+s-1;t-=a.lf_left+a.piece.lineFeedCnt,i+=a.size_left+a.piece.length,a=a.right}return i}getPositionAt(t){t=Math.floor(t),t=Math.max(0,t);let s=this.root,i=0;const a=t;for(;s!==I.SENTINEL;)if(s.size_left!==0&&s.size_left>=t)s=s.left;else if(s.size_left+s.piece.length>=t){const d=this.getIndexOf(s,t-s.size_left);if(i+=s.lf_left+d.index,d.index===0){const p=this.getOffsetAt(i+1,1),y=a-p;return new R.Position(i+1,y+1)}return new R.Position(i+1,d.remainder+1)}else if(t-=s.size_left+s.piece.length,i+=s.lf_left+s.piece.lineFeedCnt,s.right===I.SENTINEL){const d=this.getOffsetAt(i+1,1),p=a-t-d;return new R.Position(i+1,p+1)}else s=s.right;return new R.Position(1,1)}getValueInRange(t,s){if(t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn)return"";const i=this.nodeAt2(t.startLineNumber,t.startColumn),a=this.nodeAt2(t.endLineNumber,t.endColumn),d=this.getValueInRange2(i,a);return s?s!==this._EOL||!this._EOLNormalized?d.replace(/\r\n|\r|\n/g,s):s===this.getEOL()&&this._EOLNormalized?d:d.replace(/\r\n|\r|\n/g,s):d}getValueInRange2(t,s){if(t.node===s.node){const y=t.node,w=this._buffers[y.piece.bufferIndex].buffer,h=this.offsetInBuffer(y.piece.bufferIndex,y.piece.start);return w.substring(h+t.remainder,h+s.remainder)}let i=t.node;const a=this._buffers[i.piece.bufferIndex].buffer,d=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let p=a.substring(d+t.remainder,d+i.piece.length);for(i=i.next();i!==I.SENTINEL;){const y=this._buffers[i.piece.bufferIndex].buffer,w=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===s.node){p+=y.substring(w,w+s.remainder);break}else p+=y.substr(w,i.piece.length);i=i.next()}return p}getLinesContent(){const t=[];let s=0,i="",a=!1;return this.iterate(this.root,d=>{if(d===I.SENTINEL)return!0;const p=d.piece;let y=p.length;if(y===0)return!0;const w=this._buffers[p.bufferIndex].buffer,h=this._buffers[p.bufferIndex].lineStarts,o=p.start.line,r=p.end.line;let u=h[o]+p.start.column;if(a&&(w.charCodeAt(u)===10&&(u++,y--),t[s++]=i,i="",a=!1,y===0))return!0;if(o===r)return!this._EOLNormalized&&w.charCodeAt(u+y-1)===13?(a=!0,i+=w.substr(u,y-1)):i+=w.substr(u,y),!0;i+=this._EOLNormalized?w.substring(u,Math.max(u,h[o+1]-this._EOLLength)):w.substring(u,h[o+1]).replace(/(\r\n|\r|\n)$/,""),t[s++]=i;for(let f=o+1;f<r;f++)i=this._EOLNormalized?w.substring(h[f],h[f+1]-this._EOLLength):w.substring(h[f],h[f+1]).replace(/(\r\n|\r|\n)$/,""),t[s++]=i;return!this._EOLNormalized&&w.charCodeAt(h[r]+p.end.column-1)===13?(a=!0,p.end.column===0?s--:i=w.substr(h[r],p.end.column-1)):i=w.substr(h[r],p.end.column),!0}),a&&(t[s++]=i,i=""),t[s++]=i,t}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(t){return this._lastVisitedLine.lineNumber===t?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=t,t===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(t):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(t,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(t).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(t){if(t.remainder===t.node.piece.length){const s=t.node.next();if(!s)return 0;const i=this._buffers[s.piece.bufferIndex],a=this.offsetInBuffer(s.piece.bufferIndex,s.piece.start);return i.buffer.charCodeAt(a)}else{const s=this._buffers[t.node.piece.bufferIndex],a=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start)+t.remainder;return s.buffer.charCodeAt(a)}}getLineCharCode(t,s){const i=this.nodeAt2(t,s+1);return this._getCharCode(i)}getLineLength(t){if(t===this.getLineCount()){const s=this.getOffsetAt(t,1);return this.getLength()-s}return this.getOffsetAt(t+1,1)-this.getOffsetAt(t,1)-this._EOLLength}getCharCode(t){const s=this.nodeAt(t);return this._getCharCode(s)}findMatchesInNode(t,s,i,a,d,p,y,w,h,o,r){const u=this._buffers[t.piece.bufferIndex],f=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start),E=this.offsetInBuffer(t.piece.bufferIndex,d),S=this.offsetInBuffer(t.piece.bufferIndex,p);let W;const j={line:0,column:0};let M,n;s._wordSeparators?(M=u.buffer.substring(E,S),n=m=>m+E,s.reset(0)):(M=u.buffer,n=m=>m,s.reset(E));do if(W=s.next(M),W){if(n(W.index)>=S)return o;this.positionInBuffer(t,n(W.index)-f,j);const m=this.getLineFeedCnt(t.piece.bufferIndex,d,j),C=j.line===d.line?j.column-d.column+a:j.column+1,$=C+W[0].length;if(r[o++]=(0,k.createFindMatch)(new D.Range(i+m,C,i+m,$),W,w),n(W.index)+W[0].length>=S||o>=h)return o}while(W);return o}findMatchesLineByLine(t,s,i,a){const d=[];let p=0;const y=new k.Searcher(s.wordSeparators,s.regex);let w=this.nodeAt2(t.startLineNumber,t.startColumn);if(w===null)return[];const h=this.nodeAt2(t.endLineNumber,t.endColumn);if(h===null)return[];let o=this.positionInBuffer(w.node,w.remainder);const r=this.positionInBuffer(h.node,h.remainder);if(w.node===h.node)return this.findMatchesInNode(w.node,y,t.startLineNumber,t.startColumn,o,r,s,i,a,p,d),d;let u=t.startLineNumber,f=w.node;for(;f!==h.node;){const S=this.getLineFeedCnt(f.piece.bufferIndex,o,f.piece.end);if(S>=1){const j=this._buffers[f.piece.bufferIndex].lineStarts,M=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),n=j[o.line+S],m=u===t.startLineNumber?t.startColumn:1;if(p=this.findMatchesInNode(f,y,u,m,o,this.positionInBuffer(f,n-M),s,i,a,p,d),p>=a)return d;u+=S}const W=u===t.startLineNumber?t.startColumn-1:0;if(u===t.endLineNumber){const j=this.getLineContent(u).substring(W,t.endColumn-1);return p=this._findMatchesInLine(s,y,j,t.endLineNumber,W,p,d,i,a),d}if(p=this._findMatchesInLine(s,y,this.getLineContent(u).substr(W),u,W,p,d,i,a),p>=a)return d;u++,w=this.nodeAt2(u,1),f=w.node,o=this.positionInBuffer(w.node,w.remainder)}if(u===t.endLineNumber){const S=u===t.startLineNumber?t.startColumn-1:0,W=this.getLineContent(u).substring(S,t.endColumn-1);return p=this._findMatchesInLine(s,y,W,t.endLineNumber,S,p,d,i,a),d}const E=u===t.startLineNumber?t.startColumn:1;return p=this.findMatchesInNode(h.node,y,u,E,o,r,s,i,a,p,d),d}_findMatchesInLine(t,s,i,a,d,p,y,w,h){const o=t.wordSeparators;if(!w&&t.simpleSearch){const u=t.simpleSearch,f=u.length,E=i.length;let S=-f;for(;(S=i.indexOf(u,S+f))!==-1;)if((!o||(0,k.isValidMatch)(o,i,E,S,f))&&(y[p++]=new B.FindMatch(new D.Range(a,S+1+d,a,S+1+f+d),null),p>=h))return p;return p}let r;s.reset(0);do if(r=s.next(i),r&&(y[p++]=(0,k.createFindMatch)(new D.Range(a,r.index+1+d,a,r.index+1+r[0].length+d),r,w),p>=h))return p;while(r);return p}insert(t,s,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==I.SENTINEL){const{node:a,remainder:d,nodeStartOffset:p}=this.nodeAt(t),y=a.piece,w=y.bufferIndex,h=this.positionInBuffer(a,d);if(a.piece.bufferIndex===0&&y.end.line===this._lastChangeBufferPos.line&&y.end.column===this._lastChangeBufferPos.column&&p+y.length===t&&s.length<e.AverageBufferSize){this.appendToNode(a,s),this.computeBufferMetadata();return}if(p===t)this.insertContentToNodeLeft(s,a),this._searchCache.validate(t);else if(p+a.piece.length>t){const o=[];let r=new T(y.bufferIndex,h,y.end,this.getLineFeedCnt(y.bufferIndex,h,y.end),this.offsetInBuffer(w,y.end)-this.offsetInBuffer(w,h));if(this.shouldCheckCRLF()&&this.endWithCR(s)&&this.nodeCharCodeAt(a,d)===10){const S={line:r.start.line+1,column:0};r=new T(r.bufferIndex,S,r.end,this.getLineFeedCnt(r.bufferIndex,S,r.end),r.length-1),s+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(s))if(this.nodeCharCodeAt(a,d-1)===13){const S=this.positionInBuffer(a,d-1);this.deleteNodeTail(a,S),s="\r"+s,a.piece.length===0&&o.push(a)}else this.deleteNodeTail(a,h);else this.deleteNodeTail(a,h);const u=this.createNewPieces(s);r.length>0&&this.rbInsertRight(a,r);let f=a;for(let E=0;E<u.length;E++)f=this.rbInsertRight(f,u[E]);this.deleteNodes(o)}else this.insertContentToNodeRight(s,a)}else{const a=this.createNewPieces(s);let d=this.rbInsertLeft(null,a[0]);for(let p=1;p<a.length;p++)d=this.rbInsertRight(d,a[p])}this.computeBufferMetadata()}delete(t,s){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",s<=0||this.root===I.SENTINEL)return;const i=this.nodeAt(t),a=this.nodeAt(t+s),d=i.node,p=a.node;if(d===p){const u=this.positionInBuffer(d,i.remainder),f=this.positionInBuffer(d,a.remainder);if(i.nodeStartOffset===t){if(s===d.piece.length){const E=d.next();(0,I.rbDelete)(this,d),this.validateCRLFWithPrevNode(E),this.computeBufferMetadata();return}this.deleteNodeHead(d,f),this._searchCache.validate(t),this.validateCRLFWithPrevNode(d),this.computeBufferMetadata();return}if(i.nodeStartOffset+d.piece.length===t+s){this.deleteNodeTail(d,u),this.validateCRLFWithNextNode(d),this.computeBufferMetadata();return}this.shrinkNode(d,u,f),this.computeBufferMetadata();return}const y=[],w=this.positionInBuffer(d,i.remainder);this.deleteNodeTail(d,w),this._searchCache.validate(t),d.piece.length===0&&y.push(d);const h=this.positionInBuffer(p,a.remainder);this.deleteNodeHead(p,h),p.piece.length===0&&y.push(p);const o=d.next();for(let u=o;u!==I.SENTINEL&&u!==p;u=u.next())y.push(u);const r=d.piece.length===0?d.prev():d;this.deleteNodes(y),this.validateCRLFWithNextNode(r),this.computeBufferMetadata()}insertContentToNodeLeft(t,s){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.startWithLF(s)){const p=s.piece,y={line:p.start.line+1,column:0},w=new T(p.bufferIndex,y,p.end,this.getLineFeedCnt(p.bufferIndex,y,p.end),p.length-1);s.piece=w,t+=`
`,(0,I.updateTreeMetadata)(this,s,-1,-1),s.piece.length===0&&i.push(s)}const a=this.createNewPieces(t);let d=this.rbInsertLeft(s,a[a.length-1]);for(let p=a.length-2;p>=0;p--)d=this.rbInsertLeft(d,a[p]);this.validateCRLFWithPrevNode(d),this.deleteNodes(i)}insertContentToNodeRight(t,s){this.adjustCarriageReturnFromNext(t,s)&&(t+=`
`);const i=this.createNewPieces(t),a=this.rbInsertRight(s,i[0]);let d=a;for(let p=1;p<i.length;p++)d=this.rbInsertRight(d,i[p]);this.validateCRLFWithPrevNode(a)}positionInBuffer(t,s,i){const a=t.piece,d=t.piece.bufferIndex,p=this._buffers[d].lineStarts,w=p[a.start.line]+a.start.column+s;let h=a.start.line,o=a.end.line,r=0,u=0,f=0;for(;h<=o&&(r=h+(o-h)/2|0,f=p[r],r!==o);)if(u=p[r+1],w<f)o=r-1;else if(w>=u)h=r+1;else break;return i?(i.line=r,i.column=w-f,null):{line:r,column:w-f}}getLineFeedCnt(t,s,i){if(i.column===0)return i.line-s.line;const a=this._buffers[t].lineStarts;if(i.line===a.length-1)return i.line-s.line;const d=a[i.line+1],p=a[i.line]+i.column;if(d>p+1)return i.line-s.line;const y=p-1;return this._buffers[t].buffer.charCodeAt(y)===13?i.line-s.line+1:i.line-s.line}offsetInBuffer(t,s){return this._buffers[t].lineStarts[s.line]+s.column}deleteNodes(t){for(let s=0;s<t.length;s++)(0,I.rbDelete)(this,t[s])}createNewPieces(t){if(t.length>e.AverageBufferSize){const o=[];for(;t.length>e.AverageBufferSize;){const u=t.charCodeAt(e.AverageBufferSize-1);let f;u===13||u>=55296&&u<=56319?(f=t.substring(0,e.AverageBufferSize-1),t=t.substring(e.AverageBufferSize-1)):(f=t.substring(0,e.AverageBufferSize),t=t.substring(e.AverageBufferSize));const E=L(f);o.push(new T(this._buffers.length,{line:0,column:0},{line:E.length-1,column:f.length-E[E.length-1]},E.length-1,f.length)),this._buffers.push(new _(f,E))}const r=L(t);return o.push(new T(this._buffers.length,{line:0,column:0},{line:r.length-1,column:t.length-r[r.length-1]},r.length-1,t.length)),this._buffers.push(new _(t,r)),o}let s=this._buffers[0].buffer.length;const i=L(t,!1);let a=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===s&&s!==0&&this.startWithLF(t)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},a=this._lastChangeBufferPos;for(let o=0;o<i.length;o++)i[o]+=s+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+t,s+=1}else{if(s!==0)for(let o=0;o<i.length;o++)i[o]+=s;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=t}const d=this._buffers[0].buffer.length,p=this._buffers[0].lineStarts.length-1,y=d-this._buffers[0].lineStarts[p],w={line:p,column:y},h=new T(0,a,w,this.getLineFeedCnt(0,a,w),d-s);return this._lastChangeBufferPos=w,[h]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(t,s=0){let i=this.root,a="";const d=this._searchCache.get2(t);if(d){i=d.node;const p=this.getAccumulatedValue(i,t-d.nodeStartLineNumber-1),y=this._buffers[i.piece.bufferIndex].buffer,w=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(d.nodeStartLineNumber+i.piece.lineFeedCnt===t)a=y.substring(w+p,w+i.piece.length);else{const h=this.getAccumulatedValue(i,t-d.nodeStartLineNumber);return y.substring(w+p,w+h-s)}}else{let p=0;const y=t;for(;i!==I.SENTINEL;)if(i.left!==I.SENTINEL&&i.lf_left>=t-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>t-1){const w=this.getAccumulatedValue(i,t-i.lf_left-2),h=this.getAccumulatedValue(i,t-i.lf_left-1),o=this._buffers[i.piece.bufferIndex].buffer,r=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return p+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:p,nodeStartLineNumber:y-(t-1-i.lf_left)}),o.substring(r+w,r+h-s)}else if(i.lf_left+i.piece.lineFeedCnt===t-1){const w=this.getAccumulatedValue(i,t-i.lf_left-2),h=this._buffers[i.piece.bufferIndex].buffer,o=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);a=h.substring(o+w,o+i.piece.length);break}else t-=i.lf_left+i.piece.lineFeedCnt,p+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==I.SENTINEL;){const p=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const y=this.getAccumulatedValue(i,0),w=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return a+=p.substring(w,w+y-s),a}else{const y=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);a+=p.substr(y,i.piece.length)}i=i.next()}return a}computeBufferMetadata(){let t=this.root,s=1,i=0;for(;t!==I.SENTINEL;)s+=t.lf_left+t.piece.lineFeedCnt,i+=t.size_left+t.piece.length,t=t.right;this._lineCnt=s,this._length=i,this._searchCache.validate(this._length)}getIndexOf(t,s){const i=t.piece,a=this.positionInBuffer(t,s),d=a.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===s){const p=this.getLineFeedCnt(t.piece.bufferIndex,i.start,a);if(p!==d)return{index:p,remainder:0}}return{index:d,remainder:a.column}}getAccumulatedValue(t,s){if(s<0)return 0;const i=t.piece,a=this._buffers[i.bufferIndex].lineStarts,d=i.start.line+s+1;return d>i.end.line?a[i.end.line]+i.end.column-a[i.start.line]-i.start.column:a[d]-a[i.start.line]-i.start.column}deleteNodeTail(t,s){const i=t.piece,a=i.lineFeedCnt,d=this.offsetInBuffer(i.bufferIndex,i.end),p=s,y=this.offsetInBuffer(i.bufferIndex,p),w=this.getLineFeedCnt(i.bufferIndex,i.start,p),h=w-a,o=y-d,r=i.length+o;t.piece=new T(i.bufferIndex,i.start,p,w,r),(0,I.updateTreeMetadata)(this,t,o,h)}deleteNodeHead(t,s){const i=t.piece,a=i.lineFeedCnt,d=this.offsetInBuffer(i.bufferIndex,i.start),p=s,y=this.getLineFeedCnt(i.bufferIndex,p,i.end),w=this.offsetInBuffer(i.bufferIndex,p),h=y-a,o=d-w,r=i.length+o;t.piece=new T(i.bufferIndex,p,i.end,y,r),(0,I.updateTreeMetadata)(this,t,o,h)}shrinkNode(t,s,i){const a=t.piece,d=a.start,p=a.end,y=a.length,w=a.lineFeedCnt,h=s,o=this.getLineFeedCnt(a.bufferIndex,a.start,h),r=this.offsetInBuffer(a.bufferIndex,s)-this.offsetInBuffer(a.bufferIndex,d);t.piece=new T(a.bufferIndex,a.start,h,o,r),(0,I.updateTreeMetadata)(this,t,r-y,o-w);const u=new T(a.bufferIndex,i,p,this.getLineFeedCnt(a.bufferIndex,i,p),this.offsetInBuffer(a.bufferIndex,p)-this.offsetInBuffer(a.bufferIndex,i)),f=this.rbInsertRight(t,u);this.validateCRLFWithPrevNode(f)}appendToNode(t,s){this.adjustCarriageReturnFromNext(s,t)&&(s+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(s)&&this.endWithCR(t),a=this._buffers[0].buffer.length;this._buffers[0].buffer+=s;const d=L(s,!1);for(let f=0;f<d.length;f++)d[f]+=a;if(i){const f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:a-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(d.slice(1));const p=this._buffers[0].lineStarts.length-1,y=this._buffers[0].buffer.length-this._buffers[0].lineStarts[p],w={line:p,column:y},h=t.piece.length+s.length,o=t.piece.lineFeedCnt,r=this.getLineFeedCnt(0,t.piece.start,w),u=r-o;t.piece=new T(t.piece.bufferIndex,t.piece.start,w,r,h),this._lastChangeBufferPos=w,(0,I.updateTreeMetadata)(this,t,s.length,u)}nodeAt(t){let s=this.root;const i=this._searchCache.get(t);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:t-i.nodeStartOffset};let a=0;for(;s!==I.SENTINEL;)if(s.size_left>t)s=s.left;else if(s.size_left+s.piece.length>=t){a+=s.size_left;const d={node:s,remainder:t-s.size_left,nodeStartOffset:a};return this._searchCache.set(d),d}else t-=s.size_left+s.piece.length,a+=s.size_left+s.piece.length,s=s.right;return null}nodeAt2(t,s){let i=this.root,a=0;for(;i!==I.SENTINEL;)if(i.left!==I.SENTINEL&&i.lf_left>=t-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>t-1){const d=this.getAccumulatedValue(i,t-i.lf_left-2),p=this.getAccumulatedValue(i,t-i.lf_left-1);return a+=i.size_left,{node:i,remainder:Math.min(d+s-1,p),nodeStartOffset:a}}else if(i.lf_left+i.piece.lineFeedCnt===t-1){const d=this.getAccumulatedValue(i,t-i.lf_left-2);if(d+s-1<=i.piece.length)return{node:i,remainder:d+s-1,nodeStartOffset:a};s-=i.piece.length-d;break}else t-=i.lf_left+i.piece.lineFeedCnt,a+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==I.SENTINEL;){if(i.piece.lineFeedCnt>0){const d=this.getAccumulatedValue(i,0),p=this.offsetOfNode(i);return{node:i,remainder:Math.min(s-1,d),nodeStartOffset:p}}else if(i.piece.length>=s-1){const d=this.offsetOfNode(i);return{node:i,remainder:s-1,nodeStartOffset:d}}else s-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(t,s){if(t.piece.lineFeedCnt<1)return-1;const i=this._buffers[t.piece.bufferIndex],a=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start)+s;return i.buffer.charCodeAt(a)}offsetOfNode(t){if(!t)return 0;let s=t.size_left;for(;t!==this.root;)t.parent.right===t&&(s+=t.parent.size_left+t.parent.piece.length),t=t.parent;return s}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(t){if(typeof t=="string")return t.charCodeAt(0)===10;if(t===I.SENTINEL||t.piece.lineFeedCnt===0)return!1;const s=t.piece,i=this._buffers[s.bufferIndex].lineStarts,a=s.start.line,d=i[a]+s.start.column;return a===i.length-1||i[a+1]>d+1?!1:this._buffers[s.bufferIndex].buffer.charCodeAt(d)===10}endWithCR(t){return typeof t=="string"?t.charCodeAt(t.length-1)===13:t===I.SENTINEL||t.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(t,t.piece.length-1)===13}validateCRLFWithPrevNode(t){if(this.shouldCheckCRLF()&&this.startWithLF(t)){const s=t.prev();this.endWithCR(s)&&this.fixCRLF(s,t)}}validateCRLFWithNextNode(t){if(this.shouldCheckCRLF()&&this.endWithCR(t)){const s=t.next();this.startWithLF(s)&&this.fixCRLF(t,s)}}fixCRLF(t,s){const i=[],a=this._buffers[t.piece.bufferIndex].lineStarts;let d;t.piece.end.column===0?d={line:t.piece.end.line-1,column:a[t.piece.end.line]-a[t.piece.end.line-1]-1}:d={line:t.piece.end.line,column:t.piece.end.column-1};const p=t.piece.length-1,y=t.piece.lineFeedCnt-1;t.piece=new T(t.piece.bufferIndex,t.piece.start,d,y,p),(0,I.updateTreeMetadata)(this,t,-1,-1),t.piece.length===0&&i.push(t);const w={line:s.piece.start.line+1,column:0},h=s.piece.length-1,o=this.getLineFeedCnt(s.piece.bufferIndex,w,s.piece.end);s.piece=new T(s.piece.bufferIndex,w,s.piece.end,o,h),(0,I.updateTreeMetadata)(this,s,-1,-1),s.piece.length===0&&i.push(s);const r=this.createNewPieces(`\r
`);this.rbInsertRight(t,r[0]);for(let u=0;u<i.length;u++)(0,I.rbDelete)(this,i[u])}adjustCarriageReturnFromNext(t,s){if(this.shouldCheckCRLF()&&this.endWithCR(t)){const i=s.next();if(this.startWithLF(i)){if(t+=`
`,i.piece.length===1)(0,I.rbDelete)(this,i);else{const a=i.piece,d={line:a.start.line+1,column:0},p=a.length-1,y=this.getLineFeedCnt(a.bufferIndex,d,a.end);i.piece=new T(a.bufferIndex,d,a.end,y,p),(0,I.updateTreeMetadata)(this,i,-1,-1)}return!0}}return!1}iterate(t,s){if(t===I.SENTINEL)return s(I.SENTINEL);const i=this.iterate(t.left,s);return i&&s(t)&&this.iterate(t.right,s)}getNodeContent(t){if(t===I.SENTINEL)return"";const s=this._buffers[t.piece.bufferIndex];let i;const a=t.piece,d=this.offsetInBuffer(a.bufferIndex,a.start),p=this.offsetInBuffer(a.bufferIndex,a.end);return i=s.buffer.substring(d,p),i}getPieceContent(t){const s=this._buffers[t.bufferIndex],i=this.offsetInBuffer(t.bufferIndex,t.start),a=this.offsetInBuffer(t.bufferIndex,t.end);return s.buffer.substring(i,a)}rbInsertRight(t,s){const i=new I.TreeNode(s,1);if(i.left=I.SENTINEL,i.right=I.SENTINEL,i.parent=I.SENTINEL,i.size_left=0,i.lf_left=0,this.root===I.SENTINEL)this.root=i,i.color=0;else if(t.right===I.SENTINEL)t.right=i,i.parent=t;else{const d=(0,I.leftest)(t.right);d.left=i,i.parent=d}return(0,I.fixInsert)(this,i),i}rbInsertLeft(t,s){const i=new I.TreeNode(s,1);if(i.left=I.SENTINEL,i.right=I.SENTINEL,i.parent=I.SENTINEL,i.size_left=0,i.lf_left=0,this.root===I.SENTINEL)this.root=i,i.color=0;else if(t.left===I.SENTINEL)t.left=i,i.parent=t;else{const a=(0,I.righttest)(t.left);a.right=i,i.parent=a}return(0,I.fixInsert)(this,i),i}getContentOfSubTree(t){let s="";return this.iterate(t,i=>(s+=this.getNodeContent(i),!0)),s}}e.PieceTreeBase=c}),define(te[25],ne([0,1,18,2,11,24,10,20,22,5]),function(X,e,R,D,B,I,k,F,A,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBuffer=void 0;class N extends L.Disposable{constructor(_,P,b,c,l,t,s){super();this._onDidChangeContent=this._register(new R.Emitter),this.onDidChangeContent=this._onDidChangeContent.event,this._BOM=P,this._mightContainNonBasicASCII=!t,this._mightContainRTL=c,this._mightContainUnusualLineTerminators=l,this._pieceTree=new k.PieceTreeBase(_,b,s)}equals(_){return!(_ instanceof N)||this._BOM!==_._BOM||this.getEOL()!==_.getEOL()?!1:this._pieceTree.equal(_._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(_){return this._pieceTree.createSnapshot(_?this._BOM:"")}getOffsetAt(_,P){return this._pieceTree.getOffsetAt(_,P)}getPositionAt(_){return this._pieceTree.getPositionAt(_)}getRangeAt(_,P){const b=_+P,c=this.getPositionAt(_),l=this.getPositionAt(b);return new B.Range(c.lineNumber,c.column,l.lineNumber,l.column)}getValueInRange(_,P=0){if(_.isEmpty())return"";const b=this._getEndOfLine(P);return this._pieceTree.getValueInRange(_,b)}getValueLengthInRange(_,P=0){if(_.isEmpty())return 0;if(_.startLineNumber===_.endLineNumber)return _.endColumn-_.startColumn;const b=this.getOffsetAt(_.startLineNumber,_.startColumn);return this.getOffsetAt(_.endLineNumber,_.endColumn)-b}getCharacterCountInRange(_,P=0){if(this._mightContainNonBasicASCII){let b=0;const c=_.startLineNumber,l=_.endLineNumber;for(let t=c;t<=l;t++){const s=this.getLineContent(t),i=t===c?_.startColumn-1:0,a=t===l?_.endColumn-1:s.length;for(let d=i;d<a;d++)D.isHighSurrogate(s.charCodeAt(d))?(b=b+1,d=d+1):b=b+1}return b+=this._getEndOfLine(P).length*(l-c),b}return this.getValueLengthInRange(_,P)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(_){return this._pieceTree.getLineContent(_)}getLineCharCode(_,P){return this._pieceTree.getLineCharCode(_,P)}getCharCode(_){return this._pieceTree.getCharCode(_)}getLineLength(_){return this._pieceTree.getLineLength(_)}getLineMinColumn(_){return 1}getLineMaxColumn(_){return this.getLineLength(_)+1}getLineFirstNonWhitespaceColumn(_){const P=D.firstNonWhitespaceIndex(this.getLineContent(_));return P===-1?0:P+1}getLineLastNonWhitespaceColumn(_){const P=D.lastNonWhitespaceIndex(this.getLineContent(_));return P===-1?0:P+2}_getEndOfLine(_){switch(_){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(_){this._pieceTree.setEOL(_)}applyEdits(_,P,b){let c=this._mightContainRTL,l=this._mightContainUnusualLineTerminators,t=this._mightContainNonBasicASCII,s=!0,i=[];for(let o=0;o<_.length;o++){const r=_[o];s&&r._isTracked&&(s=!1);const u=r.range;if(r.text){let j=!0;t||(j=!D.isBasicASCII(r.text),t=j),!c&&j&&(c=D.containsRTL(r.text)),!l&&j&&(l=D.containsUnusualLineTerminators(r.text))}let f="",E=0,S=0,W=0;if(r.text){let j;[E,S,W,j]=(0,F.countEOL)(r.text);const M=this.getEOL();j===0||j===(M===`\r
`?2:1)?f=r.text:f=r.text.replace(/\r\n|\r|\n/g,M)}i[o]={sortIndex:o,identifier:r.identifier||null,range:u,rangeOffset:this.getOffsetAt(u.startLineNumber,u.startColumn),rangeLength:this.getValueLengthInRange(u),text:f,eolCount:E,firstLineLength:S,lastLineLength:W,forceMoveMarkers:Boolean(r.forceMoveMarkers),isAutoWhitespaceEdit:r.isAutoWhitespaceEdit||!1}}i.sort(N._sortOpsAscending);let a=!1;for(let o=0,r=i.length-1;o<r;o++){const u=i[o].range.getEndPosition(),f=i[o+1].range.getStartPosition();if(f.isBeforeOrEqual(u)){if(f.isBefore(u))throw new Error("Overlapping ranges are not allowed!");a=!0}}s&&(i=this._reduceOperations(i));const d=b||P?N._getInverseEditRanges(i):[],p=[];if(P)for(let o=0;o<i.length;o++){const r=i[o],u=d[o];if(r.isAutoWhitespaceEdit&&r.range.isEmpty())for(let f=u.startLineNumber;f<=u.endLineNumber;f++){let E="";f===u.startLineNumber&&(E=this.getLineContent(r.range.startLineNumber),D.firstNonWhitespaceIndex(E)!==-1)||p.push({lineNumber:f,oldContent:E})}}let y=null;if(b){let o=0;y=[];for(let r=0;r<i.length;r++){const u=i[r],f=d[r],E=this.getValueInRange(u.range),S=u.rangeOffset+o;o+=u.text.length-E.length,y[r]={sortIndex:u.sortIndex,identifier:u.identifier,range:f,text:E,textChange:new A.TextChange(u.rangeOffset,E,S,u.text)}}a||y.sort((r,u)=>r.sortIndex-u.sortIndex)}this._mightContainRTL=c,this._mightContainUnusualLineTerminators=l,this._mightContainNonBasicASCII=t;const w=this._doApplyEdits(i);let h=null;if(P&&p.length>0){p.sort((o,r)=>r.lineNumber-o.lineNumber),h=[];for(let o=0,r=p.length;o<r;o++){const u=p[o].lineNumber;if(o>0&&p[o-1].lineNumber===u)continue;const f=p[o].oldContent,E=this.getLineContent(u);E.length===0||E===f||D.firstNonWhitespaceIndex(E)!==-1||h.push(u)}}return this._onDidChangeContent.fire(),new I.ApplyEditsResult(y,w,h)}_reduceOperations(_){return _.length<1e3?_:[this._toSingleEditOperation(_)]}_toSingleEditOperation(_){let P=!1;const b=_[0].range,c=_[_.length-1].range,l=new B.Range(b.startLineNumber,b.startColumn,c.endLineNumber,c.endColumn);let t=b.startLineNumber,s=b.startColumn;const i=[];for(let w=0,h=_.length;w<h;w++){const o=_[w],r=o.range;P=P||o.forceMoveMarkers,i.push(this.getValueInRange(new B.Range(t,s,r.startLineNumber,r.startColumn))),o.text.length>0&&i.push(o.text),t=r.endLineNumber,s=r.endColumn}const a=i.join(""),[d,p,y]=(0,F.countEOL)(a);return{sortIndex:0,identifier:_[0].identifier,range:l,rangeOffset:this.getOffsetAt(l.startLineNumber,l.startColumn),rangeLength:this.getValueLengthInRange(l,0),text:a,eolCount:d,firstLineLength:p,lastLineLength:y,forceMoveMarkers:P,isAutoWhitespaceEdit:!1}}_doApplyEdits(_){_.sort(N._sortOpsDescending);const P=[];for(let b=0;b<_.length;b++){const c=_[b],l=c.range.startLineNumber,t=c.range.startColumn,s=c.range.endLineNumber,i=c.range.endColumn;if(l===s&&t===i&&c.text.length===0)continue;c.text?(this._pieceTree.delete(c.rangeOffset,c.rangeLength),this._pieceTree.insert(c.rangeOffset,c.text,!0)):this._pieceTree.delete(c.rangeOffset,c.rangeLength);const a=new B.Range(l,t,s,i);P.push({range:a,rangeLength:c.rangeLength,text:c.text,rangeOffset:c.rangeOffset,forceMoveMarkers:c.forceMoveMarkers})}return P}findMatchesLineByLine(_,P,b,c){return this._pieceTree.findMatchesLineByLine(_,P,b,c)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(_,P){const b=_.startLineNumber,c=_.startColumn,[l,t,s]=(0,F.countEOL)(P);let i;if(P.length>0){const a=l+1;a===1?i=new B.Range(b,c,b,c+t):i=new B.Range(b,c,b+a-1,s+1)}else i=new B.Range(b,c,b,c);return i}static _getInverseEditRanges(_){const P=[];let b=0,c=0,l=null;for(let t=0,s=_.length;t<s;t++){const i=_[t];let a,d;l?l.range.endLineNumber===i.range.startLineNumber?(a=b,d=c+(i.range.startColumn-l.range.endColumn)):(a=b+(i.range.startLineNumber-l.range.endLineNumber),d=i.range.startColumn):(a=i.range.startLineNumber,d=i.range.startColumn);let p;if(i.text.length>0){const y=i.eolCount+1;y===1?p=new B.Range(a,d,a,d+i.firstLineLength):p=new B.Range(a,d,a+y-1,i.lastLineLength+1)}else p=new B.Range(a,d,a,d);b=p.endLineNumber,c=p.endColumn,P.push(p),l=i}return P}static _sortOpsAscending(_,P){const b=B.Range.compareRangesUsingEnds(_.range,P.range);return b===0?_.sortIndex-P.sortIndex:b}static _sortOpsDescending(_,P){const b=B.Range.compareRangesUsingEnds(_.range,P.range);return b===0?P.sortIndex-_.sortIndex:-b}}e.PieceTreeTextBuffer=N}),define(te[26],ne([0,1,2,10,25]),function(X,e,R,D,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBufferBuilder=e.PieceTreeTextBufferFactory=void 0;class I{constructor(A,L,N,T,_,P,b,c,l){this._chunks=A,this._bom=L,this._cr=N,this._lf=T,this._crlf=_,this._containsRTL=P,this._containsUnusualLineTerminators=b,this._isBasicASCII=c,this._normalizeEOL=l}_getEOL(A){const L=this._cr+this._lf+this._crlf,N=this._cr+this._crlf;return L===0?A===1?`
`:`\r
`:N>L/2?`\r
`:`
`}create(A){const L=this._getEOL(A),N=this._chunks;if(this._normalizeEOL&&(L===`\r
`&&(this._cr>0||this._lf>0)||L===`
`&&(this._cr>0||this._crlf>0)))for(let _=0,P=N.length;_<P;_++){const b=N[_].buffer.replace(/\r\n|\r|\n/g,L),c=(0,D.createLineStartsFast)(b);N[_]=new D.StringBuffer(b,c)}const T=new B.PieceTreeTextBuffer(N,this._bom,L,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:T,disposable:T}}getFirstLineText(A){return this._chunks[0].buffer.substr(0,A).split(/\r\n|\r|\n/)[0]}}e.PieceTreeTextBufferFactory=I;class k{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(A){if(A.length===0)return;this.chunks.length===0&&R.startsWithUTF8BOM(A)&&(this.BOM=R.UTF8_BOM_CHARACTER,A=A.substr(1));const L=A.charCodeAt(A.length-1);L===13||L>=55296&&L<=56319?(this._acceptChunk1(A.substr(0,A.length-1),!1),this._hasPreviousChar=!0,this._previousChar=L):(this._acceptChunk1(A,!1),this._hasPreviousChar=!1,this._previousChar=L)}_acceptChunk1(A,L){!L&&A.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+A):this._acceptChunk2(A))}_acceptChunk2(A){const L=(0,D.createLineStarts)(this._tmpLineStarts,A);this.chunks.push(new D.StringBuffer(A,L.lineStarts)),this.cr+=L.cr,this.lf+=L.lf,this.crlf+=L.crlf,this.isBasicASCII&&(this.isBasicASCII=L.isBasicASCII),!this.isBasicASCII&&!this.containsRTL&&(this.containsRTL=R.containsRTL(A)),!this.isBasicASCII&&!this.containsUnusualLineTerminators&&(this.containsUnusualLineTerminators=R.containsUnusualLineTerminators(A))}finish(A=!0){return this._finish(),new I(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,A)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const A=this.chunks[this.chunks.length-1];A.buffer+=String.fromCharCode(this._previousChar);const L=(0,D.createLineStartsFast)(A.buffer);A.lineStarts=L,this._previousChar===13&&this.cr++}}}e.PieceTreeTextBufferBuilder=k}),define(te[27],ne([0,1]),function(X,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.refineServiceDecorator=e.createDecorator=e.IInstantiationService=e._util=void 0;var R;(function(k){k.serviceIds=new Map,k.DI_TARGET="$di$target",k.DI_DEPENDENCIES="$di$dependencies";function F(A){return A[k.DI_DEPENDENCIES]||[]}k.getServiceDependencies=F})(R=e._util||(e._util={})),e.IInstantiationService=B("instantiationService");function D(k,F,A){F[R.DI_TARGET]===F?F[R.DI_DEPENDENCIES].push({id:k,index:A}):(F[R.DI_DEPENDENCIES]=[{id:k,index:A}],F[R.DI_TARGET]=F)}function B(k){if(R.serviceIds.has(k))return R.serviceIds.get(k);const F=function(A,L,N){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");D(F,A,N)};return F.toString=()=>k,R.serviceIds.set(k,F),F}e.createDecorator=B;function I(k){return k}e.refineServiceDecorator=I}),define(te[28],ne([0,1,3,2,27]),function(X,e,R,D,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.implies=e.SET_CONTEXT_COMMAND_ID=e.IContextKeyService=e.RawContextKey=e.ContextKeyNotRegexExpr=e.ContextKeyRegexExpr=e.ContextKeySmallerEqualsExpr=e.ContextKeySmallerExpr=e.ContextKeyGreaterEqualsExpr=e.ContextKeyGreaterExpr=e.ContextKeyNotExpr=e.ContextKeyNotEqualsExpr=e.ContextKeyNotInExpr=e.ContextKeyInExpr=e.ContextKeyEqualsExpr=e.ContextKeyDefinedExpr=e.ContextKeyTrueExpr=e.ContextKeyFalseExpr=e.expressionsAreEqualWithConstantSubstitution=e.ContextKeyExpr=e.ContextKeyExprType=void 0;const I=new Map;I.set("false",!1),I.set("true",!0),I.set("isMac",R.isMacintosh),I.set("isLinux",R.isLinux),I.set("isWindows",R.isWindows),I.set("isWeb",R.isWeb),I.set("isMacNative",R.isMacintosh&&!R.isWeb),I.set("isEdge",R.isEdge),I.set("isFirefox",R.isFirefox),I.set("isChrome",R.isChrome),I.set("isSafari",R.isSafari);const k=Object.prototype.hasOwnProperty;var F;(function(M){M[M.False=0]="False",M[M.True=1]="True",M[M.Defined=2]="Defined",M[M.Not=3]="Not",M[M.Equals=4]="Equals",M[M.NotEquals=5]="NotEquals",M[M.And=6]="And",M[M.Regex=7]="Regex",M[M.NotRegex=8]="NotRegex",M[M.Or=9]="Or",M[M.In=10]="In",M[M.NotIn=11]="NotIn",M[M.Greater=12]="Greater",M[M.GreaterEquals=13]="GreaterEquals",M[M.Smaller=14]="Smaller",M[M.SmallerEquals=15]="SmallerEquals"})(F=e.ContextKeyExprType||(e.ContextKeyExprType={}));class A{static false(){return T.INSTANCE}static true(){return _.INSTANCE}static has(n){return P.create(n)}static equals(n,m){return b.create(n,m)}static notEquals(n,m){return t.create(n,m)}static regex(n,m){return w.create(n,m)}static in(n,m){return c.create(n,m)}static not(n){return s.create(n)}static and(...n){return r.create(n,null)}static or(...n){return u.create(n,null,!0)}static greater(n,m){return a.create(n,m)}static greaterEquals(n,m){return d.create(n,m)}static smaller(n,m){return p.create(n,m)}static smallerEquals(n,m){return y.create(n,m)}static deserialize(n,m=!1){if(!!n)return this._deserializeOrExpression(n,m)}static _deserializeOrExpression(n,m){let C=n.split("||");return u.create(C.map($=>this._deserializeAndExpression($,m)),null,!0)}static _deserializeAndExpression(n,m){let C=n.split("&&");return r.create(C.map($=>this._deserializeOne($,m)),null)}static _deserializeOne(n,m){if(n=n.trim(),n.indexOf("!=")>=0){let C=n.split("!=");return t.create(C[0].trim(),this._deserializeValue(C[1],m))}if(n.indexOf("==")>=0){let C=n.split("==");return b.create(C[0].trim(),this._deserializeValue(C[1],m))}if(n.indexOf("=~")>=0){let C=n.split("=~");return w.create(C[0].trim(),this._deserializeRegexValue(C[1],m))}if(n.indexOf(" in ")>=0){let C=n.split(" in ");return c.create(C[0].trim(),C[1].trim())}if(/^[^<=>]+>=[^<=>]+$/.test(n)){const C=n.split(">=");return d.create(C[0].trim(),C[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(n)){const C=n.split(">");return a.create(C[0].trim(),C[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(n)){const C=n.split("<=");return y.create(C[0].trim(),C[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(n)){const C=n.split("<");return p.create(C[0].trim(),C[1].trim())}return/^\!\s*/.test(n)?s.create(n.substr(1).trim()):P.create(n)}static _deserializeValue(n,m){if(n=n.trim(),n==="true")return!0;if(n==="false")return!1;let C=/^'([^']*)'$/.exec(n);return C?C[1].trim():n}static _deserializeRegexValue(n,m){if((0,D.isFalsyOrWhitespace)(n)){if(m)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}let C=n.indexOf("/"),$=n.lastIndexOf("/");if(C===$||C<0){if(m)throw new Error(`bad regexp-value '${n}', missing /-enclosure`);return console.warn(`bad regexp-value '${n}', missing /-enclosure`),null}let Y=n.slice(C+1,$),J=n[$+1]==="i"?"i":"";try{return new RegExp(Y,J)}catch(ee){if(m)throw new Error(`bad regexp-value '${n}', parse error: ${ee}`);return console.warn(`bad regexp-value '${n}', parse error: ${ee}`),null}}}e.ContextKeyExpr=A;function L(M,n){const m=M?M.substituteConstants():void 0,C=n?n.substituteConstants():void 0;return!m&&!C?!0:!m||!C?!1:m.equals(C)}e.expressionsAreEqualWithConstantSubstitution=L;function N(M,n){return M.cmp(n)}class T{constructor(){this.type=0}cmp(n){return this.type-n.type}equals(n){return n.type===this.type}substituteConstants(){return this}evaluate(n){return!1}serialize(){return"false"}keys(){return[]}map(n){return this}negate(){return _.INSTANCE}}e.ContextKeyFalseExpr=T,T.INSTANCE=new T;class _{constructor(){this.type=1}cmp(n){return this.type-n.type}equals(n){return n.type===this.type}substituteConstants(){return this}evaluate(n){return!0}serialize(){return"true"}keys(){return[]}map(n){return this}negate(){return T.INSTANCE}}e.ContextKeyTrueExpr=_,_.INSTANCE=new _;class P{constructor(n,m){this.key=n,this.negated=m,this.type=2}static create(n,m=null){const C=I.get(n);return typeof C=="boolean"?C?_.INSTANCE:T.INSTANCE:new P(n,m)}cmp(n){return n.type!==this.type?this.type-n.type:E(this.key,n.key)}equals(n){return n.type===this.type?this.key===n.key:!1}substituteConstants(){const n=I.get(this.key);return typeof n=="boolean"?n?_.INSTANCE:T.INSTANCE:this}evaluate(n){return!!n.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(n){return n.mapDefined(this.key)}negate(){return this.negated||(this.negated=s.create(this.key,this)),this.negated}}e.ContextKeyDefinedExpr=P;class b{constructor(n,m,C){this.key=n,this.value=m,this.negated=C,this.type=4}static create(n,m,C=null){if(typeof m=="boolean")return m?P.create(n,C):s.create(n,C);const $=I.get(n);return typeof $=="boolean"?m===($?"true":"false")?_.INSTANCE:T.INSTANCE:new b(n,m,C)}cmp(n){return n.type!==this.type?this.type-n.type:S(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){const n=I.get(this.key);if(typeof n=="boolean"){const m=n?"true":"false";return this.value===m?_.INSTANCE:T.INSTANCE}return this}evaluate(n){return n.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(n){return n.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=t.create(this.key,this.value,this)),this.negated}}e.ContextKeyEqualsExpr=b;class c{constructor(n,m){this.key=n,this.valueKey=m,this.type=10,this.negated=null}static create(n,m){return new c(n,m)}cmp(n){return n.type!==this.type?this.type-n.type:S(this.key,this.valueKey,n.key,n.valueKey)}equals(n){return n.type===this.type?this.key===n.key&&this.valueKey===n.valueKey:!1}substituteConstants(){return this}evaluate(n){const m=n.getValue(this.valueKey),C=n.getValue(this.key);return Array.isArray(m)?m.indexOf(C)>=0:typeof C=="string"&&typeof m=="object"&&m!==null?k.call(m,C):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(n){return n.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=l.create(this)),this.negated}}e.ContextKeyInExpr=c;class l{constructor(n){this._actual=n,this.type=11}static create(n){return new l(n)}cmp(n){return n.type!==this.type?this.type-n.type:this._actual.cmp(n._actual)}equals(n){return n.type===this.type?this._actual.equals(n._actual):!1}substituteConstants(){return this}evaluate(n){return!this._actual.evaluate(n)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(n){return new l(this._actual.map(n))}negate(){return this._actual}}e.ContextKeyNotInExpr=l;class t{constructor(n,m,C){this.key=n,this.value=m,this.negated=C,this.type=5}static create(n,m,C=null){if(typeof m=="boolean")return m?s.create(n,C):P.create(n,C);const $=I.get(n);return typeof $=="boolean"?m===($?"true":"false")?T.INSTANCE:_.INSTANCE:new t(n,m,C)}cmp(n){return n.type!==this.type?this.type-n.type:S(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){const n=I.get(this.key);if(typeof n=="boolean"){const m=n?"true":"false";return this.value===m?T.INSTANCE:_.INSTANCE}return this}evaluate(n){return n.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(n){return n.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=b.create(this.key,this.value,this)),this.negated}}e.ContextKeyNotEqualsExpr=t;class s{constructor(n,m){this.key=n,this.negated=m,this.type=3}static create(n,m=null){const C=I.get(n);return typeof C=="boolean"?C?T.INSTANCE:_.INSTANCE:new s(n,m)}cmp(n){return n.type!==this.type?this.type-n.type:E(this.key,n.key)}equals(n){return n.type===this.type?this.key===n.key:!1}substituteConstants(){const n=I.get(this.key);return typeof n=="boolean"?n?T.INSTANCE:_.INSTANCE:this}evaluate(n){return!n.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(n){return n.mapNot(this.key)}negate(){return this.negated||(this.negated=P.create(this.key,this)),this.negated}}e.ContextKeyNotExpr=s;function i(M,n){if(typeof M=="string"){const m=parseFloat(M);isNaN(m)||(M=m)}return typeof M=="string"||typeof M=="number"?n(M):T.INSTANCE}class a{constructor(n,m,C){this.key=n,this.value=m,this.negated=C,this.type=12}static create(n,m,C=null){return i(m,$=>new a(n,$,C))}cmp(n){return n.type!==this.type?this.type-n.type:S(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(n){return n.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=y.create(this.key,this.value,this)),this.negated}}e.ContextKeyGreaterExpr=a;class d{constructor(n,m,C){this.key=n,this.value=m,this.negated=C,this.type=13}static create(n,m,C=null){return i(m,$=>new d(n,$,C))}cmp(n){return n.type!==this.type?this.type-n.type:S(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(n){return n.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=p.create(this.key,this.value,this)),this.negated}}e.ContextKeyGreaterEqualsExpr=d;class p{constructor(n,m,C){this.key=n,this.value=m,this.negated=C,this.type=14}static create(n,m,C=null){return i(m,$=>new p(n,$,C))}cmp(n){return n.type!==this.type?this.type-n.type:S(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(n){return n.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=d.create(this.key,this.value,this)),this.negated}}e.ContextKeySmallerExpr=p;class y{constructor(n,m,C){this.key=n,this.value=m,this.negated=C,this.type=15}static create(n,m,C=null){return i(m,$=>new y(n,$,C))}cmp(n){return n.type!==this.type?this.type-n.type:S(this.key,this.value,n.key,n.value)}equals(n){return n.type===this.type?this.key===n.key&&this.value===n.value:!1}substituteConstants(){return this}evaluate(n){return typeof this.value=="string"?!1:parseFloat(n.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(n){return n.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=a.create(this.key,this.value,this)),this.negated}}e.ContextKeySmallerEqualsExpr=y;class w{constructor(n,m){this.key=n,this.regexp=m,this.type=7,this.negated=null}static create(n,m){return new w(n,m)}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.key<n.key)return-1;if(this.key>n.key)return 1;const m=this.regexp?this.regexp.source:"",C=n.regexp?n.regexp.source:"";return m<C?-1:m>C?1:0}equals(n){if(n.type===this.type){const m=this.regexp?this.regexp.source:"",C=n.regexp?n.regexp.source:"";return this.key===n.key&&m===C}return!1}substituteConstants(){return this}evaluate(n){let m=n.getValue(this.key);return this.regexp?this.regexp.test(m):!1}serialize(){const n=this.regexp?`/${this.regexp.source}/${this.regexp.ignoreCase?"i":""}`:"/invalid/";return`${this.key} =~ ${n}`}keys(){return[this.key]}map(n){return n.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=h.create(this)),this.negated}}e.ContextKeyRegexExpr=w;class h{constructor(n){this._actual=n,this.type=8}static create(n){return new h(n)}cmp(n){return n.type!==this.type?this.type-n.type:this._actual.cmp(n._actual)}equals(n){return n.type===this.type?this._actual.equals(n._actual):!1}substituteConstants(){return this}evaluate(n){return!this._actual.evaluate(n)}serialize(){throw new Error("Method not implemented.")}keys(){return this._actual.keys()}map(n){return new h(this._actual.map(n))}negate(){return this._actual}}e.ContextKeyNotRegexExpr=h;function o(M){let n=null;for(let m=0,C=M.length;m<C;m++){const $=M[m].substituteConstants();if(M[m]!==$&&n===null){n=[];for(let Y=0;Y<m;Y++)n[Y]=M[Y]}n!==null&&(n[m]=$)}return n===null?M:n}class r{constructor(n,m){this.expr=n,this.negated=m,this.type=6}static create(n,m){return r._normalizeArr(n,m)}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.expr.length<n.expr.length)return-1;if(this.expr.length>n.expr.length)return 1;for(let m=0,C=this.expr.length;m<C;m++){const $=N(this.expr[m],n.expr[m]);if($!==0)return $}return 0}equals(n){if(n.type===this.type){if(this.expr.length!==n.expr.length)return!1;for(let m=0,C=this.expr.length;m<C;m++)if(!this.expr[m].equals(n.expr[m]))return!1;return!0}return!1}substituteConstants(){const n=o(this.expr);return n===this.expr?this:r.create(n,this.negated)}evaluate(n){for(let m=0,C=this.expr.length;m<C;m++)if(!this.expr[m].evaluate(n))return!1;return!0}static _normalizeArr(n,m){const C=[];let $=!1;for(const Y of n)if(!!Y){if(Y.type===1){$=!0;continue}if(Y.type===0)return T.INSTANCE;if(Y.type===6){C.push(...Y.expr);continue}C.push(Y)}if(C.length===0&&$)return _.INSTANCE;if(C.length!==0){if(C.length===1)return C[0];C.sort(N);for(let Y=1;Y<C.length;Y++)C[Y-1].equals(C[Y])&&(C.splice(Y,1),Y--);if(C.length===1)return C[0];for(;C.length>1;){const Y=C[C.length-1];if(Y.type!==9)break;C.pop();const J=C.pop(),ee=C.length===0,z=u.create(Y.expr.map(K=>r.create([K,J],null)),null,ee);z&&(C.push(z),C.sort(N))}return C.length===1?C[0]:new r(C,m)}}serialize(){return this.expr.map(n=>n.serialize()).join(" && ")}keys(){const n=[];for(let m of this.expr)n.push(...m.keys());return n}map(n){return new r(this.expr.map(m=>m.map(n)),null)}negate(){if(!this.negated){const n=[];for(let m of this.expr)n.push(m.negate());this.negated=u.create(n,this,!0)}return this.negated}}class u{constructor(n,m){this.expr=n,this.negated=m,this.type=9}static create(n,m,C){return u._normalizeArr(n,m,C)}cmp(n){if(n.type!==this.type)return this.type-n.type;if(this.expr.length<n.expr.length)return-1;if(this.expr.length>n.expr.length)return 1;for(let m=0,C=this.expr.length;m<C;m++){const $=N(this.expr[m],n.expr[m]);if($!==0)return $}return 0}equals(n){if(n.type===this.type){if(this.expr.length!==n.expr.length)return!1;for(let m=0,C=this.expr.length;m<C;m++)if(!this.expr[m].equals(n.expr[m]))return!1;return!0}return!1}substituteConstants(){const n=o(this.expr);return n===this.expr?this:u.create(n,this.negated,!1)}evaluate(n){for(let m=0,C=this.expr.length;m<C;m++)if(this.expr[m].evaluate(n))return!0;return!1}static _normalizeArr(n,m,C){let $=[],Y=!1;if(n){for(let J=0,ee=n.length;J<ee;J++){const z=n[J];if(!!z){if(z.type===0){Y=!0;continue}if(z.type===1)return _.INSTANCE;if(z.type===9){$=$.concat(z.expr);continue}$.push(z)}}if($.length===0&&Y)return T.INSTANCE;$.sort(N)}if($.length!==0){if($.length===1)return $[0];for(let J=1;J<$.length;J++)$[J-1].equals($[J])&&($.splice(J,1),J--);if($.length===1)return $[0];if(C){for(let J=0;J<$.length;J++)for(let ee=J+1;ee<$.length;ee++)W($[J],$[ee])&&($.splice(ee,1),ee--);if($.length===1)return $[0]}return new u($,m)}}serialize(){return this.expr.map(n=>n.serialize()).join(" || ")}keys(){const n=[];for(let m of this.expr)n.push(...m.keys());return n}map(n){return new u(this.expr.map(m=>m.map(n)),null)}negate(){if(!this.negated){let n=[];for(let m of this.expr)n.push(m.negate());for(;n.length>1;){const m=n.shift(),C=n.shift(),$=[];for(const J of j(m))for(const ee of j(C))$.push(r.create([J,ee],null));const Y=n.length===0;n.unshift(u.create($,null,Y))}this.negated=n[0]}return this.negated}}class f extends P{constructor(n,m,C){super(n,null);this._defaultValue=m,typeof C=="object"?f._info.push({...C,key:n}):C!==!0&&f._info.push({key:n,description:C,type:m!=null?typeof m:void 0})}static all(){return f._info.values()}bindTo(n){return n.createKey(this.key,this._defaultValue)}getValue(n){return n.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(n){return b.create(this.key,n)}notEqualsTo(n){return t.create(this.key,n)}}e.RawContextKey=f,f._info=[],e.IContextKeyService=(0,B.createDecorator)("contextKeyService"),e.SET_CONTEXT_COMMAND_ID="setContext";function E(M,n){return M<n?-1:M>n?1:0}function S(M,n,m,C){return M<m?-1:M>m?1:n<C?-1:n>C?1:0}function W(M,n){if(n.type===6&&M.type!==9&&M.type!==6){for(const $ of n.expr)if(M.equals($))return!0}const m=M.negate(),C=j(m).concat(j(n));C.sort(N);for(let $=0;$<C.length;$++){const J=C[$].negate();for(let ee=$+1;ee<C.length;ee++){const z=C[ee];if(J.equals(z))return!0}}return!1}e.implies=W;function j(M){return M.type===9?M.expr:[M]}}),define(te[29],ne([0,1,19,35,12,8,4,3,28]),function(X,e,R,D,B,I,k,F,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NotebookWorkingCopyTypeIdentifier=e.CellStatusbarAlignment=e.NotebookSetting=e.CellSequence=e.notebookDocumentFilterMatch=e.isDocumentExcludePattern=e.NotebookEditorPriority=e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=e.diff=e.MimeTypeDisplayOrder=e.CellUri=e.CellEditType=e.SelectionStateType=e.NotebookCellsChangeType=e.RendererMessagingSpec=e.NotebookRendererMatch=e.NotebookCellExecutionState=e.NotebookRunState=e.RENDERER_NOT_AVAILABLE=e.RENDERER_EQUIVALENT_EXTENSIONS=e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=e.NOTEBOOK_DISPLAY_ORDER=e.CellKind=e.NOTEBOOK_DIFF_EDITOR_ID=e.NOTEBOOK_EDITOR_ID=void 0,e.NOTEBOOK_EDITOR_ID="workbench.editor.notebook",e.NOTEBOOK_DIFF_EDITOR_ID="workbench.editor.notebookTextDiffEditor";var L;(function(r){r[r.Markup=1]="Markup",r[r.Code=2]="Code"})(L=e.CellKind||(e.CellKind={})),e.NOTEBOOK_DISPLAY_ORDER=["application/json","application/javascript","text/html","image/svg+xml",B.Mimes.latex,B.Mimes.markdown,"image/png","image/jpeg",B.Mimes.text],e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=[B.Mimes.latex,B.Mimes.markdown,"application/json",B.Mimes.text,"text/html","image/svg+xml","image/png","image/jpeg"],e.RENDERER_EQUIVALENT_EXTENSIONS=new Map([["ms-toolsai.jupyter",new Set(["jupyter-notebook","interactive"])],["ms-toolsai.jupyter-renderers",new Set(["jupyter-notebook","interactive"])]]),e.RENDERER_NOT_AVAILABLE="_notAvailable";var N;(function(r){r[r.Running=1]="Running",r[r.Idle=2]="Idle"})(N=e.NotebookRunState||(e.NotebookRunState={}));var T;(function(r){r[r.Unconfirmed=1]="Unconfirmed",r[r.Pending=2]="Pending",r[r.Executing=3]="Executing"})(T=e.NotebookCellExecutionState||(e.NotebookCellExecutionState={}));var _;(function(r){r[r.WithHardKernelDependency=0]="WithHardKernelDependency",r[r.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",r[r.Pure=2]="Pure",r[r.Never=3]="Never"})(_=e.NotebookRendererMatch||(e.NotebookRendererMatch={}));var P;(function(r){r.Always="always",r.Never="never",r.Optional="optional"})(P=e.RendererMessagingSpec||(e.RendererMessagingSpec={}));var b;(function(r){r[r.ModelChange=1]="ModelChange",r[r.Move=2]="Move",r[r.ChangeLanguage=5]="ChangeLanguage",r[r.Initialize=6]="Initialize",r[r.ChangeCellMetadata=7]="ChangeCellMetadata",r[r.Output=8]="Output",r[r.OutputItem=9]="OutputItem",r[r.ChangeCellContent=10]="ChangeCellContent",r[r.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",r[r.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",r[r.ChangeCellMime=13]="ChangeCellMime",r[r.Unknown=100]="Unknown"})(b=e.NotebookCellsChangeType||(e.NotebookCellsChangeType={}));var c;(function(r){r[r.Handle=0]="Handle",r[r.Index=1]="Index"})(c=e.SelectionStateType||(e.SelectionStateType={}));var l;(function(r){r[r.Replace=1]="Replace",r[r.Output=2]="Output",r[r.Metadata=3]="Metadata",r[r.CellLanguage=4]="CellLanguage",r[r.DocumentMetadata=5]="DocumentMetadata",r[r.Move=6]="Move",r[r.OutputItems=7]="OutputItems",r[r.PartialMetadata=8]="PartialMetadata",r[r.PartialInternalMetadata=9]="PartialInternalMetadata"})(l=e.CellEditType||(e.CellEditType={}));var t;(function(r){r.scheme=I.Schemas.vscodeNotebookCell;const u=/^ch(\d{7,})/;function f(n,m){return n.with({scheme:r.scheme,fragment:`ch${m.toString().padStart(7,"0")}${n.scheme!==I.Schemas.file?n.scheme:""}`})}r.generate=f;function E(n){if(n.scheme!==r.scheme)return;const m=u.exec(n.fragment);return m?{handle:Number(m[1]),notebook:n.with({scheme:n.fragment.substring(m[0].length)||I.Schemas.file,fragment:null})}:void 0}r.parse=E;function S(n,m){return n.with({scheme:I.Schemas.vscodeNotebookCellOutput,fragment:`op${m??""},${n.scheme!==I.Schemas.file?n.scheme:""}`})}r.generateCellOutputUri=S;function W(n){if(n.scheme!==I.Schemas.vscodeNotebookCellOutput)return;const m=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(n.fragment);if(!m)return;const C=m[1]&&m[1]!==""?m[1]:void 0,$=m[2];return{outputId:C,notebook:n.with({scheme:$||I.Schemas.file,fragment:null})}}r.parseCellOutputUri=W;function j(n,m,C){return n.with({scheme:C,fragment:`ch${m.toString().padStart(7,"0")}${n.scheme!==I.Schemas.file?n.scheme:""}`})}r.generateCellUri=j;function M(n,m){if(n.scheme!==m)return;const C=u.exec(n.fragment);return C?{handle:Number(C[1]),notebook:n.with({scheme:n.fragment.substring(C[0].length)||I.Schemas.file,fragment:null})}:void 0}r.parseCellUri=M})(t=e.CellUri||(e.CellUri={}));const s=r=>F.isWindows?r.replace(/\//g,"\\"):r;class i{constructor(u=[],f=e.NOTEBOOK_DISPLAY_ORDER){this.defaultOrder=f,this.order=[...new Set(u)].map(E=>({pattern:E,matches:R.parse(s(E))}))}sort(u){const f=new Map(D.Iterable.map(u,S=>[S,s(S)]));let E=[];for(const{matches:S}of this.order)for(const[W,j]of f)if(S(j)){E.push(W),f.delete(W);break}return f.size&&(E=E.concat([...f.keys()].sort((S,W)=>this.defaultOrder.indexOf(S)-this.defaultOrder.indexOf(W)))),E}prioritize(u,f){const E=this.findIndex(u);if(E===-1){this.order.unshift({pattern:u,matches:R.parse(s(u))});return}const S=new Set(f.map(j=>this.findIndex(j,E)));S.delete(-1);const W=Array.from(S).sort();this.order.splice(E+1,0,...W.map(j=>this.order[j]));for(let j=W.length-1;j>=0;j--)this.order.splice(W[j],1)}toArray(){return this.order.map(u=>u.pattern)}findIndex(u,f=this.order.length){const E=s(u);for(let S=0;S<f;S++)if(this.order[S].matches(E))return S;return-1}}e.MimeTypeDisplayOrder=i;function a(r,u,f,E=(S,W)=>S===W){const S=[];function W(n,m,C){if(m===0&&C.length===0)return;const $=S[S.length-1];$&&$.start+$.deleteCount===n?($.deleteCount+=m,$.toInsert.push(...C)):S.push({start:n,deleteCount:m,toInsert:C})}let j=0,M=0;for(;;){if(j===r.length){W(j,0,u.slice(M));break}if(M===u.length){W(j,r.length-j,[]);break}const n=r[j],m=u[M];if(E(n,m)){j+=1,M+=1;continue}f(m)?(W(j,1,[]),j+=1):(W(j,0,[m]),M+=1)}return S}e.diff=a,e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=new A.RawContextKey("notebookEditorCursorAtBoundary","none");var d;(function(r){r.default="default",r.option="option"})(d=e.NotebookEditorPriority||(e.NotebookEditorPriority={}));function p(r){const u=r;return!!((typeof u.include=="string"||R.isRelativePattern(u.include))&&(typeof u.exclude=="string"||R.isRelativePattern(u.exclude)))}e.isDocumentExcludePattern=p;function y(r,u,f){if(Array.isArray(r.viewType)&&r.viewType.indexOf(u)>=0||r.viewType===u)return!0;if(r.filenamePattern){const E=p(r.filenamePattern)?r.filenamePattern.include:r.filenamePattern,S=p(r.filenamePattern)?r.filenamePattern.exclude:void 0;if(R.match(E,(0,k.basename)(f.fsPath).toLowerCase()))return!(S&&R.match(S,(0,k.basename)(f.fsPath).toLowerCase()))}return!1}e.notebookDocumentFilterMatch=y;class w{constructor(u){this.textModel=u}getElements(){const u=new Int32Array(this.textModel.cells.length);for(let f=0;f<this.textModel.cells.length;f++)u[f]=this.textModel.cells[f].getHashValue();return u}}e.CellSequence=w,e.NotebookSetting={displayOrder:"notebook.displayOrder",cellToolbarLocation:"notebook.cellToolbarLocation",cellToolbarVisibility:"notebook.cellToolbarVisibility",showCellStatusBar:"notebook.showCellStatusBar",textDiffEditorPreview:"notebook.diff.enablePreview",experimentalInsertToolbarAlignment:"notebook.experimental.insertToolbarAlignment",compactView:"notebook.compactView",focusIndicator:"notebook.cellFocusIndicator",insertToolbarLocation:"notebook.insertToolbarLocation",globalToolbar:"notebook.globalToolbar",undoRedoPerCell:"notebook.undoRedoPerCell",consolidatedOutputButton:"notebook.consolidatedOutputButton",showFoldingControls:"notebook.showFoldingControls",dragAndDropEnabled:"notebook.dragAndDropEnabled",cellEditorOptionsCustomizations:"notebook.editorOptionsCustomizations",consolidatedRunButton:"notebook.consolidatedRunButton",openGettingStarted:"notebook.experimental.openGettingStarted",textOutputLineLimit:"notebook.output.textLineLimit",globalToolbarShowLabel:"notebook.globalToolbarShowLabel",markupFontSize:"notebook.markup.fontSize",interactiveWindowCollapseCodeCells:"interactiveWindow.collapseCellInputCode"};var h;(function(r){r[r.Left=1]="Left",r[r.Right=2]="Right"})(h=e.CellStatusbarAlignment||(e.CellStatusbarAlignment={}));class o{static create(u){return`${o._prefix}${u}`}static parse(u){if(u.startsWith(o._prefix))return u.substring(o._prefix.length)}}e.NotebookWorkingCopyTypeIdentifier=o,o._prefix="notebook/"}),define(te[36],ne([0,1,37,38,9,26,29,11]),function(X,e,R,D,B,I,k,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.NotebookEditorSimpleWorker=e.CellSequence=void 0;function A(b){let c=(0,D.numberHash)(104579,0);for(let l=0;l<b.buffer.length;l++)c=(0,D.doHash)(b.buffer[l],c);return c}class L{constructor(c,l,t,s,i,a,d){this.handle=c,this._source=l,this.language=t,this.cellKind=s,this.outputs=i,this.metadata=a,this.internalMetadata=d,this._primaryKey=null,this._hash=null}get textBuffer(){if(this._textBuffer)return this._textBuffer;const c=new I.PieceTreeTextBufferBuilder;c.acceptChunk(Array.isArray(this._source)?this._source.join(`
`):this._source);const l=c.finish(!0);return this._textBuffer=l.create(1).textBuffer,this._textBuffer}primaryKey(){return this._primaryKey===void 0&&(this._primaryKey=(0,D.hash)(this.getValue())),this._primaryKey}getFullModelRange(){const c=this.textBuffer.getLineCount();return new F.Range(1,1,c,this.textBuffer.getLineLength(c)+1)}getValue(){const c=this.getFullModelRange();return this.textBuffer.getEOL()===`
`?this.textBuffer.getValueInRange(c,1):this.textBuffer.getValueInRange(c,2)}getComparisonValue(){return this._primaryKey!==null?this._primaryKey:(this._hash=(0,D.hash)([(0,D.hash)(this.language),(0,D.hash)(this.getValue()),this.metadata,this.internalMetadata,this.outputs.map(c=>({outputs:c.outputs.map(l=>({mime:l.mime,data:A(l.data)})),metadata:c.metadata}))]),this._hash)}getHashValue(){return this._hash!==null?this._hash:(this._hash=(0,D.hash)([(0,D.hash)(this.getValue()),this.language,this.metadata,this.internalMetadata]),this._hash)}}class N{constructor(c,l,t){this.uri=c,this.cells=l,this.metadata=t}acceptModelChanged(c){c.rawEvents.forEach(l=>{if(l.kind===k.NotebookCellsChangeType.ModelChange)this._spliceNotebookCells(l.changes);else if(l.kind===k.NotebookCellsChangeType.Move){const t=this.cells.splice(l.index,1);this.cells.splice(l.newIdx,0,...t)}else if(l.kind===k.NotebookCellsChangeType.Output){const t=this.cells[l.index];t.outputs=l.outputs}else if(l.kind===k.NotebookCellsChangeType.ChangeLanguage){const t=this.cells[l.index];t.language=l.language}else if(l.kind===k.NotebookCellsChangeType.ChangeCellMetadata){const t=this.cells[l.index];t.metadata=l.metadata}else if(l.kind===k.NotebookCellsChangeType.ChangeCellInternalMetadata){const t=this.cells[l.index];t.internalMetadata=l.internalMetadata}})}_spliceNotebookCells(c){c.reverse().forEach(l=>{const s=l[2].map(i=>new L(i.handle,i.source,i.language,i.cellKind,i.outputs,i.metadata));this.cells.splice(l[0],l[1],...s)})}}class T{constructor(c){this.textModel=c}getElements(){const c=new Int32Array(this.textModel.cells.length);for(let l=0;l<this.textModel.cells.length;l++)c[l]=this.textModel.cells[l].getComparisonValue();return c}getCellHash(c){const l=Array.isArray(c.source)?c.source.join(`
`):c.source;return(0,D.hash)([(0,D.hash)(l),c.metadata])}}e.CellSequence=T;class _{constructor(){this._models=Object.create(null)}dispose(){}acceptNewModel(c,l){this._models[c]=new N(B.URI.parse(c),l.cells.map(t=>new L(t.handle,t.source,t.language,t.cellKind,t.outputs,t.metadata)),l.metadata)}acceptModelChanged(c,l){const t=this._models[c];t&&t.acceptModelChanged(l)}acceptRemovedModel(c){!this._models[c]||delete this._models[c]}computeDiff(c,l){const t=this._getModel(c),s=this._getModel(l);return{cellsDiff:new R.LcsDiff(new T(t),new T(s)).ComputeDiff(!1)}}_getModel(c){return this._models[c]}}e.NotebookEditorSimpleWorker=_;function P(b){return new _}e.create=P})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/c722ca6c7eed3d7987c0d5c3df5c45f6b15e77d1/core/vs/workbench/contrib/notebook/common/services/notebookSimpleWorker.js.map

/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var Z=["require","exports","vs/base/common/platform","vs/base/common/extpath","vs/base/common/path","vs/base/common/types","vs/base/common/uri","vs/base/common/lifecycle","vs/base/common/strings","vs/base/common/network","vs/base/common/resources","vs/base/common/processes","vs/base/common/stream","vs/base/common/errors","vs/base/common/buffer","vs/base/common/map","vs/base/common/arrays","vs/base/common/normalization","vs/base/common/console","vs/base/common/async","vs/base/common/event","vs/base/node/decoder","vs/base/node/pfs","vs/nls!vs/base/common/errorMessage","vs/nls","vs/nls!vs/platform/sharedProcess/electron-browser/sharedProcessWorkerMain","vs/base/common/errorMessage","vs/nls!vs/base/node/processes","vs/base/node/processes","child_process","vs/base/common/objects","vs/platform/instantiation/common/instantiation","vs/platform/sharedProcess/common/sharedProcessWorkerService","vs/platform/sharedProcess/electron-browser/sharedProcessWorker","vs/base/common/cancellation","string_decoder","fs","os","util","vs/base/common/process","vs/base/common/hash","vs/platform/sharedProcess/electron-browser/sharedProcessWorkerMain","console"],x=function(H){for(var e=[],u=0,b=H.length;u<b;u++)e[u]=Z[H[u]];return e};define(Z[11],x([0,1]),function(H,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sanitizeProcessEnvironment=e.TerminateResponseCode=e.Source=void 0;var u;(function(M){M[M.stdout=0]="stdout",M[M.stderr=1]="stderr"})(u=e.Source||(e.Source={}));var b;(function(M){M[M.Success=0]="Success",M[M.Unknown=1]="Unknown",M[M.AccessDenied=2]="AccessDenied",M[M.ProcessNotFound=3]="ProcessNotFound"})(b=e.TerminateResponseCode||(e.TerminateResponseCode={}));function v(M,...d){const w=d.reduce((S,p)=>(S[p]=!0,S),{}),_=[/^ELECTRON_.+$/,/^VSCODE_(?!SHELL_LOGIN).+$/,/^SNAP(|_.*)$/,/^GDK_PIXBUF_.+$/];Object.keys(M).filter(S=>!w[S]).forEach(S=>{for(let p=0;p<_.length;p++)if(S.search(_[p])!==-1){delete M[S];break}})}e.sanitizeProcessEnvironment=v}),define(Z[12],x([0,1,13,7]),function(H,e,u,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prefixedStream=e.prefixedReadable=e.transform=e.toReadable=e.emptyStream=e.toStream=e.peekStream=e.listenStream=e.consumeStream=e.peekReadable=e.consumeReadable=e.newWriteableStream=e.isReadableBufferedStream=e.isReadableStream=void 0;function v(C){const m=C;return m?[m.on,m.pause,m.resume,m.destroy].every(T=>typeof T=="function"):!1}e.isReadableStream=v;function M(C){const m=C;return m?v(m.stream)&&Array.isArray(m.buffer)&&typeof m.ended=="boolean":!1}e.isReadableBufferedStream=M;function d(C,m){return new w(C,m)}e.newWriteableStream=d;class w{constructor(m,T){this.reducer=m,this.options=T,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(m){if(!this.state.destroyed){if(this.state.flowing)this.emitData(m);else if(this.buffer.data.push(m),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(T=>this.pendingWritePromises.push(T))}}error(m){this.state.destroyed||(this.state.flowing?this.emitError(m):this.buffer.error.push(m))}end(m){this.state.destroyed||(typeof m!="undefined"&&this.write(m),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(m){this.listeners.data.slice(0).forEach(T=>T(m))}emitError(m){this.listeners.error.length===0?(0,u.onUnexpectedError)(m):this.listeners.error.slice(0).forEach(T=>T(m))}emitEnd(){this.listeners.end.slice(0).forEach(m=>m())}on(m,T){if(!this.state.destroyed)switch(m){case"data":this.listeners.data.push(T),this.resume();break;case"end":this.listeners.end.push(T),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(T),this.state.flowing&&this.flowErrors();break}}removeListener(m,T){if(this.state.destroyed)return;let I;switch(m){case"data":I=this.listeners.data;break;case"end":I=this.listeners.end;break;case"error":I=this.listeners.error;break}if(I){const g=I.indexOf(T);g>=0&&I.splice(g,1)}}flowData(){if(this.buffer.data.length>0){const m=this.reducer(this.buffer.data);this.emitData(m),this.buffer.data.length=0;const T=[...this.pendingWritePromises];this.pendingWritePromises.length=0,T.forEach(I=>I())}}flowErrors(){if(this.listeners.error.length>0){for(const m of this.buffer.error)this.emitError(m);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}}function _(C,m){const T=[];let I;for(;(I=C.read())!==null;)T.push(I);return m(T)}e.consumeReadable=_;function k(C,m,T){const I=[];let g;for(;(g=C.read())!==null&&I.length<T;)I.push(g);return g===null&&I.length>0?m(I):{read:()=>{if(I.length>0)return I.shift();if(typeof g!="undefined"){const l=g;return g=void 0,l}return C.read()}}}e.peekReadable=k;function S(C,m){return new Promise((T,I)=>{const g=[];p(C,{onData:l=>{m&&g.push(l)},onError:l=>{m?I(l):T(void 0)},onEnd:()=>{T(m?m(g):void 0)}})})}e.consumeStream=S;function p(C,m){let T=!1;return C.on("error",I=>{T||m.onError(I)}),C.on("end",()=>{T||m.onEnd()}),C.on("data",I=>{T||m.onData(I)}),(0,b.toDisposable)(()=>T=!0)}e.listenStream=p;function q(C,m){return new Promise((T,I)=>{const g=new b.DisposableStore,l=[],t=r=>{if(l.push(r),l.length>m)return g.dispose(),C.pause(),T({stream:C,buffer:l,ended:!1})},i=r=>I(r),s=()=>T({stream:C,buffer:l,ended:!0});g.add((0,b.toDisposable)(()=>C.removeListener("error",i))),C.on("error",i),g.add((0,b.toDisposable)(()=>C.removeListener("end",s))),C.on("end",s),g.add((0,b.toDisposable)(()=>C.removeListener("data",t))),C.on("data",t)})}e.peekStream=q;function R(C,m){const T=d(m);return T.end(C),T}e.toStream=R;function c(){const C=d(()=>{throw new Error("not supported")});return C.end(),C}e.emptyStream=c;function y(C){let m=!1;return{read:()=>m?null:(m=!0,C)}}e.toReadable=y;function O(C,m,T){const I=d(T);return p(C,{onData:g=>I.write(m.data(g)),onError:g=>I.error(m.error?m.error(g):g),onEnd:()=>I.end()}),I}e.transform=O;function N(C,m,T){let I=!1;return{read:()=>{const g=m.read();return I?g:(I=!0,g!==null?T([C,g]):C)}}}e.prefixedReadable=N;function W(C,m,T){let I=!1;const g=d(T);return p(m,{onData:l=>I?g.write(l):(I=!0,g.write(T([C,l]))),onError:l=>g.error(l),onEnd:()=>{I||(I=!0,g.write(C)),g.end()}}),g}e.prefixedStream=W}),define(Z[14],x([0,1,12]),function(H,e,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeBase64=e.decodeBase64=e.prefixedBufferStream=e.prefixedBufferReadable=e.newWriteableBufferStream=e.streamToBufferReadableStream=e.bufferToStream=e.bufferedStreamToBuffer=e.streamToBuffer=e.bufferToReadable=e.readableToBuffer=e.writeUInt8=e.readUInt8=e.writeUInt32LE=e.readUInt32LE=e.writeUInt32BE=e.readUInt32BE=e.writeUInt16LE=e.readUInt16LE=e.VSBuffer=void 0;const b=typeof Buffer!="undefined";let v,M;class d{constructor(n){this.buffer=n,this.byteLength=this.buffer.byteLength}static alloc(n){return b?new d(Buffer.allocUnsafe(n)):new d(new Uint8Array(n))}static wrap(n){return b&&!Buffer.isBuffer(n)&&(n=Buffer.from(n.buffer,n.byteOffset,n.byteLength)),new d(n)}static fromString(n,a){return!(a?.dontUseNodeBuffer||!1)&&b?new d(Buffer.from(n)):(v||(v=new TextEncoder),new d(v.encode(n)))}static fromByteArray(n){const a=d.alloc(n.length);for(let f=0,A=n.length;f<A;f++)a.buffer[f]=n[f];return a}static concat(n,a){if(typeof a=="undefined"){a=0;for(let $=0,V=n.length;$<V;$++)a+=n[$].byteLength}const f=d.alloc(a);let A=0;for(let $=0,V=n.length;$<V;$++){const K=n[$];f.set(K,A),A+=K.byteLength}return f}clone(){const n=d.alloc(this.byteLength);return n.set(this),n}toString(){return b?this.buffer.toString():(M||(M=new TextDecoder),M.decode(this.buffer))}slice(n,a){return new d(this.buffer.subarray(n,a))}set(n,a){if(n instanceof d)this.buffer.set(n.buffer,a);else if(n instanceof Uint8Array)this.buffer.set(n,a);else if(n instanceof ArrayBuffer)this.buffer.set(new Uint8Array(n),a);else if(ArrayBuffer.isView(n))this.buffer.set(new Uint8Array(n.buffer,n.byteOffset,n.byteLength),a);else throw new Error("Unknown argument 'array'")}readUInt32BE(n){return k(this.buffer,n)}writeUInt32BE(n,a){S(this.buffer,n,a)}readUInt32LE(n){return p(this.buffer,n)}writeUInt32LE(n,a){q(this.buffer,n,a)}readUInt8(n){return R(this.buffer,n)}writeUInt8(n,a){c(this.buffer,n,a)}}e.VSBuffer=d;function w(r,n){return r[n+0]<<0>>>0|r[n+1]<<8>>>0}e.readUInt16LE=w;function _(r,n,a){r[a+0]=n&255,n=n>>>8,r[a+1]=n&255}e.writeUInt16LE=_;function k(r,n){return r[n]*2**24+r[n+1]*2**16+r[n+2]*2**8+r[n+3]}e.readUInt32BE=k;function S(r,n,a){r[a+3]=n,n=n>>>8,r[a+2]=n,n=n>>>8,r[a+1]=n,n=n>>>8,r[a]=n}e.writeUInt32BE=S;function p(r,n){return r[n+0]<<0>>>0|r[n+1]<<8>>>0|r[n+2]<<16>>>0|r[n+3]<<24>>>0}e.readUInt32LE=p;function q(r,n,a){r[a+0]=n&255,n=n>>>8,r[a+1]=n&255,n=n>>>8,r[a+2]=n&255,n=n>>>8,r[a+3]=n&255}e.writeUInt32LE=q;function R(r,n){return r[n]}e.readUInt8=R;function c(r,n,a){r[a]=n}e.writeUInt8=c;function y(r){return u.consumeReadable(r,n=>d.concat(n))}e.readableToBuffer=y;function O(r){return u.toReadable(r)}e.bufferToReadable=O;function N(r){return u.consumeStream(r,n=>d.concat(n))}e.streamToBuffer=N;async function W(r){return r.ended?d.concat(r.buffer):d.concat([...r.buffer,await N(r.stream)])}e.bufferedStreamToBuffer=W;function C(r){return u.toStream(r,n=>d.concat(n))}e.bufferToStream=C;function m(r){return u.transform(r,{data:n=>typeof n=="string"?d.fromString(n):d.wrap(n)},n=>d.concat(n))}e.streamToBufferReadableStream=m;function T(r){return u.newWriteableStream(n=>d.concat(n),r)}e.newWriteableBufferStream=T;function I(r,n){return u.prefixedReadable(r,n,a=>d.concat(a))}e.prefixedBufferReadable=I;function g(r,n){return u.prefixedStream(r,n,a=>d.concat(a))}e.prefixedBufferStream=g;function l(r){let n=0,a=0,f=0;const A=new Uint8Array(Math.floor(r.length/4*3)),$=K=>{switch(a){case 3:A[f++]=n|K,a=0;break;case 2:A[f++]=n|K>>>2,n=K<<6,a=3;break;case 1:A[f++]=n|K>>>4,n=K<<4,a=2;break;default:n=K<<2,a=1}};for(let K=0;K<r.length;K++){const G=r.charCodeAt(K);if(G>=65&&G<=90)$(G-65);else if(G>=97&&G<=122)$(G-97+26);else if(G>=48&&G<=57)$(G-48+52);else if(G===43||G===45)$(62);else if(G===47||G===95)$(63);else{if(G===61)break;throw new SyntaxError(`Unexpected base64 character ${r[K]}`)}}const V=f;for(;a>0;)$(0);return d.wrap(A).slice(0,V)}e.decodeBase64=l;const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function s({buffer:r},n=!0,a=!1){const f=a?i:t;let A="";const $=r.byteLength%3;let V=0;for(;V<r.byteLength-$;V+=3){const K=r[V+0],G=r[V+1],E=r[V+2];A+=f[K>>>2],A+=f[(K<<4|G>>>4)&63],A+=f[(G<<2|E>>>6)&63],A+=f[E&63]}if($===1){const K=r[V+0];A+=f[K>>>2],A+=f[K<<4&63],n&&(A+="==")}else if($===2){const K=r[V+0],G=r[V+1];A+=f[K>>>2],A+=f[(K<<4|G>>>4)&63],A+=f[G<<2&63],n&&(A+="=")}return A}e.encodeBase64=s});var se=this&&this.__classPrivateFieldSet||function(H,e,u,b,v){if(b==="m")throw new TypeError("Private method is not writable");if(b==="a"&&!v)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?H!==e||!v:!e.has(H))throw new TypeError("Cannot write private member to an object whose class did not declare it");return b==="a"?v.call(H,u):v?v.value=u:e.set(H,u),u},ie=this&&this.__classPrivateFieldGet||function(H,e,u,b){if(u==="a"&&!b)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?H!==e||!b:!e.has(H))throw new TypeError("Cannot read private member from an object whose class did not declare it");return u==="m"?b:u==="a"?b.call(H):b?b.value:e.get(H)};define(Z[15],x([0,1,16,8]),function(H,e,u,b){"use strict";var v,M,d;Object.defineProperty(e,"__esModule",{value:!0}),e.ReadonlyMapView=e.LRUCache=e.LinkedMap=e.Touch=e.ResourceMap=e.TernarySearchTree=e.UriIterator=e.PathIterator=e.ConfigKeysIterator=e.StringIterator=e.setToString=e.mapToString=e.getOrSet=void 0;function w(l,t,i){let s=l.get(t);return s===void 0&&(s=i,l.set(t,s)),s}e.getOrSet=w;function _(l){const t=[];return l.forEach((i,s)=>{t.push(`${s} => ${i}`)}),`Map(${l.size}) {${t.join(", ")}}`}e.mapToString=_;function k(l){const t=[];return l.forEach(i=>{t.push(i)}),`Set(${l.size}) {${t.join(", ")}}`}e.setToString=k;class S{constructor(){this._value="",this._pos=0}reset(t){return this._value=t,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(t){const i=t.charCodeAt(0),s=this._value.charCodeAt(this._pos);return i-s}value(){return this._value[this._pos]}}e.StringIterator=S;class p{constructor(t=!0){this._caseSensitive=t}reset(t){return this._value=t,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let t=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(t)this._from++;else break;else t=!1;return this}cmp(t){return this._caseSensitive?(0,b.compareSubstring)(t,this._value,0,t.length,this._from,this._to):(0,b.compareSubstringIgnoreCase)(t,this._value,0,t.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.ConfigKeysIterator=p;class q{constructor(t=!0,i=!0){this._splitOnBackslash=t,this._caseSensitive=i}reset(t){this._from=0,this._to=0,this._value=t,this._valueLen=t.length;for(let i=t.length-1;i>=0;i--,this._valueLen--){const s=this._value.charCodeAt(i);if(!(s===47||this._splitOnBackslash&&s===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let t=!0;for(;this._to<this._valueLen;this._to++){const i=this._value.charCodeAt(this._to);if(i===47||this._splitOnBackslash&&i===92)if(t)this._from++;else break;else t=!1}return this}cmp(t){return this._caseSensitive?(0,b.compareSubstring)(t,this._value,0,t.length,this._from,this._to):(0,b.compareSubstringIgnoreCase)(t,this._value,0,t.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.PathIterator=q;var R;(function(l){l[l.Scheme=1]="Scheme",l[l.Authority=2]="Authority",l[l.Path=3]="Path",l[l.Query=4]="Query",l[l.Fragment=5]="Fragment"})(R||(R={}));class c{constructor(t){this._ignorePathCasing=t,this._states=[],this._stateIdx=0}reset(t){return this._value=t,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new q(!1,!this._ignorePathCasing(t)),this._pathIterator.reset(t.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(t){if(this._states[this._stateIdx]===1)return(0,b.compareIgnoreCase)(t,this._value.scheme);if(this._states[this._stateIdx]===2)return(0,b.compareIgnoreCase)(t,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(t);if(this._states[this._stateIdx]===4)return(0,b.compare)(t,this._value.query);if(this._states[this._stateIdx]===5)return(0,b.compare)(t,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}e.UriIterator=c;class y{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const t=this.right;return this.right=t.left,t.left=this,this.updateHeight(),t.updateHeight(),t}rotateRight(){const t=this.left;return this.left=t.right,t.right=this,this.updateHeight(),t.updateHeight(),t}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}var O;(function(l){l[l.Left=-1]="Left",l[l.Mid=0]="Mid",l[l.Right=1]="Right"})(O||(O={}));class N{constructor(t){this._iter=t}static forUris(t=()=>!1){return new N(new c(t))}static forPaths(t=!1){return new N(new q(void 0,!t))}static forStrings(){return new N(new S)}static forConfigKeys(){return new N(new p)}clear(){this._root=void 0}fill(t,i){if(i){const s=i.slice(0);(0,u.shuffle)(s);for(let r of s)this.set(r,t)}else{const s=t.slice(0);(0,u.shuffle)(s);for(let r of s)this.set(r[0],r[1])}}set(t,i){const s=this._iter.reset(t);let r;this._root||(this._root=new y,this._root.segment=s.value());const n=[];for(r=this._root;;){const f=s.cmp(r.segment);if(f>0)r.left||(r.left=new y,r.left.segment=s.value()),n.push([-1,r]),r=r.left;else if(f<0)r.right||(r.right=new y,r.right.segment=s.value()),n.push([1,r]),r=r.right;else if(s.hasNext())s.next(),r.mid||(r.mid=new y,r.mid.segment=s.value()),n.push([0,r]),r=r.mid;else break}const a=r.value;r.value=i,r.key=t;for(let f=n.length-1;f>=0;f--){const A=n[f][1];A.updateHeight();const $=A.balanceFactor();if($<-1||$>1){const V=n[f][0],K=n[f+1][0];if(V===1&&K===1)n[f][1]=A.rotateLeft();else if(V===-1&&K===-1)n[f][1]=A.rotateRight();else if(V===1&&K===-1)A.right=n[f+1][1]=n[f+1][1].rotateRight(),n[f][1]=A.rotateLeft();else if(V===-1&&K===1)A.left=n[f+1][1]=n[f+1][1].rotateLeft(),n[f][1]=A.rotateRight();else throw new Error;if(f>0)switch(n[f-1][0]){case-1:n[f-1][1].left=n[f][1];break;case 1:n[f-1][1].right=n[f][1];break;case 0:n[f-1][1].mid=n[f][1];break}else this._root=n[0][1]}}return a}get(t){return this._getNode(t)?.value}_getNode(t){const i=this._iter.reset(t);let s=this._root;for(;s;){const r=i.cmp(s.segment);if(r>0)s=s.left;else if(r<0)s=s.right;else if(i.hasNext())i.next(),s=s.mid;else break}return s}has(t){const i=this._getNode(t);return!(i?.value===void 0&&i?.mid===void 0)}delete(t){return this._delete(t,!1)}deleteSuperstr(t){return this._delete(t,!0)}_delete(t,i){const s=this._iter.reset(t),r=[];let n=this._root;for(;n;){const a=s.cmp(n.segment);if(a>0)r.push([-1,n]),n=n.left;else if(a<0)r.push([1,n]),n=n.right;else if(s.hasNext())s.next(),r.push([0,n]),n=n.mid;else break}if(!!n){if(i?(n.left=void 0,n.mid=void 0,n.right=void 0,n.height=1):(n.key=void 0,n.value=void 0),!n.mid&&!n.value)if(n.left&&n.right){const a=this._min(n.right),{key:f,value:A,segment:$}=a;this._delete(a.key,!1),n.key=f,n.value=A,n.segment=$}else{const a=n.left??n.right;if(r.length>0){const[f,A]=r[r.length-1];switch(f){case-1:A.left=a;break;case 0:A.mid=a;break;case 1:A.right=a;break}}else this._root=a}for(let a=r.length-1;a>=0;a--){const f=r[a][1];f.updateHeight();const A=f.balanceFactor();if(A>1?(f.right.balanceFactor()>=0||(f.right=f.right.rotateRight()),r[a][1]=f.rotateLeft()):A<-1&&(f.left.balanceFactor()<=0||(f.left=f.left.rotateLeft()),r[a][1]=f.rotateRight()),a>0)switch(r[a-1][0]){case-1:r[a-1][1].left=r[a][1];break;case 1:r[a-1][1].right=r[a][1];break;case 0:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}}_min(t){for(;t.left;)t=t.left;return t}findSubstr(t){const i=this._iter.reset(t);let s=this._root,r;for(;s;){const n=i.cmp(s.segment);if(n>0)s=s.left;else if(n<0)s=s.right;else if(i.hasNext())i.next(),r=s.value||r,s=s.mid;else break}return s&&s.value||r}findSuperstr(t){const i=this._iter.reset(t);let s=this._root;for(;s;){const r=i.cmp(s.segment);if(r>0)s=s.left;else if(r<0)s=s.right;else if(i.hasNext())i.next(),s=s.mid;else return s.mid?this._entries(s.mid):void 0}}forEach(t){for(const[i,s]of this)t(s,i)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(t){!t||(t.left&&(yield*this._entries(t.left)),t.value&&(yield[t.key,t.value]),t.mid&&(yield*this._entries(t.mid)),t.right&&(yield*this._entries(t.right)))}_isBalanced(){const t=i=>{if(!i)return!0;const s=i.balanceFactor();return s<-1||s>1?!1:t(i.left)&&t(i.right)};return t(this._root)}}e.TernarySearchTree=N;class W{constructor(t,i){this.uri=t,this.value=i}}class C{constructor(t,i){this[v]="ResourceMap",t instanceof C?(this.map=new Map(t.map),this.toKey=i??C.defaultToKey):(this.map=new Map,this.toKey=t??C.defaultToKey)}set(t,i){return this.map.set(this.toKey(t),new W(t,i)),this}get(t){return this.map.get(this.toKey(t))?.value}has(t){return this.map.has(this.toKey(t))}get size(){return this.map.size}clear(){this.map.clear()}delete(t){return this.map.delete(this.toKey(t))}forEach(t,i){typeof i!="undefined"&&(t=t.bind(i));for(let[s,r]of this.map)t(r.value,r.uri,this)}*values(){for(let t of this.map.values())yield t.value}*keys(){for(let t of this.map.values())yield t.uri}*entries(){for(let t of this.map.values())yield[t.uri,t.value]}*[(v=Symbol.toStringTag,Symbol.iterator)](){for(let[,t]of this.map)yield[t.uri,t.value]}}e.ResourceMap=C,C.defaultToKey=l=>l.toString();var m;(function(l){l[l.None=0]="None",l[l.AsOld=1]="AsOld",l[l.AsNew=2]="AsNew"})(m=e.Touch||(e.Touch={}));class T{constructor(){this[M]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(t){return this._map.has(t)}get(t,i=0){const s=this._map.get(t);if(!!s)return i!==0&&this.touch(s,i),s.value}set(t,i,s=0){let r=this._map.get(t);if(r)r.value=i,s!==0&&this.touch(r,s);else{switch(r={key:t,value:i,next:void 0,previous:void 0},s){case 0:this.addItemLast(r);break;case 1:this.addItemFirst(r);break;case 2:this.addItemLast(r);break;default:this.addItemLast(r);break}this._map.set(t,r),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){const i=this._map.get(t);if(!!i)return this._map.delete(t),this.removeItem(i),this._size--,i.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,i){const s=this._state;let r=this._head;for(;r;){if(i?t.bind(i)(r.value,r.key,this):t(r.value,r.key,this),this._state!==s)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const t=this,i=this._state;let s=this._head;const r={[Symbol.iterator](){return r},next(){if(t._state!==i)throw new Error("LinkedMap got modified during iteration.");if(s){const n={value:s.key,done:!1};return s=s.next,n}else return{value:void 0,done:!0}}};return r}values(){const t=this,i=this._state;let s=this._head;const r={[Symbol.iterator](){return r},next(){if(t._state!==i)throw new Error("LinkedMap got modified during iteration.");if(s){const n={value:s.value,done:!1};return s=s.next,n}else return{value:void 0,done:!0}}};return r}entries(){const t=this,i=this._state;let s=this._head;const r={[Symbol.iterator](){return r},next(){if(t._state!==i)throw new Error("LinkedMap got modified during iteration.");if(s){const n={value:[s.key,s.value],done:!1};return s=s.next,n}else return{value:void 0,done:!0}}};return r}[(M=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let i=this._head,s=this.size;for(;i&&s>t;)this._map.delete(i.key),i=i.next,s--;this._head=i,this._size=s,i&&(i.previous=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{const i=t.next,s=t.previous;if(!i||!s)throw new Error("Invalid list");i.previous=s,s.next=i}t.next=void 0,t.previous=void 0,this._state++}touch(t,i){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(i!==1&&i!==2)){if(i===1){if(t===this._head)return;const s=t.next,r=t.previous;t===this._tail?(r.next=void 0,this._tail=r):(s.previous=r,r.next=s),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(i===2){if(t===this._tail)return;const s=t.next,r=t.previous;t===this._head?(s.previous=void 0,this._head=s):(s.previous=r,r.next=s),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){const t=[];return this.forEach((i,s)=>{t.push([s,i])}),t}fromJSON(t){this.clear();for(const[i,s]of t)this.set(i,s)}}e.LinkedMap=T;class I extends T{constructor(t,i=1){super();this._limit=t,this._ratio=Math.min(Math.max(0,i),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,i=2){return super.get(t,i)}peek(t){return super.get(t,0)}set(t,i){return super.set(t,i,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}e.LRUCache=I;class g{constructor(t){d.set(this,void 0),se(this,d,t,"f")}get size(){return ie(this,d,"f").size}forEach(t,i){ie(this,d,"f").forEach(t,i)}get(t){return ie(this,d,"f").get(t)}has(t){return ie(this,d,"f").has(t)}entries(){return ie(this,d,"f").entries()}keys(){return ie(this,d,"f").keys()}values(){return ie(this,d,"f").values()}[(d=new WeakMap,Symbol.iterator)](){return ie(this,d,"f").entries()}}e.ReadonlyMapView=g}),define(Z[17],x([0,1,15]),function(H,e,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.removeAccents=e.normalizeNFD=e.normalizeNFC=void 0;const b=new u.LRUCache(1e4);function v(k){return _(k,"NFC",b)}e.normalizeNFC=v;const M=new u.LRUCache(1e4);function d(k){return _(k,"NFD",M)}e.normalizeNFD=d;const w=/[^\u0000-\u0080]/;function _(k,S,p){if(!k)return k;const q=p.get(k);if(q)return q;let R;return w.test(k)?R=k.normalize(S):R=k,p.set(k,R),R}e.removeAccents=function(){const k=/[\u0300-\u036f]/g;return function(S){return d(S).replace(k,"")}}()}),define(Z[3],x([0,1,4,2,8,5]),function(H,e,u,b,v,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function d(i){return i===47||i===92}e.isPathSeparator=d;function w(i){return i.replace(/[\\/]/g,u.posix.sep)}e.toSlashes=w;function _(i){return i.indexOf("/")===-1&&(i=w(i)),/^[a-zA-Z]:(\/|$)/.test(i)&&(i="/"+i),i}e.toPosixPath=_;function k(i,s=u.posix.sep){if(!i)return"";const r=i.length,n=i.charCodeAt(0);if(d(n)){if(d(i.charCodeAt(1))&&!d(i.charCodeAt(2))){let f=3;const A=f;for(;f<r&&!d(i.charCodeAt(f));f++);if(A!==f&&!d(i.charCodeAt(f+1))){for(f+=1;f<r;f++)if(d(i.charCodeAt(f)))return i.slice(0,f+1).replace(/[\\/]/g,s)}}return s}else if(N(n)&&i.charCodeAt(1)===58)return d(i.charCodeAt(2))?i.slice(0,2)+s:i.slice(0,2);let a=i.indexOf("://");if(a!==-1){for(a+=3;a<r;a++)if(d(i.charCodeAt(a)))return i.slice(0,a+1)}return""}e.getRoot=k;function S(i){if(!b.isWindows||!i||i.length<5)return!1;let s=i.charCodeAt(0);if(s!==92||(s=i.charCodeAt(1),s!==92))return!1;let r=2;const n=r;for(;r<i.length&&(s=i.charCodeAt(r),s!==92);r++);return!(n===r||(s=i.charCodeAt(r+1),isNaN(s)||s===92))}e.isUNC=S;const p=/[\\/:\*\?"<>\|]/g,q=/[\\/]/g,R=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function c(i,s=b.isWindows){const r=s?p:q;return!(!i||i.length===0||/^\s+$/.test(i)||(r.lastIndex=0,r.test(i))||s&&R.test(i)||i==="."||i===".."||s&&i[i.length-1]==="."||s&&i.length!==i.trim().length||i.length>255)}e.isValidBasename=c;function y(i,s,r){const n=i===s;return!r||n?n:!i||!s?!1:(0,v.equalsIgnoreCase)(i,s)}e.isEqual=y;function O(i,s,r,n=u.sep){if(i===s)return!0;if(!i||!s||s.length>i.length)return!1;if(r){if(!(0,v.startsWithIgnoreCase)(i,s))return!1;if(s.length===i.length)return!0;let f=s.length;return s.charAt(s.length-1)===n&&f--,i.charAt(f)===n}return s.charAt(s.length-1)!==n&&(s+=n),i.indexOf(s)===0}e.isEqualOrParent=O;function N(i){return i>=65&&i<=90||i>=97&&i<=122}e.isWindowsDriveLetter=N;function W(i,s){return b.isWindows&&i.endsWith(":")&&(i+=u.sep),(0,u.isAbsolute)(i)||(i=(0,u.join)(s,i)),i=(0,u.normalize)(i),b.isWindows?(i=(0,v.rtrim)(i,u.sep),i.endsWith(":")&&(i+=u.sep)):(i=(0,v.rtrim)(i,u.sep),i||(i=u.sep)),i}e.sanitizeFilePath=W;function C(i){const s=(0,u.normalize)(i);return b.isWindows?i.length>3?!1:m(s)&&(i.length===2||s.charCodeAt(2)===92):s===u.posix.sep}e.isRootOrDriveLetter=C;function m(i,s){return(s!==void 0?s:b.isWindows)?N(i.charCodeAt(0))&&i.charCodeAt(1)===58:!1}e.hasDriveLetter=m;function T(i){return m(i)?i[0]:void 0}e.getDriveLetter=T;function I(i,s,r){return s.length>i.length?-1:i===s?0:(r&&(i=i.toLowerCase(),s=s.toLowerCase()),i.indexOf(s))}e.indexOfPath=I;function g(i){const s=i.split(":");let r,n,a;for(const f of s){const A=Number(f);(0,M.isNumber)(A)?n===void 0?n=A:a===void 0&&(a=A):r=r?[r,f].join(":"):f}if(!r)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:r,line:n!==void 0?n:void 0,column:a!==void 0?a:n!==void 0?1:void 0}}e.parseLineAndColumnAware=g;const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function t(i,s,r=8){let n="";for(let f=0;f<r;f++)n+=l.charAt(Math.floor(Math.random()*l.length));let a;return s?a=`${s}-${n}`:a=n,i?(0,u.join)(i,a):a}e.randomPath=t}),define(Z[18],x([0,1,6]),function(H,e,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.log=e.getFirstFrame=e.parse=e.isRemoteConsoleLog=void 0;function b(k){const S=k;return S&&typeof S.type=="string"&&typeof S.severity=="string"}e.isRemoteConsoleLog=b;function v(k){const S=[];let p;try{const q=JSON.parse(k.arguments),R=q[q.length-1];R&&R.__$stack&&(q.pop(),p=R.__$stack),S.push(...q)}catch{S.push("Unable to log remote console arguments",k.arguments)}return{args:S,stack:p}}e.parse=v;function M(k){if(typeof k!="string")return M(v(k).stack);const S=k;if(S){const p=d(S),q=/at [^\/]*((?:(?:[a-zA-Z]+:)|(?:[\/])|(?:\\\\))(?:.+)):(\d+):(\d+)/.exec(p||"");if(q&&q.length===4)return{uri:u.URI.file(q[1]),line:Number(q[2]),column:Number(q[3])}}}e.getFirstFrame=M;function d(k){if(!k)return k;const S=k.indexOf(`
`);return S===-1?k:k.substring(0,S)}function w(k,S){const{args:p,stack:q}=v(k),R=typeof p[0]=="string"&&p.length===1;let c=d(q);c&&(c=`(${c.trim()})`);let y=[];if(typeof p[0]=="string"?c&&R?y=[`%c[${S}] %c${p[0]} %c${c}`,_("blue"),_(""),_("grey")]:y=[`%c[${S}] %c${p[0]}`,_("blue"),_(""),...p.slice(1)]:y=[`%c[${S}]%`,_("blue"),...p],c&&!R&&y.push(c),typeof console[k.severity]!="function")throw new Error("Unknown console method");console[k.severity].apply(console,y)}e.log=w;function _(k){return`color: ${k}`}}),define(Z[9],x([0,1,2,6]),function(H,e,u,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileAccess=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var v;(function(w){w.inMemory="inmemory",w.vscode="vscode",w.internal="private",w.walkThrough="walkThrough",w.walkThroughSnippet="walkThroughSnippet",w.http="http",w.https="https",w.file="file",w.mailto="mailto",w.untitled="untitled",w.data="data",w.command="command",w.vscodeRemote="vscode-remote",w.vscodeRemoteResource="vscode-remote-resource",w.userData="vscode-userdata",w.vscodeCustomEditor="vscode-custom-editor",w.vscodeNotebook="vscode-notebook",w.vscodeNotebookCell="vscode-notebook-cell",w.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",w.vscodeNotebookCellOutput="vscode-notebook-cell-output",w.vscodeInteractive="vscode-interactive",w.vscodeInteractiveInput="vscode-interactive-input",w.vscodeSettings="vscode-settings",w.vscodeWorkspaceTrust="vscode-workspace-trust",w.vscodeTerminal="vscode-terminal",w.webviewPanel="webview-panel",w.vscodeWebview="vscode-webview",w.extension="extension",w.vscodeFileResource="vscode-file",w.tmp="tmp",w.vsls="vsls"})(v=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class M{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null}setPreferredWebSchema(_){this._preferredWebSchema=_}setDelegate(_){this._delegate=_}set(_,k,S){this._hosts[_]=k,this._ports[_]=S}setConnectionToken(_,k){this._connectionTokens[_]=k}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(_){if(this._delegate)return this._delegate(_);const k=_.authority;let S=this._hosts[k];S&&S.indexOf(":")!==-1&&(S=`[${S}]`);const p=this._ports[k],q=this._connectionTokens[k];let R=`path=${encodeURIComponent(_.path)}`;return typeof q=="string"&&(R+=`&${e.connectionTokenQueryName}=${encodeURIComponent(q)}`),b.URI.from({scheme:u.isWeb?this._preferredWebSchema:v.vscodeRemoteResource,authority:`${S}:${p}`,path:"/vscode-remote-resource",query:R})}}e.RemoteAuthorities=new M;class d{asBrowserUri(_,k){const S=this.toUri(_,k);return S.scheme===v.vscodeRemote?e.RemoteAuthorities.rewrite(S):S.scheme===v.file&&(u.isNative||u.isWebWorker&&u.globals.origin===`${v.vscodeFileResource}://${d.FALLBACK_AUTHORITY}`)?S.with({scheme:v.vscodeFileResource,authority:S.authority||d.FALLBACK_AUTHORITY,query:null,fragment:null}):S}asFileUri(_,k){const S=this.toUri(_,k);return S.scheme===v.vscodeFileResource?S.with({scheme:v.file,authority:S.authority!==d.FALLBACK_AUTHORITY?S.authority:null,query:null,fragment:null}):S}toUri(_,k){return b.URI.isUri(_)?_:b.URI.parse(k.toUrl(_))}}d.FALLBACK_AUTHORITY="vscode-app",e.FileAccess=new d}),define(Z[10],x([0,1,3,9,4,2,8,6]),function(H,e,u,b,v,M,d,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function _(R){return(0,w.uriToFsPath)(R,!0)}e.originalFSPath=_;class k{constructor(c){this._ignorePathCasing=c}compare(c,y,O=!1){return c===y?0:(0,d.compare)(this.getComparisonKey(c,O),this.getComparisonKey(y,O))}isEqual(c,y,O=!1){return c===y?!0:!c||!y?!1:this.getComparisonKey(c,O)===this.getComparisonKey(y,O)}getComparisonKey(c,y=!1){return c.with({path:this._ignorePathCasing(c)?c.path.toLowerCase():void 0,fragment:y?null:void 0}).toString()}ignorePathCasing(c){return this._ignorePathCasing(c)}isEqualOrParent(c,y,O=!1){if(c.scheme===y.scheme){if(c.scheme===b.Schemas.file)return u.isEqualOrParent(_(c),_(y),this._ignorePathCasing(c))&&c.query===y.query&&(O||c.fragment===y.fragment);if((0,e.isEqualAuthority)(c.authority,y.authority))return u.isEqualOrParent(c.path,y.path,this._ignorePathCasing(c),"/")&&c.query===y.query&&(O||c.fragment===y.fragment)}return!1}joinPath(c,...y){return w.URI.joinPath(c,...y)}basenameOrAuthority(c){return(0,e.basename)(c)||c.authority}basename(c){return v.posix.basename(c.path)}extname(c){return v.posix.extname(c.path)}dirname(c){if(c.path.length===0)return c;let y;return c.scheme===b.Schemas.file?y=w.URI.file(v.dirname(_(c))).path:(y=v.posix.dirname(c.path),c.authority&&y.length&&y.charCodeAt(0)!==47&&(console.error(`dirname("${c.toString})) resulted in a relative path`),y="/")),c.with({path:y})}normalizePath(c){if(!c.path.length)return c;let y;return c.scheme===b.Schemas.file?y=w.URI.file(v.normalize(_(c))).path:y=v.posix.normalize(c.path),c.with({path:y})}relativePath(c,y){if(c.scheme!==y.scheme||!(0,e.isEqualAuthority)(c.authority,y.authority))return;if(c.scheme===b.Schemas.file){const W=v.relative(_(c),_(y));return M.isWindows?u.toSlashes(W):W}let O=c.path||"/",N=y.path||"/";if(this._ignorePathCasing(c)){let W=0;for(const C=Math.min(O.length,N.length);W<C&&!(O.charCodeAt(W)!==N.charCodeAt(W)&&O.charAt(W).toLowerCase()!==N.charAt(W).toLowerCase());W++);O=N.substr(0,W)+O.substr(W)}return v.posix.relative(O,N)}resolvePath(c,y){if(c.scheme===b.Schemas.file){const O=w.URI.file(v.resolve(_(c),y));return c.with({authority:O.authority,path:O.path})}return y=u.toPosixPath(y),c.with({path:v.posix.resolve(c.path,y)})}isAbsolutePath(c){return!!c.path&&c.path[0]==="/"}isEqualAuthority(c,y){return c===y||c!==void 0&&y!==void 0&&(0,d.equalsIgnoreCase)(c,y)}hasTrailingPathSeparator(c,y=v.sep){if(c.scheme===b.Schemas.file){const O=_(c);return O.length>u.getRoot(O).length&&O[O.length-1]===y}else{const O=c.path;return O.length>1&&O.charCodeAt(O.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(c.fsPath)}}removeTrailingPathSeparator(c,y=v.sep){return(0,e.hasTrailingPathSeparator)(c,y)?c.with({path:c.path.substr(0,c.path.length-1)}):c}addTrailingPathSeparator(c,y=v.sep){let O=!1;if(c.scheme===b.Schemas.file){const N=_(c);O=N!==void 0&&N.length===u.getRoot(N).length&&N[N.length-1]===y}else{y="/";const N=c.path;O=N.length===1&&N.charCodeAt(N.length-1)===47}return!O&&!(0,e.hasTrailingPathSeparator)(c,y)?c.with({path:c.path+"/"}):c}}e.ExtUri=k,e.extUri=new k(()=>!1),e.extUriBiasedIgnorePathCase=new k(R=>R.scheme===b.Schemas.file?!M.isLinux:!0),e.extUriIgnorePathCase=new k(R=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function S(R,c){const y=[];for(let O=0;O<R.length;O++){const N=c(R[O]);R.some((W,C)=>C===O?!1:(0,e.isEqualOrParent)(N,c(W)))||y.push(R[O])}return y}e.distinctParents=S;var p;(function(R){R.META_DATA_LABEL="label",R.META_DATA_DESCRIPTION="description",R.META_DATA_SIZE="size",R.META_DATA_MIME="mime";function c(y){const O=new Map;y.path.substring(y.path.indexOf(";")+1,y.path.lastIndexOf(";")).split(";").forEach(C=>{const[m,T]=C.split(":");m&&T&&O.set(m,T)});const W=y.path.substring(0,y.path.indexOf(";"));return W&&O.set(R.META_DATA_MIME,W),O}R.parseMetaData=c})(p=e.DataUri||(e.DataUri={}));function q(R,c,y){if(c){let O=R.path;return O&&O[0]!==v.posix.sep&&(O=v.posix.sep+O),R.with({scheme:y,authority:c,path:O})}return R.with({scheme:y})}e.toLocalResource=q}),define(Z[19],x([0,1,34,13,20,7,10,2]),function(H,e,u,b,v,M,d,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.MicrotaskDelay=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function _(D){return!!D&&typeof D.then=="function"}e.isThenable=_;function k(D){const o=new u.CancellationTokenSource,h=D(o.token),P=new Promise((L,j)=>{const ee=o.token.onCancellationRequested(()=>{ee.dispose(),o.dispose(),j(new b.CancellationError)});Promise.resolve(h).then(te=>{ee.dispose(),o.dispose(),L(te)},te=>{ee.dispose(),o.dispose(),j(te)})});return new class{cancel(){o.cancel()}then(L,j){return P.then(L,j)}catch(L){return this.then(void 0,L)}finally(L){return P.finally(L)}}}e.createCancelablePromise=k;function S(D,o,h){return new Promise((P,L)=>{const j=o.onCancellationRequested(()=>{j.dispose(),P(h)});D.then(P,L).finally(()=>j.dispose())})}e.raceCancellation=S;function p(D,o){return new Promise((h,P)=>{const L=o.onCancellationRequested(()=>{L.dispose(),P(new b.CancellationError)});D.then(h,P).finally(()=>L.dispose())})}e.raceCancellationError=p;async function q(D){let o=-1;const h=D.map((L,j)=>L.then(ee=>(o=j,ee))),P=await Promise.race(h);return D.forEach((L,j)=>{j!==o&&L.cancel()}),P}e.raceCancellablePromises=q;function R(D,o,h){let P;const L=setTimeout(()=>{P?.(void 0),h?.()},o);return Promise.race([D.finally(()=>clearTimeout(L)),new Promise(j=>P=j)])}e.raceTimeout=R;function c(D){return new Promise((o,h)=>{const P=D();_(P)?P.then(o,h):o(P)})}e.asPromise=c;class y{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(o){if(this.activePromise){if(this.queuedPromiseFactory=o,!this.queuedPromise){const h=()=>{this.queuedPromise=null;const P=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,P};this.queuedPromise=new Promise(P=>{this.activePromise.then(h,h).then(P)})}return new Promise((h,P)=>{this.queuedPromise.then(h,P)})}return this.activePromise=o(),new Promise((h,P)=>{this.activePromise.then(L=>{this.activePromise=null,h(L)},L=>{this.activePromise=null,P(L)})})}}e.Throttler=y;class O{constructor(){this.current=Promise.resolve(null)}queue(o){return this.current=this.current.then(()=>o(),()=>o())}}e.Sequencer=O;class N{constructor(){this.promiseMap=new Map}queue(o,h){const L=(this.promiseMap.get(o)??Promise.resolve()).catch(()=>{}).then(h).finally(()=>{this.promiseMap.get(o)===L&&this.promiseMap.delete(o)});return this.promiseMap.set(o,L),L}}e.SequencerByKey=N;const W=(D,o)=>{let h=!0;const P=setTimeout(()=>{h=!1,o()},D);return{isTriggered:()=>h,dispose:()=>{clearTimeout(P),h=!1}}},C=D=>{let o=!0;return queueMicrotask(()=>{o&&(o=!1,D())}),{isTriggered:()=>o,dispose:()=>{o=!1}}};e.MicrotaskDelay=Symbol("MicrotaskDelay");class m{constructor(o){this.defaultDelay=o,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(o,h=this.defaultDelay){this.task=o,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((L,j)=>{this.doResolve=L,this.doReject=j}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const L=this.task;return this.task=null,L()}}));const P=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=h===e.MicrotaskDelay?C(P):W(h,P),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject&&this.doReject(new b.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}e.Delayer=m;class T{constructor(o){this.delayer=new m(o),this.throttler=new y}trigger(o,h){return this.delayer.trigger(()=>this.throttler.queue(o),h)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose()}}e.ThrottledDelayer=T;class I{constructor(){this._isOpen=!1,this._promise=new Promise((o,h)=>{this._completePromise=o})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}e.Barrier=I;class g extends I{constructor(o){super();this._timeout=setTimeout(()=>this.open(),o)}open(){clearTimeout(this._timeout),super.open()}}e.AutoOpenBarrier=g;function l(D,o){return o?new Promise((h,P)=>{const L=setTimeout(()=>{j.dispose(),h()},D),j=o.onCancellationRequested(()=>{clearTimeout(L),j.dispose(),P(new b.CancellationError)})}):k(h=>l(D,h))}e.timeout=l;function t(D,o=0){const h=setTimeout(D,o);return(0,M.toDisposable)(()=>clearTimeout(h))}e.disposableTimeout=t;function i(D){const o=[];let h=0;const P=D.length;function L(){return h<P?D[h++]():null}function j(ee){ee!=null&&o.push(ee);const te=L();return te?te.then(j):Promise.resolve(o)}return Promise.resolve(null).then(j)}e.sequence=i;function s(D,o=P=>!!P,h=null){let P=0;const L=D.length,j=()=>{if(P>=L)return Promise.resolve(h);const ee=D[P++];return Promise.resolve(ee()).then(re=>o(re)?Promise.resolve(re):j())};return j()}e.first=s;function r(D,o=P=>!!P,h=null){if(D.length===0)return Promise.resolve(h);let P=D.length;const L=()=>{P=-1;for(const j of D)j.cancel?.()};return new Promise((j,ee)=>{for(const te of D)te.then(re=>{--P>=0&&o(re)?(L(),j(re)):P===0&&j(h)}).catch(re=>{--P>=0&&(L(),ee(re))})})}e.firstParallel=r;class n{constructor(o){this._size=0,this.maxDegreeOfParalellism=o,this.outstandingPromises=[],this.runningPromises=0,this._onFinished=new v.Emitter}get onFinished(){return this._onFinished.event}get size(){return this._size}queue(o){return this._size++,new Promise((h,P)=>{this.outstandingPromises.push({factory:o,c:h,e:P}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const o=this.outstandingPromises.shift();this.runningPromises++;const h=o.factory();h.then(o.c,o.e),h.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._size--,this.runningPromises--,this.outstandingPromises.length>0?this.consume():this._onFinished.fire()}dispose(){this._onFinished.dispose()}}e.Limiter=n;class a extends n{constructor(){super(1)}}e.Queue=a;class f{constructor(){this.queues=new Map,this.drainers=new Set}async whenDrained(){if(this.isDrained())return;const o=new z;return this.drainers.add(o),o.p}isDrained(){for(const[,o]of this.queues)if(o.size>0)return!1;return!0}queueFor(o,h=d.extUri){const P=h.getComparisonKey(o);let L=this.queues.get(P);return L||(L=new a,v.Event.once(L.onFinished)(()=>{L?.dispose(),this.queues.delete(P),this.onDidQueueFinish()}),this.queues.set(P,L)),L}onDidQueueFinish(){!this.isDrained()||this.releaseDrainers()}releaseDrainers(){for(const o of this.drainers)o.complete();this.drainers.clear()}dispose(){for(const[,o]of this.queues)o.dispose();this.queues.clear(),this.releaseDrainers()}}e.ResourceQueue=f;class A{constructor(o,h){this._token=-1,typeof o=="function"&&typeof h=="number"&&this.setIfNotSet(o,h)}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(o,h){this.cancel(),this._token=setTimeout(()=>{this._token=-1,o()},h)}setIfNotSet(o,h){this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,o()},h))}}e.TimeoutTimer=A;class ${constructor(){this._token=-1}dispose(){this.cancel()}cancel(){this._token!==-1&&(clearInterval(this._token),this._token=-1)}cancelAndSet(o,h){this.cancel(),this._token=setInterval(()=>{o()},h)}}e.IntervalTimer=$;class V{constructor(o,h){this.timeoutToken=-1,this.runner=o,this.timeout=h,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(o=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,o)}get delay(){return this.timeout}set delay(o){this.timeout=o}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner&&this.runner()}}e.RunOnceScheduler=V;class K{constructor(o,h){h%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${h}ms is not a multiple of 1000ms.`),this.runner=o,this.timeout=h,this.counter=0,this.intervalToken=-1,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=-1)}schedule(o=this.timeout){o%1e3!=0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${o}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(o/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==-1}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=-1,this.runner&&this.runner())}}e.ProcessTimeRunOnceScheduler=K;class G extends V{constructor(o,h){super(o,h);this.units=[]}work(o){this.units.push(o),this.isScheduled()||this.schedule()}doRun(){const o=this.units;this.units=[],this.runner&&this.runner(o)}dispose(){this.units=[],super.dispose()}}e.RunOnceWorker=G;class E extends M.Disposable{constructor(o,h){super();this.options=o,this.handler=h,this.pendingWork=[],this.throttler=this._register(new M.MutableDisposable),this.disposed=!1}get pending(){return this.pendingWork.length}work(o){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+o.length>this.options.maxBufferedWork)return!1}else if(this.pending+o.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}return this.pendingWork.push(...o),this.throttler.value||this.doWork(),!0}doWork(){this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&(this.throttler.value=new V(()=>{this.throttler.clear(),this.doWork()},this.options.throttleDelay),this.throttler.value.schedule())}dispose(){super.dispose(),this.disposed=!0}}e.ThrottledWorker=E,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=D=>{(0,w.setTimeout0)(()=>{if(o)return;const h=Date.now()+15;D(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,h-Date.now())}}))});let o=!1;return{dispose(){o||(o=!0)}}}:e.runWhenIdle=(D,o)=>{const h=requestIdleCallback(D,typeof o=="number"?{timeout:o}:void 0);let P=!1;return{dispose(){P||(P=!0,cancelIdleCallback(h))}}}}();class U{constructor(o){this._didRun=!1,this._executor=()=>{try{this._value=o()}catch(h){this._error=h}finally{this._didRun=!0}},this._handle=(0,e.runWhenIdle)(()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}e.IdleValue=U;async function F(D,o,h){let P;for(let L=0;L<h;L++)try{return await D()}catch(j){P=j,await l(o)}throw P}e.retry=F;class B{hasPending(o){return this._pending?typeof o=="number"?this._pending.taskId===o:!!this._pending:!1}get pending(){return this._pending?this._pending.promise:void 0}cancelPending(){this._pending?.cancel()}setPending(o,h,P){return this._pending={taskId:o,cancel:()=>P?.(),promise:h},h.then(()=>this.donePending(o),()=>this.donePending(o)),h}donePending(o){this._pending&&o===this._pending.taskId&&(this._pending=void 0,this.triggerNext())}triggerNext(){if(this._next){const o=this._next;this._next=void 0,o.run().then(o.promiseResolve,o.promiseReject)}}setNext(o){if(this._next)this._next.run=o;else{let h,P;const L=new Promise((j,ee)=>{h=j,P=ee});this._next={run:o,promise:L,promiseResolve:h,promiseReject:P}}return this._next.promise}}e.TaskSequentializer=B;class Q{constructor(o,h=()=>Date.now()){this.interval=o,this.nowFn=h,this.lastIncrementTime=0,this.value=0}increment(){const o=this.nowFn();return o-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=o,this.value=0),this.value++,this.value}}e.IntervalCounter=Q;class z{constructor(){this.rejected=!1,this.resolved=!1,this.p=new Promise((o,h)=>{this.completeCallback=o,this.errorCallback=h})}get isRejected(){return this.rejected}get isResolved(){return this.resolved}get isSettled(){return this.rejected||this.resolved}complete(o){return new Promise(h=>{this.completeCallback(o),this.resolved=!0,h()})}error(o){return new Promise(h=>{this.errorCallback(o),this.rejected=!0,h()})}cancel(){new Promise(o=>{this.errorCallback(new b.CancellationError),this.rejected=!0,o()})}}e.DeferredPromise=z;var Y;(function(D){async function o(P){let L;const j=await Promise.all(P.map(ee=>ee.then(te=>te,te=>{L||(L=te)})));if(typeof L!="undefined")throw L;return j}D.settled=o;function h(P){return new Promise(async(L,j)=>{try{await P(L,j)}catch(ee){j(ee)}})}D.withAsyncBody=h})(Y=e.Promises||(e.Promises={}));var X;(function(D){D[D.Initial=0]="Initial",D[D.DoneOK=1]="DoneOK",D[D.DoneError=2]="DoneError"})(X||(X={}));class J{constructor(o){this._state=0,this._results=[],this._error=null,this._onStateChanged=new v.Emitter,queueMicrotask(async()=>{const h={emitOne:P=>this.emitOne(P),emitMany:P=>this.emitMany(P),reject:P=>this.reject(P)};try{await Promise.resolve(o(h)),this.resolve()}catch(P){this.reject(P)}finally{h.emitOne=void 0,h.emitMany=void 0,h.reject=void 0}})}static fromArray(o){return new J(h=>{h.emitMany(o)})}static fromPromise(o){return new J(async h=>{h.emitMany(await o)})}static fromPromises(o){return new J(async h=>{await Promise.all(o.map(async P=>h.emitOne(await P)))})}static merge(o){return new J(async h=>{await Promise.all(o.map(async P=>{for await(const L of P)h.emitOne(L)}))})}[Symbol.asyncIterator](){let o=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(o<this._results.length)return{done:!1,value:this._results[o++]};if(this._state===1)return{done:!0,value:void 0};await v.Event.toPromise(this._onStateChanged.event)}while(!0)}}}static map(o,h){return new J(async P=>{for await(const L of o)P.emitOne(h(L))})}map(o){return J.map(this,o)}static filter(o,h){return new J(async P=>{for await(const L of o)h(L)&&P.emitOne(L)})}filter(o){return J.filter(this,o)}static coalesce(o){return J.filter(o,h=>!!h)}coalesce(){return J.coalesce(this)}static async toPromise(o){const h=[];for await(const P of o)h.push(P);return h}toPromise(){return J.toPromise(this)}emitOne(o){this._state===0&&(this._results.push(o),this._onStateChanged.fire())}emitMany(o){this._state===0&&(this._results=this._results.concat(o),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(o){this._state===0&&(this._state=2,this._error=o,this._onStateChanged.fire())}}e.AsyncIterableObject=J,J.EMPTY=J.fromArray([]);class ne extends J{constructor(o,h){super(h);this._source=o}cancel(){this._source.cancel()}}e.CancelableAsyncIterableObject=ne;function oe(D){const o=new u.CancellationTokenSource,h=D(o.token);return new ne(o,async P=>{const L=o.token.onCancellationRequested(()=>{L.dispose(),o.dispose(),P.reject(new b.CancellationError)});try{for await(const j of h){if(o.token.isCancellationRequested)return;P.emitOne(j)}L.dispose(),o.dispose()}catch(j){L.dispose(),o.dispose(),P.reject(j)}})}e.createCancelableAsyncIterable=oe}),define(Z[21],x([0,1,35]),function(H,e,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LineDecoder=void 0;class b{constructor(M="utf8"){this.stringDecoder=new u.StringDecoder(M),this.remaining=null}write(M){const d=[],w=this.remaining?this.remaining+this.stringDecoder.write(M):this.stringDecoder.write(M);if(w.length<1)return d;let _=0,k,S=_;for(;S<w.length;)if(k=w.charCodeAt(S),k===13||k===10){if(d.push(w.substring(_,S)),S++,S<w.length){const p=k;k=w.charCodeAt(S),(p===13&&k===10||p===10&&k===13)&&S++}_=S}else S++;return this.remaining=_<w.length?w.substr(_):null,d}end(){return this.remaining}}e.LineDecoder=b}),define(Z[22],x([0,1,36,37,38,19,3,17,4,2,10,6]),function(H,e,u,b,v,M,d,w,_,k,S,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Promises=e.writeFileSync=e.SymlinkSupport=e.whenDeleted=e.readdirSync=e.rimrafSync=e.RimRafMode=void 0;var q;(function(E){E[E.UNLINK=0]="UNLINK",E[E.MOVE=1]="MOVE"})(q=e.RimRafMode||(e.RimRafMode={}));async function R(E,U=q.UNLINK){if((0,d.isRootOrDriveLetter)(E))throw new Error("rimraf - will refuse to recursively delete root");return U===q.UNLINK?y(E):c(E)}async function c(E){try{const U=(0,d.randomPath)((0,b.tmpdir)());try{await u.promises.rename(E,U)}catch{return y(E)}y(U).catch(F=>{})}catch(U){if(U.code!=="ENOENT")throw U}}async function y(E){return e.Promises.rmdir(E,{recursive:!0,maxRetries:3})}function O(E){if((0,d.isRootOrDriveLetter)(E))throw new Error("rimraf - will refuse to recursively delete root");u.rmdirSync(E,{recursive:!0})}e.rimrafSync=O;async function N(E,U){return m(await(U?W(E):(0,v.promisify)(u.readdir)(E)))}async function W(E){try{return await(0,v.promisify)(u.readdir)(E,{withFileTypes:!0})}catch(B){console.warn("[node.js fs] readdir with filetypes failed with error: ",B)}const U=[],F=await N(E);for(const B of F){let Q=!1,z=!1,Y=!1;try{const X=await e.Promises.lstat((0,_.join)(E,B));Q=X.isFile(),z=X.isDirectory(),Y=X.isSymbolicLink()}catch(X){console.warn("[node.js fs] unexpected error from lstat after readdir: ",X)}U.push({name:B,isFile:()=>Q,isDirectory:()=>z,isSymbolicLink:()=>Y})}return U}function C(E){return m(u.readdirSync(E))}e.readdirSync=C;function m(E){return E.map(U=>typeof U=="string"?k.isMacintosh?(0,w.normalizeNFC)(U):U:(U.name=k.isMacintosh?(0,w.normalizeNFC)(U.name):U.name,U))}async function T(E){const U=await N(E),F=[];for(const B of U)await g.existsDirectory((0,_.join)(E,B))&&F.push(B);return F}function I(E,U=1e3){return new Promise(F=>{let B=!1;const Q=setInterval(()=>{B||(B=!0,u.access(E,z=>{B=!1,z&&(clearInterval(Q),F(void 0))}))},U)})}e.whenDeleted=I;var g;(function(E){async function U(Q){let z;try{if(z=await e.Promises.lstat(Q),!z.isSymbolicLink())return{stat:z}}catch{}try{return{stat:await e.Promises.stat(Q),symbolicLink:z?.isSymbolicLink()?{dangling:!1}:void 0}}catch(Y){if(Y.code==="ENOENT"&&z)return{stat:z,symbolicLink:{dangling:!0}};if(k.isWindows&&Y.code==="EACCES")try{return{stat:await e.Promises.stat(await e.Promises.readlink(Q)),symbolicLink:{dangling:!1}}}catch(X){if(X.code==="ENOENT"&&z)return{stat:z,symbolicLink:{dangling:!0}};throw X}throw Y}}E.stat=U;async function F(Q){try{const{stat:z,symbolicLink:Y}=await E.stat(Q);return z.isFile()&&Y?.dangling!==!0}catch{}return!1}E.existsFile=F;async function B(Q){try{const{stat:z,symbolicLink:Y}=await E.stat(Q);return z.isDirectory()&&Y?.dangling!==!0}catch{}return!1}E.existsDirectory=B})(g=e.SymlinkSupport||(e.SymlinkSupport={}));const l=new M.ResourceQueue;function t(E,U,F){return l.queueFor(p.URI.file(E),S.extUriBiasedIgnorePathCase).queue(()=>{const B=n(F);return new Promise((Q,z)=>s(E,U,B,Y=>Y?z(Y):Q()))})}let i=!0;function s(E,U,F,B){if(!i)return u.writeFile(E,U,{mode:F.mode,flag:F.flag},B);u.open(E,F.flag,F.mode,(Q,z)=>{if(Q)return B(Q);u.writeFile(z,U,Y=>{if(Y)return u.close(z,()=>B(Y));u.fdatasync(z,X=>(X&&(console.warn("[node.js fs] fdatasync is now disabled for this session because it failed: ",X),i=!1),u.close(z,J=>B(J))))})})}function r(E,U,F){const B=n(F);if(!i)return u.writeFileSync(E,U,{mode:B.mode,flag:B.flag});const Q=u.openSync(E,B.flag,B.mode);try{u.writeFileSync(Q,U);try{u.fdatasyncSync(Q)}catch(z){console.warn("[node.js fs] fdatasyncSync is now disabled for this session because it failed: ",z),i=!1}}finally{u.closeSync(Q)}}e.writeFileSync=r;function n(E){return E?{mode:typeof E.mode=="number"?E.mode:438,flag:typeof E.flag=="string"?E.flag:"w"}:{mode:438,flag:"w"}}async function a(E,U){if(E!==U)try{await e.Promises.rename(E,U)}catch(F){if(E.toLowerCase()!==U.toLowerCase()&&F.code==="EXDEV"||E.endsWith("."))await f(E,U,{preserveSymlinks:!1}),await R(E,q.MOVE);else throw F}}async function f(E,U,F){return $(E,U,{root:{source:E,target:U},options:F,handledSourcePaths:new Set})}const A=511;async function $(E,U,F){if(F.handledSourcePaths.has(E))return;F.handledSourcePaths.add(E);const{stat:B,symbolicLink:Q}=await g.stat(E);if(Q){if(F.options.preserveSymlinks)try{return await G(E,U,F)}catch(z){console.warn("[node.js fs] copy of symlink failed: ",z)}if(Q.dangling)return}return B.isDirectory()?V(E,U,B.mode&A,F):K(E,U,B.mode&A)}async function V(E,U,F,B){await e.Promises.mkdir(U,{recursive:!0,mode:F});const Q=await N(E);for(const z of Q)await $((0,_.join)(E,z),(0,_.join)(U,z),B)}async function K(E,U,F){await e.Promises.copyFile(E,U),await e.Promises.chmod(U,F)}async function G(E,U,F){let B=await e.Promises.readlink(E);(0,d.isEqualOrParent)(B,F.root.source,!k.isLinux)&&(B=(0,_.join)(F.root.target,B.substr(F.root.source.length+1))),await e.Promises.symlink(B,U)}e.Promises=new class{get access(){return(0,v.promisify)(u.access)}get stat(){return(0,v.promisify)(u.stat)}get lstat(){return(0,v.promisify)(u.lstat)}get utimes(){return(0,v.promisify)(u.utimes)}get read(){return(E,U,F,B,Q)=>new Promise((z,Y)=>{u.read(E,U,F,B,Q,(X,J,ne)=>X?Y(X):z({bytesRead:J,buffer:ne}))})}get readFile(){return(0,v.promisify)(u.readFile)}get write(){return(E,U,F,B,Q)=>new Promise((z,Y)=>{u.write(E,U,F,B,Q,(X,J,ne)=>X?Y(X):z({bytesWritten:J,buffer:ne}))})}get appendFile(){return(0,v.promisify)(u.appendFile)}get fdatasync(){return(0,v.promisify)(u.fdatasync)}get truncate(){return(0,v.promisify)(u.truncate)}get rename(){return(0,v.promisify)(u.rename)}get copyFile(){return(0,v.promisify)(u.copyFile)}get open(){return(0,v.promisify)(u.open)}get close(){return(0,v.promisify)(u.close)}get symlink(){return(0,v.promisify)(u.symlink)}get readlink(){return(0,v.promisify)(u.readlink)}get chmod(){return(0,v.promisify)(u.chmod)}get mkdir(){return(0,v.promisify)(u.mkdir)}get unlink(){return(0,v.promisify)(u.unlink)}get rmdir(){return(0,v.promisify)(u.rmdir)}get realpath(){return(0,v.promisify)(u.realpath)}async exists(E){try{return await e.Promises.access(E),!0}catch{return!1}}get readdir(){return N}get readDirsInDir(){return T}get writeFile(){return t}get rm(){return R}get move(){return a}get copy(){return f}}}),define(Z[23],x([24,25]),function(H,e){return H.create("vs/base/common/errorMessage",e)}),define(Z[26],x([0,1,16,5,23]),function(H,e,u,b,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createErrorWithActions=e.isErrorWithActions=e.toErrorMessage=void 0;function M(p,q){return q&&(p.stack||p.stacktrace)?v.localize(0,null,w(p),d(p.stack)||d(p.stacktrace)):w(p)}function d(p){return Array.isArray(p)?p.join(`
`):p}function w(p){return typeof p.code=="string"&&typeof p.errno=="number"&&typeof p.syscall=="string"?v.localize(1,null,p.message):p.message||v.localize(2,null)}function _(p=null,q=!1){if(!p)return v.localize(3,null);if(Array.isArray(p)){const R=u.coalesce(p),c=_(R[0],q);return R.length>1?v.localize(4,null,c,R.length):c}if(b.isString(p))return p;if(p.detail){const R=p.detail;if(R.error)return M(R.error,q);if(R.exception)return M(R.exception,q)}return p.stack?M(p,q):p.message?p.message:v.localize(5,null)}e.toErrorMessage=_;function k(p){const q=p;return q instanceof Error&&Array.isArray(q.actions)}e.isErrorWithActions=k;function S(p,q=Object.create(null)){const R=new Error(p);return q.actions&&(R.actions=q.actions),R}e.createErrorWithActions=S}),define(Z[27],x([24,25]),function(H,e){return H.create("vs/base/node/processes",e)}),define(Z[28],x([0,1,29,3,9,30,4,2,39,11,5,21,22,27]),function(H,e,u,b,v,M,d,w,_,k,S,p,q,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.win32=e.createQueuedSender=e.LineProcess=e.AbstractProcess=e.getWindowsShell=e.removeDangerousEnvVariables=e.TerminateResponseCode=e.Source=void 0,Object.defineProperty(e,"Source",{enumerable:!0,get:function(){return k.Source}}),Object.defineProperty(e,"TerminateResponseCode",{enumerable:!0,get:function(){return k.TerminateResponseCode}});function c(I){switch(I){case 0:return 0;case 1:return 2;case 128:return 3;default:return 1}}function y(I,g){if(w.isWindows)try{const l={stdio:["pipe","pipe","ignore"]};g&&(l.cwd=g);const t=u.execFile("taskkill",["/T","/F","/PID",I.pid.toString()],l);return new Promise(i=>{t.once("error",s=>{i({success:!1,error:s})}),t.once("exit",(s,r)=>{i(s===0?{success:!0}:{success:!1,code:s!==null?s:1})})})}catch(l){return Promise.resolve({success:!1,error:l,code:l.status?c(l.status):1})}else if(w.isLinux||w.isMacintosh)try{const l=v.FileAccess.asFileUri("vs/base/node/terminateProcess.sh",H).fsPath;return new Promise(t=>{u.execFile(l,[I.pid.toString()],{encoding:"utf8",shell:!0},(i,s,r)=>{t(i?{success:!1,error:i}:{success:!0})})})}catch(l){return Promise.resolve({success:!1,error:l})}else I.kill("SIGKILL");return Promise.resolve({success:!0})}function O(I){!I||(delete I.DEBUG,w.isMacintosh&&delete I.DYLD_LIBRARY_PATH,w.isLinux&&delete I.LD_PRELOAD)}e.removeDangerousEnvVariables=O;function N(I=_.env){return I.comspec||"cmd.exe"}e.getWindowsShell=N;class W{constructor(g,l,t,i){if(l!==void 0&&t!==void 0&&i!==void 0)this.cmd=g,this.args=l,this.shell=t,this.options=i;else{const s=g;this.cmd=s.command,this.shell=s.isShellCommand,this.args=s.args.slice(0),this.options=s.options||{}}if(this.childProcess=null,this.childProcessPromise=null,this.terminateRequested=!1,this.options.env){const s=Object.create(null);Object.keys(_.env).forEach(r=>{s[r]=_.env[r]}),Object.keys(this.options.env).forEach(r=>{s[r]=this.options.env[r]}),this.options.env=s}}getSanitizedCommand(){let g=this.cmd.toLowerCase();const l=g.lastIndexOf(d.sep);return l!==-1&&(g=g.substring(l+1)),W.WellKnowCommands[g]?g:"other"}start(g){return w.isWindows&&(this.options&&this.options.cwd&&b.isUNC(this.options.cwd)||!this.options&&b.isUNC(_.cwd()))?Promise.reject(new Error(R.localize(0,null))):this.useExec().then(l=>{let t,i;const s=new Promise((r,n)=>{t=r,i=n});if(l){let r=this.cmd;this.args&&(r=r+" "+this.args.join(" ")),this.childProcess=u.exec(r,this.options,(n,a,f)=>{this.childProcess=null;const A=n;A&&A.killed?i({killed:this.terminateRequested,stdout:a.toString(),stderr:f.toString()}):this.handleExec(t,g,n,a,f)})}else{let r=null;const n=a=>{this.childProcess=null,this.childProcessPromise=null,this.handleClose(a,t,g,i);const f={terminated:this.terminateRequested};S.isNumber(a)&&(f.cmdCode=a),t(f)};if(this.shell&&w.isWindows){const a=M.deepClone(this.options);a.windowsVerbatimArguments=!0,a.detached=!1;let f=!1,A=!1;const $=[];let V=this.ensureQuotes(this.cmd);$.push(V.value),f=V.quoted,this.args&&this.args.forEach(G=>{V=this.ensureQuotes(G),$.push(V.value),A=A&&V.quoted});const K=["/s","/c"];f?A?K.push('"'+$.join(" ")+'"'):$.length>1?K.push('"'+$[0]+'" '+$.slice(1).join(" ")):K.push('"'+$[0]+'"'):K.push($.join(" ")),r=u.spawn(N(),K,a)}else this.cmd&&(r=u.spawn(this.cmd,this.args,this.options));r&&(this.childProcess=r,this.childProcessPromise=Promise.resolve(r),this.pidResolve&&(this.pidResolve(S.isNumber(r.pid)?r.pid:-1),this.pidResolve=void 0),r.on("error",a=>{this.childProcess=null,i({terminated:this.terminateRequested,error:a})}),r.pid&&(this.childProcess.on("close",n),this.handleSpawn(r,t,g,i,!0)))}return s})}handleClose(g,l,t,i){}ensureQuotes(g){return W.regexp.test(g)?{value:'"'+g+'"',quoted:!0}:{value:g,quoted:g.length>0&&g[0]==='"'&&g[g.length-1]==='"'}}get pid(){return this.childProcessPromise?this.childProcessPromise.then(g=>g.pid,g=>-1):new Promise(g=>{this.pidResolve=g})}terminate(){return this.childProcessPromise?this.childProcessPromise.then(g=>(this.terminateRequested=!0,y(g,this.options.cwd).then(l=>(l.success&&(this.childProcess=null),l))),g=>({success:!0})):Promise.resolve({success:!0})}useExec(){return new Promise(g=>{if(!this.shell||!w.isWindows)return g(!1);const l=u.spawn(N(),["/s","/c"]);l.on("error",t=>g(!0)),l.on("exit",t=>g(!1))})}}e.AbstractProcess=W,W.WellKnowCommands={ant:!0,cmake:!0,eslint:!0,gradle:!0,grunt:!0,gulp:!0,jake:!0,jenkins:!0,jshint:!0,make:!0,maven:!0,msbuild:!0,msc:!0,nmake:!0,npm:!0,rake:!0,tsc:!0,xbuild:!0},W.regexp=/^[^"].* .*[^"]/;class C extends W{constructor(g,l,t,i){super(g,l,t,i);this.stdoutLineDecoder=null,this.stderrLineDecoder=null}handleExec(g,l,t,i,s){[i,s].forEach((r,n)=>{const a=new p.LineDecoder;a.write(r).forEach($=>{l({line:$,source:n===0?0:1})});const A=a.end();A&&l({line:A,source:n===0?0:1})}),g({terminated:this.terminateRequested,error:t})}handleSpawn(g,l,t,i,s){const r=new p.LineDecoder,n=new p.LineDecoder;g.stdout.on("data",a=>{r.write(a).forEach(A=>t({line:A,source:0}))}),g.stderr.on("data",a=>{n.write(a).forEach(A=>t({line:A,source:1}))}),this.stdoutLineDecoder=r,this.stderrLineDecoder=n}handleClose(g,l,t,i){const s=this.stdoutLineDecoder?this.stdoutLineDecoder.end():null;s&&t({line:s,source:0});const r=this.stderrLineDecoder?this.stderrLineDecoder.end():null;r&&t({line:r,source:1})}}e.LineProcess=C;function m(I){let g=[],l=!1;const t=function(i){if(l){g.push(i);return}(!I.send(i,r=>{if(r&&console.error(r),l=!1,g.length>0){const n=g.slice(0);g=[],n.forEach(a=>t(a))}})||w.isWindows)&&(l=!0)};return{send:t}}e.createQueuedSender=m;var T;(function(I){async function g(l,t,i){if(d.isAbsolute(l))return l;if(t===void 0&&(t=_.cwd()),d.dirname(l)!=="."||(i===void 0&&S.isString(_.env.PATH)&&(i=_.env.PATH.split(d.delimiter)),i===void 0||i.length===0))return d.join(t,l);async function r(n){if(await q.Promises.exists(n)){let a;try{a=await q.Promises.stat(n)}catch(f){f.message.startsWith("EACCES")&&(a=await q.Promises.lstat(n))}return a?!a.isDirectory():!1}return!1}for(let n of i){let a;if(d.isAbsolute(n)?a=d.join(n,l):a=d.join(t,n,l),await r(a))return a;let f=a+".com";if(await r(f)||(f=a+".exe",await r(f)))return f}return d.join(t,l)}I.findExecutable=g})(T=e.win32||(e.win32={}))}),define(Z[31],x([0,1]),function(H,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.refineServiceDecorator=e.createDecorator=e.IInstantiationService=e._util=void 0;var u;(function(d){d.serviceIds=new Map,d.DI_TARGET="$di$target",d.DI_DEPENDENCIES="$di$dependencies";function w(_){return _[d.DI_DEPENDENCIES]||[]}d.getServiceDependencies=w})(u=e._util||(e._util={})),e.IInstantiationService=v("instantiationService");function b(d,w,_){w[u.DI_TARGET]===w?w[u.DI_DEPENDENCIES].push({id:d,index:_}):(w[u.DI_DEPENDENCIES]=[{id:d,index:_}],w[u.DI_TARGET]=w)}function v(d){if(u.serviceIds.has(d))return u.serviceIds.get(d);const w=function(_,k,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");b(w,_,S)};return w.toString=()=>d,u.serviceIds.set(d,w),w}e.createDecorator=v;function M(d){return d}e.refineServiceDecorator=M}),define(Z[32],x([0,1,40,31]),function(H,e,u,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ipcSharedProcessWorkerChannelName=e.ISharedProcessWorkerService=e.hash=void 0;function v(M){return(0,u.hash)({moduleId:M.process.moduleId,windowId:M.reply.windowId})}e.hash=v,e.ISharedProcessWorkerService=(0,b.createDecorator)("sharedProcessWorkerService"),e.ipcSharedProcessWorkerChannelName="sharedProcessWorker"}),define(Z[33],x([0,1]),function(H,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedProcessWorkerMessages=void 0;var u;(function(b){b.Spawn="vscode:shared-process->shared-process-worker=spawn",b.Terminate="vscode:shared-process->shared-process-worker=terminate",b.SelfTerminated="vscode:shared-process-worker->shared-process=selfTerminated",b.Ready="vscode:shared-process-worker->shared-process=ready",b.Ack="vscode:shared-process-worker->shared-process=ack",b.Trace="vscode:shared-process-worker->shared-process=trace",b.Info="vscode:shared-process-worker->shared-process=info",b.Warn="vscode:shared-process-worker->shared-process=warn",b.Error="vscode:shared-process-worker->shared-process=error"})(u=e.SharedProcessWorkerMessages||(e.SharedProcessWorkerMessages={}))}),define(Z[41],x([0,1,29,42,14,18,26,20,7,30,5,28,32,33]),function(H,e,u,b,v,M,d,w,_,k,S,p,q,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=void 0;function c(){const C=new y;return W({id:R.SharedProcessWorkerMessages.Ready}),{onmessage:(m,T)=>C.onMessage(m,T)}}e.create=c;class y{constructor(){this.processes=new Map}onMessage(m,T){switch(m.id){case R.SharedProcessWorkerMessages.Spawn:T&&T[0]instanceof MessagePort&&m.environment&&this.spawn(T[0],m.configuration,m.environment);break;case R.SharedProcessWorkerMessages.Terminate:this.terminate(m.configuration);break;default:N.warn(`Unexpected shared process message '${m}'`)}m.nonce&&W({id:R.SharedProcessWorkerMessages.Ack,nonce:m.nonce})}spawn(m,T,I){try{this.terminate(T);const g=new O(m,T,I);g.spawn();const l=w.Event.once(g.onDidProcessSelfTerminate)(i=>{W({id:R.SharedProcessWorkerMessages.SelfTerminated,configuration:T,message:JSON.stringify(i)})}),t=(0,q.hash)(T);this.processes.set(t,(0,_.toDisposable)(()=>{l.dispose(),g.dispose(),this.processes.delete(t)}))}catch(g){N.error(`Unexpected error forking worker process: ${(0,d.toErrorMessage)(g)}`)}}terminate(m){const T=this.processes.get((0,q.hash)(m));T&&T.dispose()}}class O extends _.Disposable{constructor(m,T,I){super();this.port=m,this.configuration=T,this.environment=I,this._onDidProcessSelfTerminate=this._register(new w.Emitter),this.onDidProcessSelfTerminate=this._onDidProcessSelfTerminate.event,this.child=void 0}spawn(){N.trace("Forking worker process"),this.child=(0,u.fork)(this.environment.bootstrapPath,[`--type=${this.configuration.process.type}`],{env:this.getEnv()}),N.info(`Starting worker process with pid ${this.child.pid} (type: ${this.configuration.process.type}, window: ${this.configuration.reply.windowId}).`);const m=w.Event.fromNodeEventEmitter(this.child,"error");this._register(m(i=>N.warn(`Error from child process: ${(0,d.toErrorMessage)(i)}`)));const T=w.Event.fromNodeEventEmitter(this.child,"exit",(i,s)=>({code:i,signal:s}));this._register(T(({code:i,signal:s})=>{const r=`Worker process with pid ${this.child?.pid} terminated by itself with code ${i}, signal: ${s} (type: ${this.configuration.process.type}, window: ${this.configuration.reply.windowId})`;i!==0&&s!=="SIGTERM"?N.error(r):N.info(r),this.child=void 0,this._onDidProcessSelfTerminate.fire({code:(0,S.withNullAsUndefined)(i),signal:(0,S.withNullAsUndefined)(s)})}));const I=this._register(new w.Emitter),g=w.Event.fromNodeEventEmitter(this.child,"message",i=>i);this._register(g(i=>{(0,M.isRemoteConsoleLog)(i)?(0,b.log)(i,"SharedProcess worker"):I.fire(v.VSBuffer.wrap(Buffer.from(i,"base64")))}));const l=i=>{this.child?.connected?this.child.send(i.buffer.toString("base64")):N.warn("Unable to deliver message to disconnected child")},t=I.event;this._register(t(i=>this.port.postMessage(i.buffer))),this.port.onmessage=i=>l(v.VSBuffer.wrap(i.data)),this._register((0,_.toDisposable)(()=>this.port.onmessage=null))}getEnv(){const m={...(0,k.deepClone)(process.env),VSCODE_AMD_ENTRYPOINT:this.configuration.process.moduleId,VSCODE_PIPE_LOGGING:"true",VSCODE_VERBOSE_LOGGING:"true",VSCODE_PARENT_PID:String(process.pid)};return(0,p.removeDangerousEnvVariables)(m),m}dispose(){super.dispose(),!!this.child&&(this.child.kill(),N.info(`Worker process with pid ${this.child?.pid} terminated normally (type: ${this.configuration.process.type}, window: ${this.configuration.reply.windowId}).`))}}var N;(function(C){function m(l){W({id:R.SharedProcessWorkerMessages.Error,message:l})}C.error=m;function T(l){W({id:R.SharedProcessWorkerMessages.Warn,message:l})}C.warn=T;function I(l){W({id:R.SharedProcessWorkerMessages.Info,message:l})}C.info=I;function g(l){W({id:R.SharedProcessWorkerMessages.Trace,message:l})}C.trace=g})(N||(N={}));function W(C){postMessage(C)}})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/c722ca6c7eed3d7987c0d5c3df5c45f6b15e77d1/core/vs/platform/sharedProcess/electron-browser/sharedProcessWorkerMain.js.map
